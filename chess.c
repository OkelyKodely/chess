/* 

 *  * Application: My Chess
 * Author: Daniel Cho

 *  */

#include <windows.h>
#include <commctrl.h>
#include <mmsystem.h>
#include <string.h>
#include <stdio.h>
#include <time.h>
#include <tchar.h>
#include "chess.h"

#define ID_FILE_PRINT 16001

#define IDC_CAPTURE_SCREEN_BUTTON 16002

boolean fftime = TRUE;

int deathed = -1;

int _y_ = 20;

char chosenPiece[2] = "";

#define COLORREF2RGB(Color) (Color & 0xff00) | ((Color >> 16) & 0xff) | ((Color << 16) & 0xfe0000)

#define IDC_QUIT_BUTTON 101

#define IDC_NEW_GAME_BUTTON 102

boolean klicked = FALSE;
int i__PosX = 0;
int i__PosY = 0;
            
boolean done = FALSE;

boolean greyKingMoved = FALSE;

boolean redKingMoved = FALSE;

boolean greyRook1Moved = FALSE;

boolean redRook1Moved = FALSE;

boolean greyRook2Moved = FALSE;

boolean redRook2Moved = FALSE;

MSG msg;

RECT rect;

HINSTANCE hInst;
HINSTANCE g_hinstance;
HBITMAP hBitmap;
HBITMAP hBitmapSq;
HBITMAP pawnBlack, pawnWhite, knightBlack, knight2Black, knightWhite, knight2White, rookBlack, rook2Black, rookWhite, rook2White, bishopBlack, bishop2Black, bishopWhite, bishop2White, queenBlack, queenWhite, kingBlack, kingWhite;
HBITMAP pawnBlack_s, pawnWhite_s, knightBlack_s, knight2Black_s, knightWhite_s, knight2White_s, rookBlack_s, rook2Black_s, rookWhite_s, rook2White_s, bishopBlack_s, bishop2Black_s, bishopWhite_s, bishop2White_s, queenBlack_s, queenWhite_s, kingBlack_s, kingWhite_s;
HBITMAP pawnBlack_ss, pawnWhite_ss, knightBlack_ss, knight2Black_ss, knightWhite_ss, knight2White_ss, rookBlack_ss, rook2Black_ss, rookWhite_ss, rook2White_ss, bishopBlack_ss, bishop2Black_ss, bishopWhite_ss, bishop2White_ss, queenBlack_ss, queenWhite_ss, kingBlack_ss, kingWhite_ss;

HINSTANCE		ghInstance = NULL ;
ATOM			RegisterWindowClass(HINSTANCE hInstance, char *pszWindowClassName) ;
BOOL			InitInstance(HINSTANCE, int, char *pszWindowClassName) ;
LRESULT CALLBACK	WndProc(HWND, UINT, WPARAM, LPARAM) ;
HBITMAP                 ReplaceColor(HBITMAP hBmp, COLORREF cOldColor,COLORREF cNewColor,HDC hBmpDC);

static HWND hwnd_timer, hwnd_white, hwnd_black, hwnd_newgamebtn, hwnd_capturescreenbtn, hwnd_quitbtn;
int x, w, y, h;

HANDLE thread;
int timestampPast;
int timestampNow;
int min;
int sec;
int total;
int ws, wm;

int ttw = 0;
int timeToWait = 0;

time_t secs;
boolean turnChanged = FALSE;

HBRUSH hColorBrush = 0;

LPSTR TextArray [] = {
    "    CHECK"
};

#define			BUTTON_IDENTIFIER	1
#define IDC_EDIT1 1324
#define IDD_TOOLBAR 1234
HWND g_hToolbar = NULL;

INT_PTR CALLBACK YourWndProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
    case WM_INITDIALOG:
        //SetDlgItemText(hDlg, IDC_EDIT1, (LPSTR)lParam);
        return (INT_PTR)TRUE;
    case WM_CLOSE:
        EndDialog(hDlg, LOWORD(wParam));
        break;
    }
    return DefWindowProc(hDlg, message, wParam, lParam);
}

void Print_Window(HWND hWnd) {
    keybd_event(VK_SNAPSHOT, 1, KEYEVENTF_UNICODE, 0);
    MessageBox(hWnd, "Window captured.  Now you may paste/print it with something like MS Paint", "Success!", MB_OK);
//
//    //getting printer DC
//    HDC printerDC = CreateDC( "WINSPOOL","HP LaserJet Professional P1102w", NULL, NULL);
//
//    HDC hdcSource = GetDC(hWnd);
//    
//    int capX = GetDeviceCaps(hdcSource, HORZRES);
//    int capY = GetDeviceCaps(hdcSource, VERTRES);
//
//    //starting doc and pages:
//    DOCINFO doc;
//    doc.cbSize = sizeof(DOCINFO);
//    doc.lpszDocName = "1st doc";
//    StartDoc(printerDC, &doc);
//    StartPage(printerDC);
//    
//    //draw on printer using GDI functions
//    RECT windowRect;
//    GetClientRect (hWnd, &windowRect);
//    BitBlt(printerDC,0,0,windowRect.right,windowRect.bottom,hdcSource,1000,1000,SRCCOPY);
//
//    //end pages and doc
//    EndPage(printerDC);
//    EndDoc(printerDC);
//
//    //delete the printer DC
//    DeleteDC(printerDC);
}

HBITMAP ReplaceColor(HBITMAP hBmp,COLORREF cOldColor,COLORREF cNewColor,HDC hBmpDC)
{
    HBITMAP RetBmp=NULL;
    if (hBmp)
    {
        HDC BufferDC=CreateCompatibleDC(NULL);
        if (BufferDC)
        {
            HBITMAP hTmpBitmap = (HBITMAP) NULL;
            if (hBmpDC)
                if (hBmp == (HBITMAP)GetCurrentObject(hBmpDC, OBJ_BITMAP))
            {
                hTmpBitmap = CreateBitmap(1, 1, 1, 1, NULL);
                SelectObject(hBmpDC, hTmpBitmap);
            }

            HGDIOBJ PreviousBufferObject=SelectObject(BufferDC,hBmp);
            
            HDC DirectDC=CreateCompatibleDC(NULL);
            if (DirectDC)
            {
                BITMAP bm;
                GetObject(hBmp, sizeof(bm), &bm);

                BITMAPINFO RGB32BitsBITMAPINFO; 
                ZeroMemory(&RGB32BitsBITMAPINFO,sizeof(BITMAPINFO));
                RGB32BitsBITMAPINFO.bmiHeader.biSize=sizeof(BITMAPINFOHEADER);
                RGB32BitsBITMAPINFO.bmiHeader.biWidth=bm.bmWidth;
                RGB32BitsBITMAPINFO.bmiHeader.biHeight=bm.bmHeight;
                RGB32BitsBITMAPINFO.bmiHeader.biPlanes=1;
                RGB32BitsBITMAPINFO.bmiHeader.biBitCount=32;

                UINT * ptPixels;    

                HBITMAP DirectBitmap = CreateDIBSection(DirectDC, 
                                       (BITMAPINFO *)&RGB32BitsBITMAPINFO, 
                                       DIB_RGB_COLORS,
                                       (void **)&ptPixels, 
                                       NULL, 0);
                if (DirectBitmap)
                {
                    HGDIOBJ PreviousObject=SelectObject(DirectDC, DirectBitmap);
                    BitBlt(DirectDC,0,0,
                                   bm.bmWidth,bm.bmHeight,
                                   BufferDC,0,0,SRCCOPY);

                    cOldColor=COLORREF2RGB(cOldColor);
                    cNewColor=COLORREF2RGB(cNewColor);

                    for (int i=((bm.bmWidth*bm.bmHeight)-1);i>=0;i--)
                    {
                        if (ptPixels[i]==cOldColor) ptPixels[i]=cNewColor;
                    }
                    SelectObject(DirectDC,PreviousObject);

                    RetBmp=DirectBitmap;
                }
                DeleteDC(DirectDC);
            }            
            if (hTmpBitmap)
            {
                SelectObject(hBmpDC, hBmp);
                DeleteObject(hTmpBitmap);
            }
            SelectObject(BufferDC,PreviousBufferObject);
            DeleteDC(BufferDC);
        }
    }
    return RetBmp;
}

DWORD WINAPI ThreadFunc(void* data) {
    char b[91];
    SYSTEMTIME st;
    GetLocalTime(&st);
    ws = st.wSecond;
    wm = st.wMinute;
    time_t seconds;
    seconds = time(NULL);
    boolean dodo = TRUE;
    int ls;
    while(TRUE) {
        GetLocalTime(&st);
        timestampNow = st.wSecond; 
        GetLocalTime(&st);
        sec = st.wSecond - ws;
        if(sec < 0) {
            sec = 60 - (st.wSecond - ws) * -1;
            min = st.wMinute - wm;
            min--;
        } else {
            min = st.wMinute - wm;
        }
        int cs = secs;
        secs = time(NULL) - seconds;
        ls = secs;
        sec = secs % 60;
        min = secs / 60;
        total = min*60 + sec;
        boolean notimelimit = FALSE;
        if(ttw == 0 && timeToWait == 0) {
            notimelimit = TRUE;
        }
        if(!notimelimit) {
            if(turn == 'h') {

                sprintf(b, "white to move - out of %d mins %d mins and %d secs elapsed",ttw, min, sec);
            } else {

                sprintf(b, "black to move - out of %d mins %d mins and %d secs elapsed",ttw, min, sec);
            }
        } else {
            if(turn == 'h') {

                sprintf(b, "white to move");
            } else {

                sprintf(b, "black to move");
            }
        }
        if(ls != cs) {
            
            SetWindowText(hwnd_timer, b);
        }
        if(!notimelimit) {
            if(total >= timeToWait || turnChanged) {
                if(!turnChanged && !fftime) {
                    if(turn == 'h') {
                        turn = 'r';
                    } else if(turn == 'r') {
                        turn = 'h';
                    }
                }
                turnChanged = FALSE;
                ws = st.wSecond;
                wm = st.wMinute;
                sec = 0;
                min = 0;
                total = 0;
                seconds = time(NULL);
            }
        }
    }
    return 0;
}

int center_window(HWND parent_window, int width, int height) {
    GetClientRect(parent_window, &rect);
    rect.left = (rect.right/2) - (width/2);
    rect.top = (rect.bottom/2) - (height/2);
    return 0;
}

void Play() {
    HBRUSH white_brush = CreateSolidBrush(RGB(255, 255, 255));
    RECT rrect = {820, 20, 1100, 810};
    FillRect(hdc, &rrect, white_brush);
    DeleteObject(white_brush);
    firstTime = FALSE;
    greyKingMoved = FALSE;
    redKingMoved = FALSE;
    greyRook1Moved = FALSE;
    redRook1Moved = FALSE;
    greyRook2Moved = FALSE;
    redRook2Moved = FALSE;
    DrawChessBoard();
    greyKingSquare.posX = 4*100;
    greyKingSquare.posY = 7*100;
    greyKingSquare.x1 = 4*100+0+20+10+10;
    greyKingSquare.y1 = 730+10;
    greyKingSquare.x2 = 4*100+0+40+20+10+10;
    greyKingSquare.y2 = 750+10;
    greyKingRectangle.x1 = 4*100+0+35+10+10;
    greyKingRectangle.y1 = 715+10;
    greyKingRectangle.x2 = 4*100+0+40+5+10+10;
    greyKingRectangle.y2 = 750+10;
    greyKingEllipse.x1 = 4*100+0+30+10+10;
    greyKingEllipse.y1 = 750+10;
    greyKingEllipse.x2 = 4*100+0+30+20+10+10;
    greyKingEllipse.y2 = 770+10;
    greyKingBase.x1 = 4*100+0+30+10+10;
    greyKingBase.y1 = 770+10;
    greyKingBase.x2 = 4*100+0+30+20+10+10;
    greyKingBase.y2 = 800+10;
    redKingSquare.posX = 4*100;
    redKingSquare.posY = 0*100;
    redKingSquare.x1 = 4*100+0+20+10+10;
    redKingSquare.y1 = 30+10;
    redKingSquare.x2 = 4*100+0+40+20+10+10;
    redKingSquare.y2 = 50+10;
    redKingRectangle.x1 = 4*100+0+35+10+10;
    redKingRectangle.y1 = 15+10;
    redKingRectangle.x2 = 4*100+0+40+5+10+10;
    redKingRectangle.y2 = 50+10;
    redKingEllipse.x1 = 4*100+0+30+10+10;
    redKingEllipse.y1 = 50+10;
    redKingEllipse.x2 = 4*100+0+30+20+10+10;
    redKingEllipse.y2 = 70+10;
    redKingBase.x1 = 4*100+0+30+10+10;
    redKingBase.y1 = 70+10;
    redKingBase.x2 = 4*100+0+30+20+10+10;
    redKingBase.y2 = 100+10;
    greyQueenSquare.posX = 3*100;
    greyQueenSquare.posY = 7*100;
    greyQueenSquare.x1 = 3*100+0+20+10-5+3+10;
    greyQueenSquare.y1 = 730+10;
    greyQueenSquare.x2 = 3*100+0+40+20+10-5+3+10;
    greyQueenSquare.y2 = 750+10;
    greyQueenRectangle1.x1 = 3*100+0+35-5-5+3+10;
    greyQueenRectangle1.y1 = 715+10;
    greyQueenRectangle1.x2 = 3*100+0+40+5-5-5+3+10;
    greyQueenRectangle1.y2 = 750+10;
    greyQueenRectangle2.x1 = 3*100+0+35+13-5+3+10;
    greyQueenRectangle2.y1 = 715+10;
    greyQueenRectangle2.x2 = 3*100+0+40+5+13-5+3+10;
    greyQueenRectangle2.y2 = 750+10;
    greyQueenRectangle3.x1 = 3*100+0+35+30-5+3+10;
    greyQueenRectangle3.y1 = 715+10;
    greyQueenRectangle3.x2 = 3*100+0+40+5+30-5+3+10;
    greyQueenRectangle3.y2 = 750+10;
    greyQueenEllipse.x1 = 3*100+0+30+10+10;
    greyQueenEllipse.y1 = 750+10;
    greyQueenEllipse.x2 = 3*100+0+30+20+10+10;
    greyQueenEllipse.y2 = 770+10;
    greyQueenBase.x1 = 3*100+0+30+10+10;
    greyQueenBase.y1 = 770+10;
    greyQueenBase.x2 = 3*100+0+30+20+10+10;
    greyQueenBase.y2 = 800+10;
    greyBishop1Square.posX = 2*100;
    greyBishop1Square.posY = 7*100;
    greyBishop1Square.x1 = 2*100+0+20+10-5+3+5+10;
    greyBishop1Square.y1 = 725+10;
    greyBishop1Square.x2 = 2*100+0+40+20+10-5+3+10;
    greyBishop1Square.y2 = 735+10;
    greyBishop1Rectangle.x1 = 2*100+0+35+13-5+3+10;
    greyBishop1Rectangle.y1 = 715+10;
    greyBishop1Rectangle.x2 = 2*100+0+40+5+13-5+3+10;
    greyBishop1Rectangle.y2 = 750+10;
    greyBishop1Ellipse.x1 = 2*100+0+30+10+10;
    greyBishop1Ellipse.y1 = 750+10;
    greyBishop1Ellipse.x2 = 2*100+0+30+20+10+10;
    greyBishop1Ellipse.y2 = 770+10;
    greyBishop1Base.x1 = 2*100+0+30+10+10;
    greyBishop1Base.y1 = 770+10;
    greyBishop1Base.x2 = 2*100+0+30+20+10+10;
    greyBishop1Base.y2 = 800+10;
    greyBishop2Square.posX = 5*100;
    greyBishop2Square.posY = 7*100;
    greyBishop2Square.x1 = 5*100+0+20+10-5+3+5+10;
    greyBishop2Square.y1 = 725+10;
    greyBishop2Square.x2 = 5*100+0+40+20+10-5+3+10;
    greyBishop2Square.y2 = 735+10;
    greyBishop2Rectangle.x1 = 5*100+0+35+13-5+3+10;
    greyBishop2Rectangle.y1 = 715+10;
    greyBishop2Rectangle.x2 = 5*100+0+40+5+13-5+3+10;
    greyBishop2Rectangle.y2 = 750+10;
    greyBishop2Ellipse.x1 = 5*100+0+30+10+10;
    greyBishop2Ellipse.y1 = 750+10;
    greyBishop2Ellipse.x2 = 5*100+0+30+20+10+10;
    greyBishop2Ellipse.y2 = 770+10;
    greyBishop2Base.x1 = 5*100+0+30+10+10;
    greyBishop2Base.y1 = 770+10;
    greyBishop2Base.x2 = 5*100+0+30+20+10+10;
    greyBishop2Base.y2 = 800+10;
    redRook1Rectangle1.posX = 0*100;
    redRook1Rectangle1.posY = 0*100;
    redRook1Rectangle1.x1 = 0*100+0+40+10;
    redRook1Rectangle1.y1 = 30+10;
    redRook1Rectangle1.x2 = 0*100+0+45+10;
    redRook1Rectangle1.y2 = 50+10;
    redRook1Rectangle2.x1 = 0*100+0+55+10;
    redRook1Rectangle2.y1 = 30+10;
    redRook1Rectangle2.x2 = 0*100+0+60+10;
    redRook1Rectangle2.y2 = 50+10;
    redRook1Ellipse.x1 = 0*100+0+40+10;
    redRook1Ellipse.y1 = 50+10;
    redRook1Ellipse.x2 = 0*100+0+60+10;
    redRook1Ellipse.y2 = 70+10;
    redRook1Base.x1 = 0*100+0+40+10;
    redRook1Base.y1 = 70+10;
    redRook1Base.x2 = 0*100+0+60+10;
    redRook1Base.y2 = 100+10;
    redRook2Rectangle1.posX = 7*100;
    redRook2Rectangle1.posY = 0*100;
    redRook2Rectangle1.x1 = 7*100+0+40+10;
    redRook2Rectangle1.y1 = 30+10;
    redRook2Rectangle1.x2 = 7*100+0+45+10;
    redRook2Rectangle1.y2 = 50+10;
    redRook2Rectangle2.x1 = 7*100+0+55+10;
    redRook2Rectangle2.y1 = 30+10;
    redRook2Rectangle2.x2 = 7*100+0+60+10;
    redRook2Rectangle2.y2 = 50+10;
    redRook2Ellipse.x1 = 7*100+0+40+10;
    redRook2Ellipse.y1 = 50+10;
    redRook2Ellipse.x2 = 7*100+0+60+10;
    redRook2Ellipse.y2 = 70+10;
    redRook2Base.x1 = 7*100+0+40+10;
    redRook2Base.y1 = 70+10;
    redRook2Base.x2 = 7*100+0+60+10;
    redRook2Base.y2 = 100+10;
    greyRook1Rectangle1.posX = 0*100;
    greyRook1Rectangle1.posY = 7*100;
    greyRook1Rectangle1.x1 = 0*100+0+40+10;
    greyRook1Rectangle1.y1 = 730+10;
    greyRook1Rectangle1.x2 = 0*100+0+45+10;
    greyRook1Rectangle1.y2 = 750+10;
    greyRook1Rectangle2.x1 = 0*100+0+55+10;
    greyRook1Rectangle2.y1 = 730+10;
    greyRook1Rectangle2.x2 = 0*100+0+60+10;
    greyRook1Rectangle2.y2 = 750+10;
    greyRook1Ellipse.x1 = 0*100+0+40+10;
    greyRook1Ellipse.y1 = 750+10;
    greyRook1Ellipse.x2 = 0*100+0+60+10;
    greyRook1Ellipse.y2 = 770+10;
    greyRook1Base.x1 = 0*100+0+40+10;
    greyRook1Base.y1 = 770+10;
    greyRook1Base.x2 = 0*100+0+60+10;
    greyRook1Base.y2 = 800+10;
    greyRook2Rectangle1.posX = 7*100;
    greyRook2Rectangle1.posY = 7*100;
    greyRook2Rectangle1.x1 = 7*100+0+40+10;
    greyRook2Rectangle1.y1 = 730+10;
    greyRook2Rectangle1.x2 = 7*100+0+45+10;
    greyRook2Rectangle1.y2 = 750+10;
    greyRook2Rectangle2.x1 = 7*100+0+55+10;
    greyRook2Rectangle2.y1 = 730+10;
    greyRook2Rectangle2.x2 = 7*100+0+60+10;
    greyRook2Rectangle2.y2 = 750+10;
    greyRook2Ellipse.x1 = 7*100+0+40+10;
    greyRook2Ellipse.y1 = 750+10;
    greyRook2Ellipse.x2 = 7*100+0+60+10;
    greyRook2Ellipse.y2 = 770+10;
    greyRook2Base.x1 = 7*100+0+40+10;
    greyRook2Base.y1 = 770+10;
    greyRook2Base.x2 = 7*100+0+60+10;
    greyRook2Base.y2 = 800+10;
    greyKnight2Rectangle1.posX = 1*100;
    greyKnight2Rectangle1.posY = 7*100;
    greyKnight2Rectangle1.x1 = 1*100+0+40+10;
    greyKnight2Rectangle1.y1 = 710+10;
    greyKnight2Rectangle1.x2 = 1*100+0+60+10;
    greyKnight2Rectangle1.y2 = 730+10;
    greyKnight2Rectangle2.x1 = 1*100+0+50+10;
    greyKnight2Rectangle2.y1 = 730+10;
    greyKnight2Rectangle2.x2 = 1*100+0+60+10;
    greyKnight2Rectangle2.y2 = 750+10;
    greyKnight2Ellipse.x1 = 1*100+0+40+10;
    greyKnight2Ellipse.y1 = 750+10;
    greyKnight2Ellipse.x2 = 1*100+0+60+10;
    greyKnight2Ellipse.y2 = 770+10;
    greyKnight2Base.x1 = 1*100+0+40+10;
    greyKnight2Base.y1 = 770+10;
    greyKnight2Base.x2 = 1*100+0+60+10;
    greyKnight2Base.y2 = 800+10;
    greyKnight1Rectangle1.posX = 6*100;
    greyKnight1Rectangle1.posY = 7*100;
    greyKnight1Rectangle1.x1 = 6*100+0+40+10;
    greyKnight1Rectangle1.y1 = 710+10;
    greyKnight1Rectangle1.x2 = 6*100+0+60+10;
    greyKnight1Rectangle1.y2 = 730+10;
    greyKnight1Rectangle2.x1 = 6*100+0+50+10;
    greyKnight1Rectangle2.y1 = 730+10;
    greyKnight1Rectangle2.x2 = 6*100+0+60+10;
    greyKnight1Rectangle2.y2 = 750+10;
    greyKnight1Ellipse.x1 = 6*100+0+40+10;
    greyKnight1Ellipse.y1 = 750+10;
    greyKnight1Ellipse.x2 = 6*100+0+60+10;
    greyKnight1Ellipse.y2 = 770+10;
    greyKnight1Base.x1 = 6*100+0+40+10;
    greyKnight1Base.y1 = 770+10;
    greyKnight1Base.x2 = 6*100+0+60+10;
    greyKnight1Base.y2 = 800+10;
    redKnight2Rectangle1.posX = 1*100;
    redKnight2Rectangle1.posY = 0*100;
    redKnight2Rectangle1.x1 = 1*100+0+40+10;
    redKnight2Rectangle1.y1 = 10+10;
    redKnight2Rectangle1.x2 = 1*100+0+60+10;
    redKnight2Rectangle1.y2 = 30+10;
    redKnight2Rectangle2.x1 = 1*100+0+50+10;
    redKnight2Rectangle2.y1 = 30+10;
    redKnight2Rectangle2.x2 = 1*100+0+60+10;
    redKnight2Rectangle2.y2 = 50+10;
    redKnight2Ellipse.x1 = 1*100+0+40+10;
    redKnight2Ellipse.y1 = 50+10;
    redKnight2Ellipse.x2 = 1*100+0+60+10;
    redKnight2Ellipse.y2 = 70+10;
    redKnight2Base.x1 = 1*100+0+40+10;
    redKnight2Base.y1 = 70+10;
    redKnight2Base.x2 = 1*100+0+60+10;
    redKnight2Base.y2 = 100+10;
    redKnight1Rectangle1.posX = 6*100;
    redKnight1Rectangle1.posY = 0*100;
    redKnight1Rectangle1.x1 = 6*100+0+40+10;
    redKnight1Rectangle1.y1 = 10+10;
    redKnight1Rectangle1.x2 = 6*100+0+60+10;
    redKnight1Rectangle1.y2 = 30+10;
    redKnight1Rectangle2.x1 = 6*100+0+50+10;
    redKnight1Rectangle2.y1 = 30+10;
    redKnight1Rectangle2.x2 = 6*100+0+60+10;
    redKnight1Rectangle2.y2 = 50+10;
    redKnight1Ellipse.x1 = 6*100+0+40+10;
    redKnight1Ellipse.y1 = 50+10;
    redKnight1Ellipse.x2 = 6*100+0+60+10;
    redKnight1Ellipse.y2 = 70+10;
    redKnight1Base.x1 = 6*100+0+40+10;
    redKnight1Base.y1 = 70+10;
    redKnight1Base.x2 = 6*100+0+60+10;
    redKnight1Base.y2 = 100+10;
    redQueenSquare.posX = 3*100;
    redQueenSquare.posY = 0*100;
    redQueenSquare.x1 = 3*100+0+20+10-5+3+10;
    redQueenSquare.y1 = 30+10;
    redQueenSquare.x2 = 3*100+0+40+20+10-5+3+10;
    redQueenSquare.y2 = 50+10;
    redQueenRectangle1.x1 = 3*100+0+35-5-5+3+10;
    redQueenRectangle1.y1 = 15+10;
    redQueenRectangle1.x2 = 3*100+0+40+5-5-5+3+10;
    redQueenRectangle1.y2 = 50+10;
    redQueenRectangle2.x1 = 3*100+0+35+13-5+3+10;
    redQueenRectangle2.y1 = 15+10;
    redQueenRectangle2.x2 = 3*100+0+40+5+13-5+3+10;
    redQueenRectangle2.y2 = 50+10;
    redQueenRectangle3.x1 = 3*100+0+35+30-5+3+10;
    redQueenRectangle3.y1 = 15+10;
    redQueenRectangle3.x2 = 3*100+0+40+5+30-5+3+10;
    redQueenRectangle3.y2 = 50+10;
    redQueenEllipse.x1 = 3*100+0+30+10+10;
    redQueenEllipse.y1 = 50+10;
    redQueenEllipse.x2 = 3*100+0+30+20+10+10;
    redQueenEllipse.y2 = 70+10;
    redQueenBase.x1 = 3*100+0+30+10+10;
    redQueenBase.y1 = 70+10;
    redQueenBase.x2 = 3*100+0+30+20+10+10;
    redQueenBase.y2 = 100+10;
    for(int p=0; p<8; p++) {
        redQueenSquareK[p].posX = 1200;
        redQueenSquareK[p].x1 = -1000;
        redQueenSquareK[p].x2 = -1000;
        redQueenRectangle1K[p].x1 = -1000;
        redQueenRectangle1K[p].x2 = -1000;
        redQueenRectangle2K[p].x1 = -1000;
        redQueenRectangle2K[p].x2 = -1000;
        redQueenRectangle3K[p].x1 = -1000;
        redQueenRectangle3K[p].x2 = -1000;
        redQueenEllipseK[p].x1 = -1000;
        redQueenEllipseK[p].x2 = -1000;
        redQueenBaseK[p].x1 = -1000;
        redQueenBaseK[p].x2 = -1000;
    }
    for(int p=0; p<8; p++) {
        greyQueenSquareK[p].posX = 1200;
        greyQueenSquareK[p].x1 = -1000;
        greyQueenSquareK[p].x2 = -1000;
        greyQueenRectangle1K[p].x1 = -1000;
        greyQueenRectangle1K[p].x2 = -1000;
        greyQueenRectangle2K[p].x1 = -1000;
        greyQueenRectangle2K[p].x2 = -1000;
        greyQueenRectangle3K[p].x1 = -1000;
        greyQueenRectangle3K[p].x2 = -1000;
        greyQueenEllipseK[p].x1 = -1000;
        greyQueenEllipseK[p].x2 = -1000;
        greyQueenBaseK[p].x1 = -1000;
        greyQueenBaseK[p].x2 = -1000;
    }
    redBishop1Square.posX = 2*100;
    redBishop1Square.posY = 0*100;
    redBishop1Square.x1 = 2*100+0+20+10-5+3+5+10;
    redBishop1Square.y1 = 25+10;
    redBishop1Square.x2 = 2*100+0+40+20+10-5+3+10;
    redBishop1Square.y2 = 35+10;
    redBishop1Rectangle.x1 = 2*100+0+35+13-5+3+10;
    redBishop1Rectangle.y1 = 15+10;
    redBishop1Rectangle.x2 = 2*100+0+40+5+13-5+3+10;
    redBishop1Rectangle.y2 = 50+10;
    redBishop1Ellipse.x1 = 2*100+0+30+10+10;
    redBishop1Ellipse.y1 = 50+10;
    redBishop1Ellipse.x2 = 2*100+0+30+20+10+10;
    redBishop1Ellipse.y2 = 70+10;
    redBishop1Base.x1 = 2*100+0+30+10+10;
    redBishop1Base.y1 = 70+10;
    redBishop1Base.x2 = 2*100+0+30+20+10+10;
    redBishop1Base.y2 = 100+10;
    redBishop2Square.posX = 5*100;
    redBishop2Square.posY = 0*100;
    redBishop2Square.x1 = 5*100+0+20+10-5+3+5+10;
    redBishop2Square.y1 = 25+10;
    redBishop2Square.x2 = 5*100+0+40+20+10-5+3+10;
    redBishop2Square.y2 = 35+10;
    redBishop2Rectangle.x1 = 5*100+0+35+13-5+3+10;
    redBishop2Rectangle.y1 = 15+10;
    redBishop2Rectangle.x2 = 5*100+0+40+5+13-5+3+10;
    redBishop2Rectangle.y2 = 50+10;
    redBishop2Ellipse.x1 = 5*100+0+30+10+10;
    redBishop2Ellipse.y1 = 50+10;
    redBishop2Ellipse.x2 = 5*100+0+30+20+10+10;
    redBishop2Ellipse.y2 = 70+10;
    redBishop2Base.x1 = 5*100+0+30+10+10;
    redBishop2Base.y1 = 70+10;
    redBishop2Base.x2 = 5*100+0+30+20+10+10;
    redBishop2Base.y2 = 100+10;
    redKingSquare.posX = 4*100;
    redKingSquare.posY = 0*100;
    redKingSquare.x1 = 4*100+0+20+10+10;
    redKingSquare.y1 = 30+10;
    redKingSquare.x2 = 4*100+0+40+20+10+10;
    redKingSquare.y2 = 50+10;
    redKingRectangle.x1 = 4*100+0+35+10+10;
    redKingRectangle.y1 = 15+10;
    redKingRectangle.x2 = 4*100+0+40+5+10+10;
    redKingRectangle.y2 = 50+10;
    redKingEllipse.x1 = 4*100+0+30+10+10;
    redKingEllipse.y1 = 50+10;
    redKingEllipse.x2 = 4*100+0+30+20+10+10;
    redKingEllipse.y2 = 70+10;
    redKingBase.x1 = 4*100+0+30+10+10;
    redKingBase.y1 = 70+10;
    redKingBase.x2 = 4*100+0+30+20+10+10;
    redKingBase.y2 = 100+10;
    for(int i=0; i<8; i++) {
        greyPawnsBase[i].posX = i*100;
        greyPawnsBase[i].posY = 600;
        greyPawnsBase[i].x1 = i*100+0+40+10;
        greyPawnsBase[i].y1 = 660;
        greyPawnsBase[i].x2 = i*100+0+40+20+10;
        greyPawnsBase[i].y2 = 660+20;

        greyPawnsEllipse[i].x1 = i*100+0+40+10;
        greyPawnsEllipse[i].y1 = 640;
        greyPawnsEllipse[i].x2 = i*100+0+40+20+10;
        greyPawnsEllipse[i].y2 = 640+20;
    }
    for(int i=0; i<8; i++) {
        redPawnsBase[i].posX = i*100;
        redPawnsBase[i].posY = 100;
        redPawnsBase[i].x1 = i*100+0+40+10;
        redPawnsBase[i].y1 = 160;
        redPawnsBase[i].x2 = i*100+0+40+20+10;
        redPawnsBase[i].y2 = 160+20;

        redPawnsEllipse[i].x1 = i*100+0+40+10;
        redPawnsEllipse[i].y1 = 140;
        redPawnsEllipse[i].x2 = i*100+0+40+20+10;
        redPawnsEllipse[i].y2 = 140+20;
    }
    for(int i=0; i<8; i++) {
        redPawnsBase[i].firstTimeMove = TRUE;
    }

    for(int i=0; i<8; i++) {
        greyPawnsBase[i].firstTimeMove = TRUE;
    }

    for(int j=0; j<8; j++) {
        for(int i=0; i<8; i++) {
            boxes[j][i].posX = i*100;
            boxes[j][i].posY = j*100;
            boxes[j][i].clear = TRUE;
        }
    }
    turn = 'h';
}

boolean checkQueenCheckRed(int j, int i) {

    int a1 = greyQueenSquare.posY;
    int a0 = greyQueenSquare.posX;

    int a2 = greyQueenSquare.x1;
    int a3 = greyQueenSquare.x2;

    int a4 = greyQueenRectangle1.x1;
    int a5 = greyQueenRectangle1.x2;

    int a6 = greyQueenEllipse.x1;
    int a7 = greyQueenEllipse.x2;

    int a8 = greyQueenBase.x1;
    int a9 = greyQueenBase.x2;

    int a10 = greyQueenSquare.y1;
    int a11 = greyQueenSquare.y2;

    int a12 = greyQueenRectangle1.y1;
    int a13 = greyQueenRectangle1.y2;

    int a14 = greyQueenEllipse.y1;
    int a15 = greyQueenEllipse.y2;

    int a16 = greyQueenBase.y1;
    int a17 = greyQueenBase.y2;

    int a18 = greyQueenRectangle2.x1;
    int a19 = greyQueenRectangle2.x2;

    int a20 = greyQueenRectangle3.x1;
    int a21 = greyQueenRectangle3.x2;

    int a22 = greyQueenRectangle2.y1;
    int a23 = greyQueenRectangle2.y2;

    int a24 = greyQueenRectangle3.y1;
    int a25 = greyQueenRectangle3.y2;

    boolean f = FALSE;

    greyQueenSquare.failedpath = FALSE;

    if(redKingSquare.posX == greyQueenSquare.posX) {
        f = moveGreyQueen(0, j, i, redKingSquare.posY - greyQueenSquare.posY, redKingSquare.posY - greyQueenSquare.posY);
        f = greyQueenSquare.failedpath;
    } else if(redKingSquare.posY == greyQueenSquare.posY) {
        f = moveGreyQueenSide(0, j, i, redKingSquare.posX - greyQueenSquare.posX, redKingSquare.posX - greyQueenSquare.posX);
        f = greyQueenSquare.failedpath;
    } else if(redKingSquare.posX != greyQueenSquare.posX &&
       redKingSquare.posY != greyQueenSquare.posY) {
        if(redKingSquare.posY - greyQueenSquare.posY == redKingSquare.posX - greyQueenSquare.posX ||
           redKingSquare.posY - greyQueenSquare.posY == -1 * (redKingSquare.posX - greyQueenSquare.posX)) {
            f = moveGreyQueenDiagonally(0, j, i, redKingSquare.posY - greyQueenSquare.posY, redKingSquare.posX - greyQueenSquare.posX, redKingSquare.posY - greyQueenSquare.posY, redKingSquare.posX - greyQueenSquare.posX);
            f = greyQueenSquare.failedpath;
        } else {
            f = greyQueenSquare.failedpath = TRUE;
        }
    } else {
        f = greyQueenSquare.failedpath = TRUE;
    }

    greyQueenSquare.posY = a1;
    greyQueenSquare.posX = a0;

    greyQueenSquare.x1 = a2;
    greyQueenSquare.x2 = a3;

    greyQueenRectangle1.x1 = a4;
    greyQueenRectangle1.x2 = a5;

    greyQueenEllipse.x1 = a6;
    greyQueenEllipse.x2 = a7;

    greyQueenBase.x1 = a8;
    greyQueenBase.x2 = a9;

    greyQueenSquare.y1 = a10;
    greyQueenSquare.y2 = a11;

    greyQueenRectangle1.y1 = a12;
    greyQueenRectangle1.y2 = a13;

    greyQueenEllipse.y1 = a14;
    greyQueenEllipse.y2 = a15;

    greyQueenBase.y1 = a16;
    greyQueenBase.y2 = a17;
    
    greyQueenRectangle2.x1 = a18;
    greyQueenRectangle2.x2 = a19;

    greyQueenRectangle3.x1 = a20;
    greyQueenRectangle3.x2 = a21;

    greyQueenRectangle2.y1 = a22;
    greyQueenRectangle2.y2 = a23;

    greyQueenRectangle3.y1 = a24;
    greyQueenRectangle3.y2 = a25;

    if(!f) {
        greyQueenSquare.failedpath = FALSE;
        TextOut (hdc,
                 greyQueenSquare.posX,
                 greyQueenSquare.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    
    greyQueenSquare.failedpath = FALSE;
    return FALSE;
}

boolean checkRookCheckGrey(int j, int i) {

    int a1 = redRook1Rectangle1.posY;
    int a0 = redRook1Rectangle1.posX;

    int a4 = redRook1Rectangle1.x1;
    int a5 = redRook1Rectangle1.x2;

    int a6 = redRook1Ellipse.x1;
    int a7 = redRook1Ellipse.x2;

    int a8 = redRook1Base.x1;
    int a9 = redRook1Base.x2;

    int a12 = redRook1Rectangle1.y1;
    int a13 = redRook1Rectangle1.y2;

    int a14 = redRook1Ellipse.y1;
    int a15 = redRook1Ellipse.y2;

    int a16 = redRook1Base.y1;
    int a17 = redRook1Base.y2;

    int a18 = redRook1Rectangle2.x1;
    int a19 = redRook1Rectangle2.x2;

    int a22 = redRook1Rectangle2.y1;
    int a23 = redRook1Rectangle2.y2;

    boolean f = FALSE;

    redRook1Rectangle1.failedpath = FALSE;

    if(greyKingSquare.posX == redRook1Rectangle1.posX) {
        f = moveRedRook1(0, j, i, greyKingSquare.posY - redRook1Rectangle1.posY, greyKingSquare.posY - redRook1Rectangle1.posY);
        f = redRook1Rectangle1.failedpath;
    } else if(greyKingSquare.posY == redRook1Rectangle1.posY) {
        f = moveRedRook1Side(0, j, i, greyKingSquare.posX - redRook1Rectangle1.posX, greyKingSquare.posX - redRook1Rectangle1.posX);
        f = redRook1Rectangle1.failedpath;
    } else {
        f = redRook1Rectangle1.failedpath = TRUE;
    }

    redRook1Rectangle1.posY = a1;
    redRook1Rectangle1.posX = a0;

    redRook1Rectangle1.x1 = a4;
    redRook1Rectangle1.x2 = a5;

    redRook1Ellipse.x1 = a6;
    redRook1Ellipse.x2 = a7;

    redRook1Base.x1 = a8;
    redRook1Base.x2 = a9;

    redRook1Rectangle1.y1 = a12;
    redRook1Rectangle1.y2 = a13;

    redRook1Ellipse.y1 = a14;
    redRook1Ellipse.y2 = a15;

    redRook1Base.y1 = a16;
    redRook1Base.y2 = a17;
    
    redRook1Rectangle2.x1 = a18;
    redRook1Rectangle2.x2 = a19;

    redRook1Rectangle2.y1 = a22;
    redRook1Rectangle2.y2 = a23;

    a1 = redRook2Rectangle1.posY;
    a0 = redRook2Rectangle1.posX;

    a4 = redRook2Rectangle1.x1;
    a5 = redRook2Rectangle1.x2;

    a6 = redRook2Ellipse.x1;
    a7 = redRook2Ellipse.x2;

    a8 = redRook2Base.x1;
    a9 = redRook2Base.x2;

    a12 = redRook2Rectangle1.y1;
    a13 = redRook2Rectangle1.y2;

    a14 = redRook2Ellipse.y1;
    a15 = redRook2Ellipse.y2;

    a16 = redRook2Base.y1;
    a17 = redRook2Base.y2;

    a18 = redRook2Rectangle2.x1;
    a19 = redRook2Rectangle2.x2;

    a22 = redRook2Rectangle2.y1;
    a23 = redRook2Rectangle2.y2;

    boolean f2 = FALSE;

    redRook2Rectangle1.failedpath = FALSE;

    if(greyKingSquare.posX == redRook2Rectangle1.posX) {
        f2 = moveRedRook2(0, j, i, greyKingSquare.posY - redRook2Rectangle1.posY, greyKingSquare.posY - redRook2Rectangle1.posY);
        f2 = redRook2Rectangle1.failedpath;
    } else if(greyKingSquare.posY == redRook2Rectangle1.posY) {
        f2 = moveRedRook2Side(0, j, i, greyKingSquare.posX - redRook2Rectangle1.posX, greyKingSquare.posX - redRook2Rectangle1.posX);
        f2 = redRook2Rectangle1.failedpath;
    } else {
        f2 = redRook2Rectangle1.failedpath = TRUE;
    }

    redRook2Rectangle1.posY = a1;
    redRook2Rectangle1.posX = a0;

    redRook2Rectangle1.x1 = a4;
    redRook2Rectangle1.x2 = a5;

    redRook2Ellipse.x1 = a6;
    redRook2Ellipse.x2 = a7;

    redRook2Base.x1 = a8;
    redRook2Base.x2 = a9;

    redRook2Rectangle1.y1 = a12;
    redRook2Rectangle1.y2 = a13;

    redRook2Ellipse.y1 = a14;
    redRook2Ellipse.y2 = a15;

    redRook2Base.y1 = a16;
    redRook2Base.y2 = a17;
    
    redRook2Rectangle2.x1 = a18;
    redRook2Rectangle2.x2 = a19;

    redRook2Rectangle2.y1 = a22;
    redRook2Rectangle2.y2 = a23;

    if(!f || !f2) {
        redRook1Rectangle1.failedpath = FALSE;
        redRook2Rectangle1.failedpath = FALSE;
        if(!f)
        TextOut (hdc,
                 redRook1Rectangle1.posX,
                 redRook1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));

        if(!f2)
        TextOut (hdc,
                 redRook2Rectangle1.posX,
                 redRook2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    
    redRook1Rectangle1.failedpath = FALSE;
    redRook2Rectangle1.failedpath = FALSE;
    return FALSE;
}

boolean checkRookCheckRed(int j, int i) {

    int a1 = greyRook1Rectangle1.posY;
    int a0 = greyRook1Rectangle1.posX;

    int a4 = greyRook1Rectangle1.x1;
    int a5 = greyRook1Rectangle1.x2;

    int a6 = greyRook1Ellipse.x1;
    int a7 = greyRook1Ellipse.x2;

    int a8 = greyRook1Base.x1;
    int a9 = greyRook1Base.x2;

    int a12 = greyRook1Rectangle1.y1;
    int a13 = greyRook1Rectangle1.y2;

    int a14 = greyRook1Ellipse.y1;
    int a15 = greyRook1Ellipse.y2;

    int a16 = greyRook1Base.y1;
    int a17 = greyRook1Base.y2;

    int a18 = greyRook1Rectangle2.x1;
    int a19 = greyRook1Rectangle2.x2;

    int a22 = greyRook1Rectangle2.y1;
    int a23 = greyRook1Rectangle2.y2;

    boolean f = FALSE;

    greyRook1Rectangle1.failedpath = FALSE;

    if(redKingSquare.posX == greyRook1Rectangle1.posX) {
        f = moveGreyRook1(0, j, i, redKingSquare.posY - greyRook1Rectangle1.posY, redKingSquare.posY - greyRook1Rectangle1.posY);
        f = greyRook1Rectangle1.failedpath;
    } else if(redKingSquare.posY == greyRook1Rectangle1.posY) {
        f = moveGreyRook1Side(0, j, i, redKingSquare.posX - greyRook1Rectangle1.posX, redKingSquare.posX - greyRook1Rectangle1.posX);
        f = greyRook1Rectangle1.failedpath;
    } else {
        f = greyRook1Rectangle1.failedpath = TRUE;
    }

    greyRook1Rectangle1.posY = a1;
    greyRook1Rectangle1.posX = a0;

    greyRook1Rectangle1.x1 = a4;
    greyRook1Rectangle1.x2 = a5;

    greyRook1Ellipse.x1 = a6;
    greyRook1Ellipse.x2 = a7;

    greyRook1Base.x1 = a8;
    greyRook1Base.x2 = a9;

    greyRook1Rectangle1.y1 = a12;
    greyRook1Rectangle1.y2 = a13;

    greyRook1Ellipse.y1 = a14;
    greyRook1Ellipse.y2 = a15;

    greyRook1Base.y1 = a16;
    greyRook1Base.y2 = a17;
    
    greyRook1Rectangle2.x1 = a18;
    greyRook1Rectangle2.x2 = a19;

    greyRook1Rectangle2.y1 = a22;
    greyRook1Rectangle2.y2 = a23;

    a1 = greyRook2Rectangle1.posY;
    a0 = greyRook2Rectangle1.posX;

    a4 = greyRook2Rectangle1.x1;
    a5 = greyRook2Rectangle1.x2;

    a6 = greyRook2Ellipse.x1;
    a7 = greyRook2Ellipse.x2;

    a8 = greyRook2Base.x1;
    a9 = greyRook2Base.x2;

    a12 = greyRook2Rectangle1.y1;
    a13 = greyRook2Rectangle1.y2;

    a14 = greyRook2Ellipse.y1;
    a15 = greyRook2Ellipse.y2;

    a16 = greyRook2Base.y1;
    a17 = greyRook2Base.y2;

    a18 = greyRook2Rectangle2.x1;
    a19 = greyRook2Rectangle2.x2;

    a22 = greyRook2Rectangle2.y1;
    a23 = greyRook2Rectangle2.y2;

    boolean f2 = FALSE;

    greyRook2Rectangle1.failedpath = FALSE;

    if(redKingSquare.posX == greyRook2Rectangle1.posX) {
        f2 = moveGreyRook2(0, j, i, redKingSquare.posY - greyRook2Rectangle1.posY, redKingSquare.posY - greyRook2Rectangle1.posY);
        f2 = greyRook2Rectangle1.failedpath;
    } else if(redKingSquare.posY == greyRook2Rectangle1.posY) {
        f2 = moveGreyRook2Side(0, j, i, redKingSquare.posX - greyRook2Rectangle1.posX, redKingSquare.posX - greyRook2Rectangle1.posX);
        f2 = greyRook2Rectangle1.failedpath;
    } else {
        f2 = greyRook2Rectangle1.failedpath = TRUE;
    }

    greyRook2Rectangle1.posY = a1;
    greyRook2Rectangle1.posX = a0;

    greyRook2Rectangle1.x1 = a4;
    greyRook2Rectangle1.x2 = a5;

    greyRook2Ellipse.x1 = a6;
    greyRook2Ellipse.x2 = a7;

    greyRook2Base.x1 = a8;
    greyRook2Base.x2 = a9;

    greyRook2Rectangle1.y1 = a12;
    greyRook2Rectangle1.y2 = a13;

    greyRook2Ellipse.y1 = a14;
    greyRook2Ellipse.y2 = a15;

    greyRook2Base.y1 = a16;
    greyRook2Base.y2 = a17;
    
    greyRook2Rectangle2.x1 = a18;
    greyRook2Rectangle2.x2 = a19;

    greyRook2Rectangle2.y1 = a22;
    greyRook2Rectangle2.y2 = a23;

    if(!f || !f2) {
        greyRook1Rectangle1.failedpath = FALSE;
        greyRook2Rectangle1.failedpath = FALSE;
        if(!f)
        TextOut (hdc,
                 greyRook1Rectangle1.posX,
                 greyRook1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));

        if(!f2)
        TextOut (hdc,
                 greyRook2Rectangle1.posX,
                 greyRook2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    
    greyRook1Rectangle1.failedpath = FALSE;
    greyRook2Rectangle1.failedpath = FALSE;
    return FALSE;
}

boolean checkQueenCheckGrey(int j, int i) {

    int a1 = redQueenSquare.posY;
    int a0 = redQueenSquare.posX;

    int a2 = redQueenSquare.x1;
    int a3 = redQueenSquare.x2;

    int a4 = redQueenRectangle1.x1;
    int a5 = redQueenRectangle1.x2;

    int a6 = redQueenEllipse.x1;
    int a7 = redQueenEllipse.x2;

    int a8 = redQueenBase.x1;
    int a9 = redQueenBase.x2;

    int a10 = redQueenSquare.y1;
    int a11 = redQueenSquare.y2;

    int a12 = redQueenRectangle1.y1;
    int a13 = redQueenRectangle1.y2;

    int a14 = redQueenEllipse.y1;
    int a15 = redQueenEllipse.y2;

    int a16 = redQueenBase.y1;
    int a17 = redQueenBase.y2;

    int a18 = redQueenRectangle2.x1;
    int a19 = redQueenRectangle2.x2;

    int a20 = redQueenRectangle3.x1;
    int a21 = redQueenRectangle3.x2;

    int a22 = redQueenRectangle2.y1;
    int a23 = redQueenRectangle2.y2;

    int a24 = redQueenRectangle3.y1;
    int a25 = redQueenRectangle3.y2;

    boolean f = FALSE;

    redQueenSquare.failedpath = FALSE;

    if(greyKingSquare.posX == redQueenSquare.posX) {
        f = moveRedQueen(0, j, i, greyKingSquare.posY - redQueenSquare.posY, greyKingSquare.posY - redQueenSquare.posY);
        f = redQueenSquare.failedpath;
        if(greyKingSquare.posY - redQueenSquare.posY == 0) {
            f = redQueenSquare.failedpath = TRUE;
        }
    } else if(greyKingSquare.posY == redQueenSquare.posY) {
        f = moveRedQueenSide(0, j, i, greyKingSquare.posX - redQueenSquare.posX, greyKingSquare.posX - redQueenSquare.posX);
        f = redQueenSquare.failedpath;
    } else if(greyKingSquare.posX != redQueenSquare.posX &&
       greyKingSquare.posY != redQueenSquare.posY) {
        if(greyKingSquare.posY - redQueenSquare.posY == greyKingSquare.posX - redQueenSquare.posX ||
           greyKingSquare.posY - redQueenSquare.posY == -1 * (greyKingSquare.posX - redQueenSquare.posX)) {
            f = moveRedQueenDiagonally(0, j, i, greyKingSquare.posY - redQueenSquare.posY, greyKingSquare.posX - redQueenSquare.posX, greyKingSquare.posY - redQueenSquare.posY, greyKingSquare.posX - redQueenSquare.posX);
            f = redQueenSquare.failedpath;
        } else {
            f = redQueenSquare.failedpath = TRUE;
        }
    } else {
        f = redQueenSquare.failedpath = TRUE;
    }

    redQueenSquare.posY = a1;
    redQueenSquare.posX = a0;

    redQueenSquare.x1 = a2;
    redQueenSquare.x2 = a3;

    redQueenRectangle1.x1 = a4;
    redQueenRectangle1.x2 = a5;

    redQueenEllipse.x1 = a6;
    redQueenEllipse.x2 = a7;

    redQueenBase.x1 = a8;
    redQueenBase.x2 = a9;

    redQueenSquare.y1 = a10;
    redQueenSquare.y2 = a11;

    redQueenRectangle1.y1 = a12;
    redQueenRectangle1.y2 = a13;

    redQueenEllipse.y1 = a14;
    redQueenEllipse.y2 = a15;

    redQueenBase.y1 = a16;
    redQueenBase.y2 = a17;
    
    redQueenRectangle2.x1 = a18;
    redQueenRectangle2.x2 = a19;

    redQueenRectangle3.x1 = a20;
    redQueenRectangle3.x2 = a21;

    redQueenRectangle2.y1 = a22;
    redQueenRectangle2.y2 = a23;

    redQueenRectangle3.y1 = a24;
    redQueenRectangle3.y2 = a25;

    if(!f) {
        redQueenSquare.failedpath = FALSE;
        TextOut (hdc,
                 redQueenSquare.posX,
                 redQueenSquare.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    
    redQueenSquare.failedpath = FALSE;
    return FALSE;
}

boolean checkQueenCheckGreyK(int j, int i) {

    for(int z=0; z<8; z++) {
        int a1 = redQueenSquareK[z].posY;
        int a0 = redQueenSquareK[z].posX;

        int a2 = redQueenSquareK[z].x1;
        int a3 = redQueenSquareK[z].x2;

        int a4 = redQueenRectangle1K[z].x1;
        int a5 = redQueenRectangle1K[z].x2;

        int a6 = redQueenEllipseK[z].x1;
        int a7 = redQueenEllipseK[z].x2;

        int a8 = redQueenBaseK[z].x1;
        int a9 = redQueenBaseK[z].x2;

        int a10 = redQueenSquareK[z].y1;
        int a11 = redQueenSquareK[z].y2;

        int a12 = redQueenRectangle1K[z].y1;
        int a13 = redQueenRectangle1K[z].y2;

        int a14 = redQueenEllipseK[z].y1;
        int a15 = redQueenEllipseK[z].y2;

        int a16 = redQueenBaseK[z].y1;
        int a17 = redQueenBaseK[z].y2;

        int a18 = redQueenRectangle2K[z].x1;
        int a19 = redQueenRectangle2K[z].x2;

        int a20 = redQueenRectangle3K[z].x1;
        int a21 = redQueenRectangle3K[z].x2;

        int a22 = redQueenRectangle2K[z].y1;
        int a23 = redQueenRectangle2K[z].y2;

        int a24 = redQueenRectangle3K[z].y1;
        int a25 = redQueenRectangle3K[z].y2;

        if(redQueenSquareK[z].posX > 700)
            continue;

        boolean f = FALSE;

        redQueenSquareK[z].failedpath = FALSE;

        if(greyKingSquare.posX == redQueenSquareK[z].posX) {
            f = moveRedQueenK(0, j, i, greyKingSquare.posY - redQueenSquareK[z].posY, greyKingSquare.posY - redQueenSquareK[z].posY, z);
            f = redQueenSquareK[z].failedpath;
        } else if(greyKingSquare.posY == redQueenSquareK[z].posY) {
            f = moveRedQueenSideK(0, j, i, greyKingSquare.posX - redQueenSquareK[z].posX, greyKingSquare.posX - redQueenSquareK[z].posX, z);
            f = redQueenSquareK[z].failedpath;
        } else if(greyKingSquare.posX != redQueenSquareK[z].posX &&
           greyKingSquare.posY != redQueenSquareK[z].posY) {
            if(greyKingSquare.posY - redQueenSquareK[z].posY == greyKingSquare.posX - redQueenSquareK[z].posX ||
               greyKingSquare.posY - redQueenSquareK[z].posY == -1 * (greyKingSquare.posX - redQueenSquareK[z].posX)) {
                f = moveRedQueenDiagonallyK(0, j, i, greyKingSquare.posY - redQueenSquareK[z].posY, greyKingSquare.posX - redQueenSquareK[z].posX, greyKingSquare.posY - redQueenSquareK[z].posY, greyKingSquare.posX - redQueenSquareK[z].posX, z);
                f = redQueenSquareK[z].failedpath;
            } else {
                f = redQueenSquareK[z].failedpath = TRUE;
            }
        } else {
            f = redQueenSquareK[z].failedpath = TRUE;
        }

        redQueenSquareK[z].posY = a1;
        redQueenSquareK[z].posX = a0;

        redQueenSquareK[z].x1 = a2;
        redQueenSquareK[z].x2 = a3;

        redQueenRectangle1K[z].x1 = a4;
        redQueenRectangle1K[z].x2 = a5;

        redQueenEllipseK[z].x1 = a6;
        redQueenEllipseK[z].x2 = a7;

        redQueenBaseK[z].x1 = a8;
        redQueenBaseK[z].x2 = a9;

        redQueenSquareK[z].y1 = a10;
        redQueenSquareK[z].y2 = a11;

        redQueenRectangle1K[z].y1 = a12;
        redQueenRectangle1K[z].y2 = a13;

        redQueenEllipseK[z].y1 = a14;
        redQueenEllipseK[z].y2 = a15;

        redQueenBaseK[z].y1 = a16;
        redQueenBaseK[z].y2 = a17;

        redQueenRectangle2K[z].x1 = a18;
        redQueenRectangle2K[z].x2 = a19;

        redQueenRectangle3K[z].x1 = a20;
        redQueenRectangle3K[z].x2 = a21;

        redQueenRectangle2K[z].y1 = a22;
        redQueenRectangle2K[z].y2 = a23;

        redQueenRectangle3K[z].y1 = a24;
        redQueenRectangle3K[z].y2 = a25;

        if(!f) {
            redQueenSquareK[z].failedpath = FALSE;
            TextOut (hdc,
                     redQueenSquareK[z].posX,
                     redQueenSquareK[z].posY,
                     TextArray [0],
                     GetTextSize (TextArray [0]));
            return TRUE;
        }

        redQueenSquareK[z].failedpath = FALSE;
    }

    return FALSE;
}

boolean checkQueenCheckRedK(int j, int i) {

    for(int z=0; z<8; z++) {
        int a1 = greyQueenSquareK[z].posY;
        int a0 = greyQueenSquareK[z].posX;

        int a2 = greyQueenSquareK[z].x1;
        int a3 = greyQueenSquareK[z].x2;

        int a4 = greyQueenRectangle1K[z].x1;
        int a5 = greyQueenRectangle1K[z].x2;

        int a6 = greyQueenEllipseK[z].x1;
        int a7 = greyQueenEllipseK[z].x2;

        int a8 = greyQueenBaseK[z].x1;
        int a9 = greyQueenBaseK[z].x2;

        int a10 = greyQueenSquareK[z].y1;
        int a11 = greyQueenSquareK[z].y2;

        int a12 = greyQueenRectangle1K[z].y1;
        int a13 = greyQueenRectangle1K[z].y2;

        int a14 = greyQueenEllipseK[z].y1;
        int a15 = greyQueenEllipseK[z].y2;

        int a16 = greyQueenBaseK[z].y1;
        int a17 = greyQueenBaseK[z].y2;

        int a18 = greyQueenRectangle2K[z].x1;
        int a19 = greyQueenRectangle2K[z].x2;

        int a20 = greyQueenRectangle3K[z].x1;
        int a21 = greyQueenRectangle3K[z].x2;

        int a22 = greyQueenRectangle2K[z].y1;
        int a23 = greyQueenRectangle2K[z].y2;

        int a24 = greyQueenRectangle3K[z].y1;
        int a25 = greyQueenRectangle3K[z].y2;

        if(greyQueenSquareK[z].posX > 700)
            continue;
        
        boolean f = FALSE;

        greyQueenSquareK[z].failedpath = FALSE;

        if(redKingSquare.posX == greyQueenSquareK[z].posX) {
            f = moveGreyQueenK(0, j, i, redKingSquare.posY - greyQueenSquareK[z].posY, redKingSquare.posY - greyQueenSquareK[z].posY, z);
            f = greyQueenSquareK[z].failedpath;
        } else if(redKingSquare.posY == greyQueenSquareK[z].posY) {
            f = moveGreyQueenSideK(0, j, i, redKingSquare.posX - greyQueenSquareK[z].posX, redKingSquare.posX - greyQueenSquareK[z].posX, z);
            f = greyQueenSquareK[z].failedpath;
        } else if(redKingSquare.posX != greyQueenSquareK[z].posX &&
           redKingSquare.posY != greyQueenSquareK[z].posY) {
            if(redKingSquare.posY - greyQueenSquareK[z].posY == redKingSquare.posX - greyQueenSquareK[z].posX ||
               redKingSquare.posY - greyQueenSquareK[z].posY == -1 * (redKingSquare.posX - greyQueenSquareK[z].posX)) {
                f = moveGreyQueenDiagonallyK(0, j, i, redKingSquare.posY - greyQueenSquareK[z].posY, redKingSquare.posX - greyQueenSquareK[z].posX, redKingSquare.posY - greyQueenSquareK[z].posY, redKingSquare.posX - greyQueenSquareK[z].posX, z);
                f = greyQueenSquareK[z].failedpath;
            } else {
                f = greyQueenSquareK[z].failedpath = TRUE;
            }
        } else {
            f = greyQueenSquareK[z].failedpath = TRUE;
        }

        greyQueenSquareK[z].posY = a1;
        greyQueenSquareK[z].posX = a0;

        greyQueenSquareK[z].x1 = a2;
        greyQueenSquareK[z].x2 = a3;

        greyQueenRectangle1K[z].x1 = a4;
        greyQueenRectangle1K[z].x2 = a5;

        greyQueenEllipseK[z].x1 = a6;
        greyQueenEllipseK[z].x2 = a7;

        greyQueenBaseK[z].x1 = a8;
        greyQueenBaseK[z].x2 = a9;

        greyQueenSquareK[z].y1 = a10;
        greyQueenSquareK[z].y2 = a11;

        greyQueenRectangle1K[z].y1 = a12;
        greyQueenRectangle1K[z].y2 = a13;

        greyQueenEllipseK[z].y1 = a14;
        greyQueenEllipseK[z].y2 = a15;

        greyQueenBaseK[z].y1 = a16;
        greyQueenBaseK[z].y2 = a17;

        greyQueenRectangle2K[z].x1 = a18;
        greyQueenRectangle2K[z].x2 = a19;

        greyQueenRectangle3K[z].x1 = a20;
        greyQueenRectangle3K[z].x2 = a21;

        greyQueenRectangle2K[z].y1 = a22;
        greyQueenRectangle2K[z].y2 = a23;

        greyQueenRectangle3K[z].y1 = a24;
        greyQueenRectangle3K[z].y2 = a25;

        if(!f) {
            greyQueenSquareK[z].failedpath = FALSE;
            TextOut (hdc,
                     greyQueenSquareK[z].posX,
                     greyQueenSquareK[z].posY,
                     TextArray [0],
                     GetTextSize (TextArray [0]));
            return TRUE;
        }

        greyQueenSquareK[z].failedpath = FALSE;
    }

    return FALSE;
}

boolean checkBishopCheckRed(int j, int i) {

    int a1 = greyBishop1Square.posY;
    int a0 = greyBishop1Square.posX;

    int a2 = greyBishop1Square.x1;
    int a3 = greyBishop1Square.x2;

    int a4 = greyBishop1Rectangle.x1;
    int a5 = greyBishop1Rectangle.x2;

    int a6 = greyBishop1Ellipse.x1;
    int a7 = greyBishop1Ellipse.x2;

    int a8 = greyBishop1Base.x1;
    int a9 = greyBishop1Base.x2;

    int a10 = greyBishop1Square.y1;
    int a11 = greyBishop1Square.y2;

    int a12 = greyBishop1Rectangle.y1;
    int a13 = greyBishop1Rectangle.y2;

    int a14 = greyBishop1Ellipse.y1;
    int a15 = greyBishop1Ellipse.y2;

    int a16 = greyBishop1Base.y1;
    int a17 = greyBishop1Base.y2;

    boolean f = FALSE;

    greyBishop1Square.failedpath = FALSE;

    if(redKingSquare.posX != greyBishop1Square.posX &&
       redKingSquare.posY != greyBishop1Square.posY) {
        f = moveGreyBishop1(0, j, i, redKingSquare.posY - greyBishop1Square.posY, redKingSquare.posX - greyBishop1Square.posX, redKingSquare.posY - greyBishop1Square.posY, redKingSquare.posX - greyBishop1Square.posX);
        f = greyBishop1Square.failedpath;
    } else {
        f = greyBishop1Square.failedpath = TRUE;
    }

    greyBishop1Square.posY = a1;
    greyBishop1Square.posX = a0;

    greyBishop1Square.x1 = a2;
    greyBishop1Square.x2 = a3;

    greyBishop1Rectangle.x1 = a4;
    greyBishop1Rectangle.x2 = a5;

    greyBishop1Ellipse.x1 = a6;
    greyBishop1Ellipse.x2 = a7;

    greyBishop1Base.x1 = a8;
    greyBishop1Base.x2 = a9;

    greyBishop1Square.y1 = a10;
    greyBishop1Square.y2 = a11;

    greyBishop1Rectangle.y1 = a12;
    greyBishop1Rectangle.y2 = a13;

    greyBishop1Ellipse.y1 = a14;
    greyBishop1Ellipse.y2 = a15;

    greyBishop1Base.y1 = a16;
    greyBishop1Base.y2 = a17;
    
    a1 = greyBishop2Square.posY;
    a0 = greyBishop2Square.posX;

    a2 = greyBishop2Square.x1;
    a3 = greyBishop2Square.x2;

    a4 = greyBishop2Rectangle.x1;
    a5 = greyBishop2Rectangle.x2;

    a6 = greyBishop2Ellipse.x1;
    a7 = greyBishop2Ellipse.x2;

    a8 = greyBishop2Base.x1;
    a9 = greyBishop2Base.x2;

    a10 = greyBishop2Square.y1;
    a11 = greyBishop2Square.y2;

    a12 = greyBishop2Rectangle.y1;
    a13 = greyBishop2Rectangle.y2;

    a14 = greyBishop2Ellipse.y1;
    a15 = greyBishop2Ellipse.y2;

    a16 = greyBishop2Base.y1;
    a17 = greyBishop2Base.y2;

    boolean f2 = FALSE;
    
    greyBishop2Square.failedpath = FALSE;

    if(redKingSquare.posX != greyBishop2Square.posX &&
       redKingSquare.posY != greyBishop2Square.posY) {
        f2 = moveGreyBishop2(0, -666, i, redKingSquare.posY - greyBishop2Square.posY, redKingSquare.posX - greyBishop2Square.posX, redKingSquare.posY - greyBishop2Square.posY, redKingSquare.posX - greyBishop2Square.posX);
        f2 = greyBishop2Square.failedpath;
    } else {
        f2 = greyBishop2Square.failedpath = TRUE;
    }

    greyBishop2Square.posY = a1;
    greyBishop2Square.posX = a0;

    greyBishop2Square.x1 = a2;
    greyBishop2Square.x2 = a3;

    greyBishop2Rectangle.x1 = a4;
    greyBishop2Rectangle.x2 = a5;

    greyBishop2Ellipse.x1 = a6;
    greyBishop2Ellipse.x2 = a7;

    greyBishop2Base.x1 = a8;
    greyBishop2Base.x2 = a9;

    greyBishop2Square.y1 = a10;
    greyBishop2Square.y2 = a11;

    greyBishop2Rectangle.y1 = a12;
    greyBishop2Rectangle.y2 = a13;

    greyBishop2Ellipse.y1 = a14;
    greyBishop2Ellipse.y2 = a15;

    greyBishop2Base.y1 = a16;
    greyBishop2Base.y2 = a17;

    if(!f || !f2) {
        greyBishop1Square.failedpath = FALSE;
        greyBishop2Square.failedpath = FALSE;
        if(!f)
        TextOut (hdc,
                 greyBishop1Square.posX,
                 greyBishop1Square.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));

        if(!f2)
        TextOut (hdc,
                 greyBishop2Square.posX,
                 greyBishop2Square.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    
    greyBishop1Square.failedpath = FALSE;
    greyBishop2Square.failedpath = FALSE;
    return FALSE;
}

boolean checkBishopCheckGrey(int j, int i) {

    int a1 = redBishop1Square.posY;
    int a0 = redBishop1Square.posX;

    int a2 = redBishop1Square.x1;
    int a3 = redBishop1Square.x2;

    int a4 = redBishop1Rectangle.x1;
    int a5 = redBishop1Rectangle.x2;

    int a6 = redBishop1Ellipse.x1;
    int a7 = redBishop1Ellipse.x2;

    int a8 = redBishop1Base.x1;
    int a9 = redBishop1Base.x2;

    int a10 = redBishop1Square.y1;
    int a11 = redBishop1Square.y2;

    int a12 = redBishop1Rectangle.y1;
    int a13 = redBishop1Rectangle.y2;

    int a14 = redBishop1Ellipse.y1;
    int a15 = redBishop1Ellipse.y2;

    int a16 = redBishop1Base.y1;
    int a17 = redBishop1Base.y2;

    boolean f = FALSE;

    redBishop1Square.failedpath = FALSE;

    if(greyKingSquare.posX != redBishop1Square.posX &&
       greyKingSquare.posY != redBishop1Square.posY) {
        f = moveRedBishop1(0, j, i, greyKingSquare.posY - redBishop1Square.posY, greyKingSquare.posX - redBishop1Square.posX, greyKingSquare.posY - redBishop1Square.posY, greyKingSquare.posX - redBishop1Square.posX);
        f = redBishop1Square.failedpath;
    } else {
        f = redBishop1Square.failedpath = TRUE;
    }

    redBishop1Square.posY = a1;
    redBishop1Square.posX = a0;

    redBishop1Square.x1 = a2;
    redBishop1Square.x2 = a3;

    redBishop1Rectangle.x1 = a4;
    redBishop1Rectangle.x2 = a5;

    redBishop1Ellipse.x1 = a6;
    redBishop1Ellipse.x2 = a7;

    redBishop1Base.x1 = a8;
    redBishop1Base.x2 = a9;

    redBishop1Square.y1 = a10;
    redBishop1Square.y2 = a11;

    redBishop1Rectangle.y1 = a12;
    redBishop1Rectangle.y2 = a13;

    redBishop1Ellipse.y1 = a14;
    redBishop1Ellipse.y2 = a15;

    redBishop1Base.y1 = a16;
    redBishop1Base.y2 = a17;
    
    a1 = redBishop2Square.posY;
    a0 = redBishop2Square.posX;

    a2 = redBishop2Square.x1;
    a3 = redBishop2Square.x2;

    a4 = redBishop2Rectangle.x1;
    a5 = redBishop2Rectangle.x2;

    a6 = redBishop2Ellipse.x1;
    a7 = redBishop2Ellipse.x2;

    a8 = redBishop2Base.x1;
    a9 = redBishop2Base.x2;

    a10 = redBishop2Square.y1;
    a11 = redBishop2Square.y2;

    a12 = redBishop2Rectangle.y1;
    a13 = redBishop2Rectangle.y2;

    a14 = redBishop2Ellipse.y1;
    a15 = redBishop2Ellipse.y2;

    a16 = redBishop2Base.y1;
    a17 = redBishop2Base.y2;

    boolean f2 = FALSE;
    
    redBishop2Square.failedpath = FALSE;

    if(greyKingSquare.posX != redBishop2Square.posX &&
       greyKingSquare.posY != redBishop2Square.posY) {
        f2 = moveRedBishop2(0, j, i, greyKingSquare.posY - redBishop2Square.posY, greyKingSquare.posX - redBishop2Square.posX, greyKingSquare.posY - redBishop2Square.posY, greyKingSquare.posX - redBishop2Square.posX);
        f2 = redBishop2Square.failedpath;
    } else {
        f2 = redBishop2Square.failedpath = TRUE;
    }

    redBishop2Square.posY = a1;
    redBishop2Square.posX = a0;

    redBishop2Square.x1 = a2;
    redBishop2Square.x2 = a3;

    redBishop2Rectangle.x1 = a4;
    redBishop2Rectangle.x2 = a5;

    redBishop2Ellipse.x1 = a6;
    redBishop2Ellipse.x2 = a7;

    redBishop2Base.x1 = a8;
    redBishop2Base.x2 = a9;

    redBishop2Square.y1 = a10;
    redBishop2Square.y2 = a11;

    redBishop2Rectangle.y1 = a12;
    redBishop2Rectangle.y2 = a13;

    redBishop2Ellipse.y1 = a14;
    redBishop2Ellipse.y2 = a15;

    redBishop2Base.y1 = a16;
    redBishop2Base.y2 = a17;

    if(!f || !f2) {
        redBishop1Square.failedpath = FALSE;
        redBishop2Square.failedpath = FALSE;
        if(!f)
        TextOut (hdc,
                 redBishop1Square.posX,
                 redBishop1Square.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));

        if(!f2)
        TextOut (hdc,
                 redBishop2Square.posX,
                 redBishop2Square.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    
    redBishop1Square.failedpath = FALSE;
    redBishop2Square.failedpath = FALSE;
    return FALSE;
}

boolean checkKnightCheckGrey(int j, int i) {
    if(greyKnight1Rectangle1.posX == redKnight1Rectangle1.posX &&
       greyKnight1Rectangle1.posY == redKnight1Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight2Rectangle1.posX == redKnight2Rectangle1.posX &&
       greyKnight2Rectangle1.posY == redKnight2Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight1Rectangle1.posX == redKnight2Rectangle1.posX &&
       greyKnight1Rectangle1.posY == redKnight2Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight2Rectangle1.posX == redKnight1Rectangle1.posX &&
       greyKnight2Rectangle1.posY == redKnight1Rectangle1.posY) {
        return FALSE;
    }
    if(redKnight1Rectangle1.posX - 100 == greyKingSquare.posX &&
       redKnight1Rectangle1.posY - 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX - 200 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY - 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX - 200 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY + 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX - 100 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY + 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX + 100 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY + 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX + 200 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY + 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX + 200 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY - 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight1Rectangle1.posX + 100 == greyKingSquare.posX &&
              redKnight1Rectangle1.posY - 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight1Rectangle1.posX,
                 redKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    if(redKnight2Rectangle1.posX - 100 == greyKingSquare.posX &&
       redKnight2Rectangle1.posY - 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX - 200 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY - 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX - 200 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY + 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX - 100 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY + 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX + 100 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY + 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX + 200 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY + 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX + 200 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY - 100 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(redKnight2Rectangle1.posX + 100 == greyKingSquare.posX &&
              redKnight2Rectangle1.posY - 200 == greyKingSquare.posY) {
        TextOut (hdc,
                 redKnight2Rectangle1.posX,
                 redKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    return FALSE;
}

boolean checkPawnsCheckGrey(int j, int i) {
    for(int t=0; t<8; t++) {
        if(redPawnsBase[t].posX + 100 == greyKingSquare.posX &&
           redPawnsBase[t].posY + 100 == greyKingSquare.posY) {
            TextOut (hdc,
                     redPawnsBase[t].posX,
                     redPawnsBase[t].posY,
                     TextArray [0],
                     GetTextSize (TextArray [0]));
            return TRUE;
        }

        if(redPawnsBase[t].posX - 100 == greyKingSquare.posX &&
           redPawnsBase[t].posY + 100 == greyKingSquare.posY) {
            TextOut (hdc,
                     redPawnsBase[t].posX,
                     redPawnsBase[t].posY,
                     TextArray [0],
                     GetTextSize (TextArray [0]));
            return TRUE;
        }
    }
    return FALSE;
}

boolean checkPawnsCheckRed(int j, int i) {
    for(int t=0; t<8; t++) {
        if(greyPawnsBase[t].posX + 100 == redKingSquare.posX &&
           greyPawnsBase[t].posY - 100 == redKingSquare.posY) {
            TextOut (hdc,
                     greyPawnsBase[t].posX,
                     greyPawnsBase[t].posY,
                     TextArray [0],
                     GetTextSize (TextArray [0]));
            return TRUE;
        }
        if(greyPawnsBase[t].posX - 100 == redKingSquare.posX &&
           greyPawnsBase[t].posY - 100 == redKingSquare.posY) {
            TextOut (hdc,
                     greyPawnsBase[t].posX,
                     greyPawnsBase[t].posY,
                     TextArray [0],
                     GetTextSize (TextArray [0]));
            return TRUE;
        }
    }
    return FALSE;
}

boolean checkKnightCheckRed(int j, int i) {
    if(greyKnight1Rectangle1.posX == redKnight1Rectangle1.posX &&
       greyKnight1Rectangle1.posY == redKnight1Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight2Rectangle1.posX == redKnight2Rectangle1.posX &&
       greyKnight2Rectangle1.posY == redKnight2Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight1Rectangle1.posX == redKnight2Rectangle1.posX &&
       greyKnight1Rectangle1.posY == redKnight2Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight2Rectangle1.posX == redKnight1Rectangle1.posX &&
       greyKnight2Rectangle1.posY == redKnight1Rectangle1.posY) {
        return FALSE;
    }
    if(greyKnight1Rectangle1.posX - 100 == redKingSquare.posX &&
       greyKnight1Rectangle1.posY - 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX - 200 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY - 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX - 200 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY + 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX - 100 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY + 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX + 100 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY + 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX + 200 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY + 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX + 200 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY - 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight1Rectangle1.posX + 100 == redKingSquare.posX &&
              greyKnight1Rectangle1.posY - 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight1Rectangle1.posX,
                 greyKnight1Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    if(greyKnight2Rectangle1.posX - 100 == redKingSquare.posX &&
       greyKnight2Rectangle1.posY - 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX - 200 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY - 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX - 200 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY + 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX - 100 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY + 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX + 100 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY + 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX + 200 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY + 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX + 200 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY - 100 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    } else if(greyKnight2Rectangle1.posX + 100 == redKingSquare.posX &&
              greyKnight2Rectangle1.posY - 200 == redKingSquare.posY) {
        TextOut (hdc,
                 greyKnight2Rectangle1.posX,
                 greyKnight2Rectangle1.posY,
                 TextArray [0],
                 GetTextSize (TextArray [0]));
        return TRUE;
    }
    return FALSE;
}

boolean checkCheckGrey(int j, int i) {
    if(checkKnightCheckGrey(j, i) ||
       checkBishopCheckGrey(j, i) ||
       checkQueenCheckGrey(j, i) ||
       checkQueenCheckGreyK(j, i) ||
       checkRookCheckGrey(j, i) ||
       checkPawnsCheckGrey(j, i)) {
        return TRUE;
    }
    return FALSE;
}

boolean checkCheckRed(int j, int i) {
    if(checkKnightCheckRed(j, i) ||
       checkBishopCheckRed(j, i) ||
       checkQueenCheckRed(j, i) ||
       checkQueenCheckRedK(j, i) ||
       checkRookCheckRed(j, i) ||
       checkPawnsCheckRed(j, i)) {
        return TRUE;
    }
    return FALSE;
}

// Step 4: the Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_PAINT:
        {
            if(deathed == -1) {

                hdc = BeginPaint(hwnd, &ps);
                
                hdcMem = CreateCompatibleDC(hdc);
                
                oldBitmap = SelectObject(hdcMem, hBitmap);

                GetObject(hBitmap, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 20, 0, bitmap.bmWidth, bitmap.bmHeight, hdcMem, 0, 0, SRCCOPY);

                SelectObject(hdcMem, oldBitmap);
                DeleteDC(hdcMem); DeleteObject(hBitmap);

                EndPaint(hwnd, &ps);

                hdc = GetDC(hwnd);
                
                deathed = 0;
            }
        }
        break;
        case WM_NOTIFY:
        {
            if(klicked) {

                Sleep(1);
                pawnBlack = (HBITMAP)LoadImage(hInst, "pawnblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                pawnWhite = (HBITMAP)LoadImage(hInst, "pawnwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knightBlack = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knightWhite = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knight2Black = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knight2White = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rookBlack = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rookWhite = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rook2Black = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rook2White = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishopBlack = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishopWhite = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishop2Black = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishop2White = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                queenBlack = (HBITMAP)LoadImage(hInst, "queenblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                queenWhite = (HBITMAP)LoadImage(hInst, "queenwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                kingBlack = (HBITMAP)LoadImage(hInst, "kingblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                kingWhite = (HBITMAP)LoadImage(hInst, "kingwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

                int xq = 0;

                hdcMem = CreateCompatibleDC(hdc);

                if(chosenPiece[0] == 'p' && chosenPiece[1] == 'r') {
                    hBitmapSq = pawnBlack;
                    xq = 22;
                }

                if(chosenPiece[0] == 'p' && chosenPiece[1] == 'w') {

                    hBitmapSq = pawnWhite;

                    hBitmapSq = ReplaceColor(hBitmapSq, 0x000000, 0x00ffff, hdcMem);

                    xq = 22;
                }

                if(chosenPiece[0] == 'k' && chosenPiece[1] == 'w') {
                    hBitmapSq = knightWhite;
                    xq = 22;
                }

                if(chosenPiece[0] == 'k' && chosenPiece[1] == 'r') {
                    hBitmapSq = knightBlack;
                    xq = 22;
                }

                if(chosenPiece[0] == 'b' && chosenPiece[1] == 'w') {
                    hBitmapSq = bishopWhite;
                    xq = 22;
                }

                if(chosenPiece[0] == 'b' && chosenPiece[1] == 'r') {
                    hBitmapSq = bishopBlack;
                    xq = 22;
                }

                if(chosenPiece[0] == 'r' && chosenPiece[1] == 'w') {
                    hBitmapSq = rookWhite;
                    xq = 22;
                }

                if(chosenPiece[0] == 'r' && chosenPiece[1] == 'r') {
                    hBitmapSq = rookBlack;
                    xq = 22;
                }

                if(chosenPiece[0] == 'q' && chosenPiece[1] == 'w') {
                    hBitmapSq = queenWhite;
                    xq = 22;
                }

                if(chosenPiece[0] == 'q' && chosenPiece[1] == 'r') {
                    hBitmapSq = queenBlack;
                    xq = 22;
                }

                if(chosenPiece[0] == 'c' && chosenPiece[1] == 'w') {
                    hBitmapSq = kingWhite;
                    xq = 22;
                }

                if(chosenPiece[0] == 'c' && chosenPiece[1] == 'r') {
                    hBitmapSq = kingBlack;
                    xq = 22;
                }

                hBitmapSq = ReplaceColor(hBitmapSq, 0xff0000, 0x00ffff, hdcMem);

                hBitmapSq = ReplaceColor(hBitmapSq, 0x4cb122, 0x00ffff, hdcMem);
                
                hBitmapSq = ReplaceColor(hBitmapSq, 0x00ff00, 0x00ffff, hdcMem);

                oldBitmap = SelectObject(hdcMem, hBitmapSq);

                GetObject(hBitmapSq, sizeof(bitmap), &bitmap);
                BitBlt(hdc, i__PosX-30, i__PosY-30, bitmap.bmWidth, bitmap.bmHeight, hdcMem, 0, 0, SRCCOPY);

                SelectObject(hdcMem, oldBitmap);
                ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBitmapSq);
                DeleteObject(oldBitmap);
                
                DeleteObject(pawnBlack);
                DeleteObject(pawnWhite);
                DeleteObject(knightBlack);
                DeleteObject(knightWhite);
                DeleteObject(knight2Black);
                DeleteObject(knight2White);
                DeleteObject(rookBlack);
                DeleteObject(rookWhite);
                DeleteObject(rook2Black);
                DeleteObject(rook2White);
                DeleteObject(bishopBlack);
                DeleteObject(bishopWhite);
                DeleteObject(bishop2Black);
                DeleteObject(bishop2White);
                DeleteObject(queenBlack);
                DeleteObject(queenWhite);
                DeleteObject(kingBlack);
                DeleteObject(kingWhite);
                
                GdiFlush();

            } else {

                DrawChessBoard();

                Sleep(1);
                pawnBlack = (HBITMAP)LoadImage(hInst, "pawnblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                pawnWhite = (HBITMAP)LoadImage(hInst, "pawnwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knightBlack = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knightWhite = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knight2Black = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                knight2White = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rookBlack = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rookWhite = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rook2Black = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                rook2White = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishopBlack = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishopWhite = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishop2Black = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                bishop2White = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                queenBlack = (HBITMAP)LoadImage(hInst, "queenblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                queenWhite = (HBITMAP)LoadImage(hInst, "queenwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                kingBlack = (HBITMAP)LoadImage(hInst, "kingblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
                Sleep(1);
                kingWhite = (HBITMAP)LoadImage(hInst, "kingwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

                //draw grey rook1
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp;
                if(((greyRook1Rectangle1.posX/100)+(greyRook1Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(rookWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(rookWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyRook1Rectangle1.posX+25+7, greyRook1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey rook2
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyRook2Rectangle1.posX/100)+(greyRook2Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(rook2White,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(rook2White,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyRook2Rectangle1.posX+25+7, greyRook2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey knight1
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyKnight1Rectangle1.posX/100)+(greyKnight1Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(knightWhite,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(knightWhite,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyKnight1Rectangle1.posX+25+7, greyKnight1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey knight2
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyKnight2Rectangle1.posX/100)+(greyKnight2Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(knight2White,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(knight2White,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyKnight2Rectangle1.posX+25+7, greyKnight2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey bishop1
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyBishop1Square.posX/100)+(greyBishop1Square.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(bishopWhite,0x4cb122,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(bishopWhite,0x4cb122,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyBishop1Square.posX+25+7, greyBishop1Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey bishop2
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyBishop2Square.posX/100)+(greyBishop2Square.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(bishop2White,0x4cb122,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(bishop2White,0x4cb122,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyBishop2Square.posX+25+7, greyBishop2Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey queen
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyQueenSquare.posX/100)+(greyQueenSquare.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(queenWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(queenWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyQueenSquare.posX+25+7, greyQueenSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                //draw grey queen

                //draw grey king
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyKingSquare.posX/100)+(greyKingSquare.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(kingWhite,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(kingWhite,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyKingSquare.posX+25+7, greyKingSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey pawns
                for(int o=0; o<8; o++) {
                    hdcMem = CreateCompatibleDC(hdc);
                    if(((greyPawnsBase[o].posX/100)+(greyPawnsBase[o].posY/100)) % 2 == 0)
                        hBmp = ReplaceColor(pawnWhite,0x000000,0xb8d1eb,hdcMem); // replace red by white
                    else
                        hBmp = ReplaceColor(pawnWhite,0x000000,0x1a2c49,hdcMem); // replace red by beige
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, greyPawnsBase[o].posX+25+7, greyPawnsBase[o].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                }
                //isnt this great?!

                //draw red rook1
                hdcMem = CreateCompatibleDC(hdc);
                if(((redRook1Rectangle1.posX/100)+(redRook1Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(rookBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(rookBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redRook1Rectangle1.posX+25+7, redRook1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw red rook2
                hdcMem = CreateCompatibleDC(hdc);
                if(((redRook2Rectangle1.posX/100)+(redRook2Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(rook2Black,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(rookBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redRook2Rectangle1.posX+25+7, redRook2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey knight1
                hdcMem = CreateCompatibleDC(hdc);
                if(((redKnight1Rectangle1.posX/100)+(redKnight1Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(knightBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(knightBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redKnight1Rectangle1.posX+25+7, redKnight1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey knight2
                hdcMem = CreateCompatibleDC(hdc);
                if(((redKnight2Rectangle1.posX/100)+(redKnight2Rectangle1.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(knight2Black,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(knight2Black,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redKnight2Rectangle1.posX+25+7, redKnight2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey bishop1
                hdcMem = CreateCompatibleDC(hdc);
                if(((redBishop1Square.posX/100)+(redBishop1Square.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(bishopBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(bishopBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redBishop1Square.posX+25+7, redBishop1Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey bishop2
                hdcMem = CreateCompatibleDC(hdc);
                if(((redBishop2Square.posX/100)+(redBishop2Square.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(bishop2Black,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(bishop2Black,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redBishop2Square.posX+25+7, redBishop2Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey queen
                hdcMem = CreateCompatibleDC(hdc);
                if(((redQueenSquare.posX/100)+(redQueenSquare.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(queenBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(queenBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redQueenSquare.posX+25+7, redQueenSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey king
                hdcMem = CreateCompatibleDC(hdc);
                if(((redKingSquare.posX/100)+(redKingSquare.posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(kingBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(kingBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redKingSquare.posX+25+7, redKingSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

                //draw grey pawns
                for(int o=0; o<8; o++) {
                    hdcMem = CreateCompatibleDC(hdc);
                    if(((redPawnsBase[o].posX/100)+(redPawnsBase[o].posY/100)) % 2 == 0)
                        hBmp = ReplaceColor(pawnBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                    else
                        hBmp = ReplaceColor(pawnBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, redPawnsBase[o].posX+25+7, redPawnsBase[o].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                }

                //draw grey queen
                for(int m=0; m<8; m++) {
                    hdcMem = CreateCompatibleDC(hdc);
                    if(((greyQueenSquareK[m].posX/100)+(greyQueenSquareK[m].posY/100)) % 2 == 0)
                        hBmp = ReplaceColor(queenWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                    else
                        hBmp = ReplaceColor(queenWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, greyQueenSquareK[m].posX+25+7, greyQueenSquareK[m].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                }

                //draw grey queen
                for(int m=0; m<8; m++) {
                    hdcMem = CreateCompatibleDC(hdc);
                    if(((redQueenSquareK[m].posX/100)+(redQueenSquareK[m].posY/100)) % 2 == 0)
                        hBmp = ReplaceColor(queenBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                    else
                        hBmp = ReplaceColor(queenBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, redQueenSquareK[m].posX+25+7, redQueenSquareK[m].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                }
                
                DeleteObject(pawnBlack);
                DeleteObject(pawnWhite);
                DeleteObject(knightBlack);
                DeleteObject(knightWhite);
                DeleteObject(knight2Black);
                DeleteObject(knight2White);
                DeleteObject(rookBlack);
                DeleteObject(rookWhite);
                DeleteObject(rook2Black);
                DeleteObject(rook2White);
                DeleteObject(bishopBlack);
                DeleteObject(bishopWhite);
                DeleteObject(bishop2Black);
                DeleteObject(bishop2White);
                DeleteObject(queenBlack);
                DeleteObject(queenWhite);
                DeleteObject(kingBlack);
                DeleteObject(kingWhite);
    
                GdiFlush();

            }

            Sleep(1);
            pawnBlack_s = (HBITMAP)LoadImage(hInst, "pawnblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            pawnWhite_s = (HBITMAP)LoadImage(hInst, "pawnwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knightBlack_s = (HBITMAP)LoadImage(hInst, "knightblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knightWhite_s = (HBITMAP)LoadImage(hInst, "knightwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knight2Black_s = (HBITMAP)LoadImage(hInst, "knightblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knight2White_s = (HBITMAP)LoadImage(hInst, "knightwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rookBlack_s = (HBITMAP)LoadImage(hInst, "rookblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rookWhite_s = (HBITMAP)LoadImage(hInst, "rookwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rook2Black_s = (HBITMAP)LoadImage(hInst, "rookblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rook2White_s = (HBITMAP)LoadImage(hInst, "rookwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishopBlack_s = (HBITMAP)LoadImage(hInst, "bishopblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishopWhite_s = (HBITMAP)LoadImage(hInst, "bishopwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishop2Black_s = (HBITMAP)LoadImage(hInst, "bishopblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishop2White_s = (HBITMAP)LoadImage(hInst, "bishopwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            queenBlack_s = (HBITMAP)LoadImage(hInst, "queenblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            queenWhite_s = (HBITMAP)LoadImage(hInst, "queenwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            kingBlack_s = (HBITMAP)LoadImage(hInst, "kingblack_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            kingWhite_s = (HBITMAP)LoadImage(hInst, "kingwhite_s.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

            _y_ = 20;

            HBRUSH white_brush = CreateSolidBrush(RGB(255, 255, 255));
            RECT rrect = {820, 20, 1100, 810};
            FillRect(hdc, &rrect, white_brush);
            DeleteObject(white_brush);

            //draw grey rook1
            if(greyRook1Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(rookWhite_s,0xff0000,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey rook2
            if(greyRook2Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(rook2White_s,0xff0000,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey knight1
            if(greyKnight1Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(knightWhite_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey knight2
            if(greyKnight2Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(knight2White_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey bishop1
            if(greyBishop1Square.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(bishopWhite_s,0x4cb122,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey bishop2
            if(greyBishop2Square.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(bishop2White_s,0x4cb122,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey queen
            if(greyQueenSquare.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(queenWhite_s,0xff0000,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey king
            if(greyKingSquare.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(kingWhite_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey pawns
            for(int o=0; o<8; o++) {
                if(greyPawnsBase[o].posX == 1100) {
                    hdcMem = CreateCompatibleDC(hdc);
                    HBITMAP hBmp = ReplaceColor(pawnWhite_s,0x000000,0xffffff,hdcMem);
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                    _y_ += 31;
                }
            }
            //isnt this great?!

            //draw grey queen
            for(int m=0; m<8; m++) {
                if(greyQueenSquareK[m].posX == 1100) {
                    hdcMem = CreateCompatibleDC(hdc);
                    HBITMAP hBmp = ReplaceColor(queenWhite_s,0xff0000,0xffffff,hdcMem);
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, 825, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                    _y_ += 31;
                }
            }

            _y_ = 20;

            //draw red rook1
            if(redRook1Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(rookBlack_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw red rook2
            if(redRook2Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(rook2Black_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey knight1
            if(redKnight1Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(knightBlack_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey knight2
            if(redKnight2Rectangle1.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(knight2Black_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey bishop1
            if(redBishop1Square.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(bishopBlack_s,0xff0000,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey bishop2
            if(redBishop2Square.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(bishop2Black_s,0xff0000,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey queen
            if(redQueenSquare.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(queenBlack_s,0x00ff00,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey king
            if(redKingSquare.posX == 1100) {
                hdcMem = CreateCompatibleDC(hdc);
                HBITMAP hBmp = ReplaceColor(kingBlack_s,0xff0000,0xffffff,hdcMem);
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                _y_ += 31;
            }

            //draw grey pawns
            for(int o=0; o<8; o++) {
                if(redPawnsBase[o].posX == 1100) {
                    hdcMem = CreateCompatibleDC(hdc);
                    HBITMAP hBmp = ReplaceColor(pawnBlack_s,0xff0000,0xffffff,hdcMem);
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                    _y_ += 31;
                }
            }

            //draw grey queen
            for(int m=0; m<8; m++) {
                if(redQueenSquareK[m].posX == 1100) {
                    hdcMem = CreateCompatibleDC(hdc);
                    HBITMAP hBmp = ReplaceColor(queenBlack_s,0x00ff00,0xffffff,hdcMem);
                    oldBitmap = SelectObject(hdcMem, hBmp);
                    GetObject(hBmp, sizeof(bitmap), &bitmap);
                    BitBlt(hdc, 900, _y_, 30, 30, hdcMem, 0, 0, SRCCOPY);
                    _y_ += 31;
                    SelectObject(hdcMem, oldBitmap);
                    /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
                }
            }

            DeleteObject(pawnBlack_s);
            DeleteObject(pawnWhite_s);
            DeleteObject(knightBlack_s);
            DeleteObject(knightWhite_s);
            DeleteObject(knight2Black_s);
            DeleteObject(knight2White_s);
            DeleteObject(rookBlack_s);
            DeleteObject(rookWhite_s);
            DeleteObject(rook2Black_s);
            DeleteObject(rook2White_s);
            DeleteObject(bishopBlack_s);
            DeleteObject(bishopWhite_s);
            DeleteObject(bishop2Black_s);
            DeleteObject(bishop2White_s);
            DeleteObject(queenBlack_s);
            DeleteObject(queenWhite_s);
            DeleteObject(kingBlack_s);
            DeleteObject(kingWhite_s);

            GdiFlush();

        }
        break;
        case WM_LBUTTONUP:
            klicked = FALSE;
            
            DrawChessBoard();

            Sleep(1);
            pawnBlack = (HBITMAP)LoadImage(hInst, "pawnblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            pawnWhite = (HBITMAP)LoadImage(hInst, "pawnwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knightBlack = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knightWhite = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knight2Black = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knight2White = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rookBlack = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rookWhite = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rook2Black = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rook2White = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishopBlack = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishopWhite = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishop2Black = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishop2White = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            queenBlack = (HBITMAP)LoadImage(hInst, "queenblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            queenWhite = (HBITMAP)LoadImage(hInst, "queenwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            kingBlack = (HBITMAP)LoadImage(hInst, "kingblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            kingWhite = (HBITMAP)LoadImage(hInst, "kingwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

            //draw grey rook1
            hdcMem = CreateCompatibleDC(hdc);
            HBITMAP hBmp;
            if(((greyRook1Rectangle1.posX/100)+(greyRook1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rookWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rookWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyRook1Rectangle1.posX+25+7, greyRook1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey rook2
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyRook2Rectangle1.posX/100)+(greyRook2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rook2White,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rook2White,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyRook2Rectangle1.posX+25+7, greyRook2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight1
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyKnight1Rectangle1.posX/100)+(greyKnight1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knightWhite,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knightWhite,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyKnight1Rectangle1.posX+25+7, greyKnight1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight2
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyKnight2Rectangle1.posX/100)+(greyKnight2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knight2White,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knight2White,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyKnight2Rectangle1.posX+25+7, greyKnight2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop1
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyBishop1Square.posX/100)+(greyBishop1Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishopWhite,0x4cb122,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishopWhite,0x4cb122,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyBishop1Square.posX+25+7, greyBishop1Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop2
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyBishop2Square.posX/100)+(greyBishop2Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishop2White,0x4cb122,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishop2White,0x4cb122,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyBishop2Square.posX+25+7, greyBishop2Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey queen
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyQueenSquare.posX/100)+(greyQueenSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(queenWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(queenWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyQueenSquare.posX+25+7, greyQueenSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            //draw grey queen

            //draw grey king
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyKingSquare.posX/100)+(greyKingSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(kingWhite,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(kingWhite,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyKingSquare.posX+25+7, greyKingSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey pawns
            for(int o=0; o<8; o++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyPawnsBase[o].posX/100)+(greyPawnsBase[o].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(pawnWhite,0x000000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(pawnWhite,0x000000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyPawnsBase[o].posX+25+7, greyPawnsBase[o].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }
            //isnt this great?!

            //draw red rook1
            hdcMem = CreateCompatibleDC(hdc);
            if(((redRook1Rectangle1.posX/100)+(redRook1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rookBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rookBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redRook1Rectangle1.posX+25+7, redRook1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw red rook2
            hdcMem = CreateCompatibleDC(hdc);
            if(((redRook2Rectangle1.posX/100)+(redRook2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rook2Black,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rook2Black,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redRook2Rectangle1.posX+25+7, redRook2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight1
            hdcMem = CreateCompatibleDC(hdc);
            if(((redKnight1Rectangle1.posX/100)+(redKnight1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knightBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knightBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redKnight1Rectangle1.posX+25+7, redKnight1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight2
            hdcMem = CreateCompatibleDC(hdc);
            if(((redKnight2Rectangle1.posX/100)+(redKnight2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knight2Black,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knight2Black,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redKnight2Rectangle1.posX+25+7, redKnight2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop1
            hdcMem = CreateCompatibleDC(hdc);
            if(((redBishop1Square.posX/100)+(redBishop1Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishopBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishopBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redBishop1Square.posX+25+7, redBishop1Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop2
            hdcMem = CreateCompatibleDC(hdc);
            if(((redBishop2Square.posX/100)+(redBishop2Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishop2Black,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishop2Black,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redBishop2Square.posX+25+7, redBishop2Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey queen
            hdcMem = CreateCompatibleDC(hdc);
            if(((redQueenSquare.posX/100)+(redQueenSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(queenBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(queenBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redQueenSquare.posX+25+7, redQueenSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            //draw grey queen

            //draw grey king
            hdcMem = CreateCompatibleDC(hdc);
            if(((redKingSquare.posX/100)+(redKingSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(kingBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(kingBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redKingSquare.posX+25+7, redKingSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey pawns
            for(int o=0; o<8; o++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((redPawnsBase[o].posX/100)+(redPawnsBase[o].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(pawnBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(pawnBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redPawnsBase[o].posX+25+7, redPawnsBase[o].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }

            //draw grey queen
            for(int m=0; m<8; m++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyQueenSquareK[m].posX/100)+(greyQueenSquareK[m].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(queenWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(queenWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyQueenSquareK[m].posX+25+7, greyQueenSquareK[m].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }

            //draw grey queen
            for(int m=0; m<8; m++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((redQueenSquareK[m].posX/100)+(redQueenSquareK[m].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(queenBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(queenBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redQueenSquareK[m].posX+25+7, redQueenSquareK[m].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }
            
            DeleteObject(pawnBlack);
            DeleteObject(pawnWhite);
            DeleteObject(knightBlack);
            DeleteObject(knightWhite);
            DeleteObject(knight2Black);
            DeleteObject(knight2White);
            DeleteObject(rookBlack);
            DeleteObject(rookWhite);
            DeleteObject(rook2Black);
            DeleteObject(rook2White);
            DeleteObject(bishopBlack);
            DeleteObject(bishopWhite);
            DeleteObject(bishop2Black);
            DeleteObject(bishop2White);
            DeleteObject(queenBlack);
            DeleteObject(queenWhite);
            DeleteObject(kingBlack);
            DeleteObject(kingWhite);

            GdiFlush();

        case WM_LBUTTONDOWN:
        {
            if(msg == WM_LBUTTONDOWN)
                klicked = TRUE;
            
            done = FALSE;
            
            int iPosX = LOWORD(lParam);
            int iPosY = HIWORD(lParam);

            for(int j=0; j<8; j++) {
                for(int i=0; i<8; i++) {
                    if(iPosX >= i*100 &&
                       iPosY >= j*100 &&
                       iPosX < i*100+100 &&
                       iPosY < j*100+100) {
                        
                        for(int k=0; k<8; k++) {
                            for(int l=0; l<8; l++) {
                                boxes[k][l].clicked = FALSE;
                            }
                        }
                        boxes[j][i].clicked = TRUE;

                        if(turn == 'h') {
                            
                            if(1==2) SetWindowText(hwnd, "Grey move");
                            
                            for(int k=0; k<8; k++) {
                            
                                if(greyPawnsBase[k].posX == i*100 &&
                                   greyPawnsBase[k].posY == j*100) {

                                    clickedOne = 'g';
                                    greyPawnsBase[k].clicked = TRUE;
                                    turn = 'h';
                                    
                                    strncpy(chosenPiece, "pw", 2);

                                    for(int l=0; l<8; l++) {
                                        redPawnsBase[l].clicked = FALSE;
                                    }

                                    for(int l=0; l<8; l++) {
                                        if(l != k) {
                                            greyPawnsBase[l].clicked = FALSE;
                                        }
                                    }
                                }

                                if(boxes[j][i].clicked == TRUE) {

                                    if(clickedOne == 'g' &&
                                       greyPawnsBase[k].clicked == TRUE && 
                                       greyPawnsBase[k].firstTimeMove == TRUE) {

                                        boolean fail = FALSE;
                                        boolean ff = FALSE;

                                        for(int m=0; m<8; m++) {
                                            if(greyPawnsBase[m].posY == greyPawnsBase[k].posY - 100 &&
                                               (greyPawnsBase[m].posX == greyPawnsBase[k].posX + 100 || greyPawnsBase[m].posX == greyPawnsBase[k].posX - 100)) {
                                                ff = TRUE;
                                            }
                                            if(greyPawnsBase[m].posY == greyPawnsBase[k].posY - 100 &&
                                               greyPawnsBase[m].posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyPawnsBase[m].posY == greyPawnsBase[k].posY - 100 &&
                                               greyPawnsBase[m].posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop1Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop1Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop2Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop2Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop1Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop1Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop2Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop2Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                        }
                                        
                                        if(!ff &&
                                           j*100 == greyPawnsBase[k].posY - 100 &&
                                          (i*100 == greyPawnsBase[k].posX + 100 ||
                                           i*100 == greyPawnsBase[k].posX - 100)) {

                                            turn = 'r';

                                            boolean ate = FALSE;
                                            
                                            if(1 == 1) {

                                                int a0 = greyPawnsBase[k].posX;
                                                int a1 = greyPawnsBase[k].posY;
                                                
                                                int a2 = greyPawnsBase[k].x1;
                                                int a3 = greyPawnsBase[k].y1;
                                                
                                                int a4 = greyPawnsBase[k].x2;
                                                int a5 = greyPawnsBase[k].y2;
                                                
                                                int a6 = greyPawnsEllipse[k].x1;
                                                int a7 = greyPawnsEllipse[k].y1;
                                                
                                                int a8 = greyPawnsEllipse[k].x2;
                                                int a9 = greyPawnsEllipse[k].y2;

                                                boxes[j][i].clear = FALSE;
                                                boxes[greyPawnsBase[k].posY/100][greyPawnsBase[k].posX/100].clear = TRUE;
                                                greyPawnsBase[k].posY = j*100;
                                                greyPawnsBase[k].posX = i*100;

                                                greyPawnsEllipse[k].x1 = i*100 + 40;
                                                greyPawnsEllipse[k].y1 = j*100 + 40;
                                                greyPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                greyPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                greyPawnsBase[k].x1 = i*100 + 40;
                                                greyPawnsBase[k].y1 = j*100 + 60;
                                                greyPawnsBase[k].x2 = i*100 + 40 + 20;
                                                greyPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean fff = TRUE;
                                                
                                                if(greyPawnsBase[k].posX == redQueenSquare.posX &&
                                                   greyPawnsBase[k].posY == redQueenSquare.posY) {
                                                    fff = FALSE;
                                                }
                                                
                                                boolean ffff = checkCheckGrey(j, i);
                                                
                                                if(ffff) {
                                                    greyPawnsBase[k].posX = a0;
                                                    greyPawnsBase[k].posY = a1;

                                                    greyPawnsBase[k].x1 = a2;
                                                    greyPawnsBase[k].y1 = a3;

                                                    greyPawnsBase[k].x2 = a4;
                                                    greyPawnsBase[k].y2 = a5;

                                                    greyPawnsEllipse[k].x1 = a6;
                                                    greyPawnsEllipse[k].y1 = a7;

                                                    greyPawnsEllipse[k].x2 = a8;
                                                    greyPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'h';
                                                } else {
                                                    
                                                    for(int l=0; l<8; l++) {
                                                        if(redPawnsBase[l].posX == i*100 &&
                                                           redPawnsBase[l].posY == j*100) {
                                                            redPawnsBase[l].posX = 1100;
                                                            redPawnsBase[l].posY = -1000;
                                                            redPawnsBase[l].x1 = -1000;
                                                            redPawnsBase[l].x2 = -1000;
                                                            redPawnsEllipse[l].x1 = -1000;
                                                            redPawnsEllipse[l].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    for(int z=0; z<8; z++) {
                                                        if(redQueenSquareK[z].posX == i*100 &&
                                                           redQueenSquareK[z].posY == j*100) {
                                                            redQueenSquareK[z].posX = 1100;
                                                            redQueenSquareK[z].x1 = -1000;
                                                            redQueenSquareK[z].x2 = -1000;
                                                            redQueenBaseK[z].x1 = -1000;
                                                            redQueenBaseK[z].x2 = -1000;
                                                            redQueenEllipseK[z].x1 = -1000;
                                                            redQueenEllipseK[z].x2 = -1000;
                                                            redQueenRectangle1K[z].x1 = -1000;
                                                            redQueenRectangle1K[z].x2 = -1000;
                                                            redQueenRectangle2K[z].x1 = -1000;
                                                            redQueenRectangle2K[z].x2 = -1000;
                                                            redQueenRectangle3K[z].x1 = -1000;
                                                            redQueenRectangle3K[z].x2 = -1000;
                                                            ate = TRUE;
                                                        }
                                                    }
                                                    if(redQueenSquare.posX == i*100 &&
                                                       redQueenSquare.posY == j*100) {
                                                        redQueenSquare.posX = 1100;
                                                        redQueenSquare.posY = -1000;
                                                        redQueenSquare.x1 = -1000;
                                                        redQueenSquare.x2 = -1000;
                                                        redQueenBase.x1 = -1000;
                                                        redQueenBase.x2 = -1000;
                                                        redQueenEllipse.x1 = -1000;
                                                        redQueenEllipse.x2 = -1000;
                                                        redQueenRectangle1.x1 = -1000;
                                                        redQueenRectangle1.x2 = -1000;
                                                        redQueenRectangle2.x1 = -1000;
                                                        redQueenRectangle2.x2 = -1000;
                                                        redQueenRectangle3.x1 = -1000;
                                                        redQueenRectangle3.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redBishop1Square.posX == i*100 &&
                                                       redBishop1Square.posY == j*100) {
                                                        redBishop1Square.posX = 1100;
                                                        redBishop1Square.posY = -1000;
                                                        redBishop1Square.x1 = -1000;
                                                        redBishop1Square.x2 = -1000;
                                                        redBishop1Base.x1 = -1000;
                                                        redBishop1Base.x2 = -1000;
                                                        redBishop1Ellipse.x1 = -1000;
                                                        redBishop1Ellipse.x2 = -1000;
                                                        redBishop1Rectangle.x1 = -1000;
                                                        redBishop1Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redBishop2Square.posX == i*100 &&
                                                       redBishop2Square.posY == j*100) {
                                                        redBishop2Square.posX = 1100;
                                                        redBishop2Square.posY = -1000;
                                                        redBishop2Square.x1 = -1000;
                                                        redBishop2Square.x2 = -1000;
                                                        redBishop2Base.x1 = -1000;
                                                        redBishop2Base.x2 = -1000;
                                                        redBishop2Ellipse.x1 = -1000;
                                                        redBishop2Ellipse.x2 = -1000;
                                                        redBishop2Rectangle.x1 = -1000;
                                                        redBishop2Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redKnight1Rectangle1.posX == i*100 &&
                                                       redKnight1Rectangle1.posY == j*100) {
                                                        redKnight1Rectangle1.posX = 1100;
                                                        redKnight1Rectangle1.posY = -1000;
                                                        redKnight1Base.x1 = -1000;
                                                        redKnight1Base.x2 = -1000;
                                                        redKnight1Ellipse.x1 = -1000;
                                                        redKnight1Ellipse.x2 = -1000;
                                                        redKnight1Rectangle1.x1 = -1000;
                                                        redKnight1Rectangle1.x2 = -1000;
                                                        redKnight1Rectangle2.x1 = -1000;
                                                        redKnight1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redKnight2Rectangle1.posX == i*100 &&
                                                       redKnight2Rectangle1.posY == j*100) {
                                                        redKnight2Rectangle1.posX = 1100;
                                                        redKnight2Rectangle1.posY = -1000;
                                                        redKnight2Base.x1 = -1000;
                                                        redKnight2Base.x2 = -1000;
                                                        redKnight2Ellipse.x1 = -1000;
                                                        redKnight2Ellipse.x2 = -1000;
                                                        redKnight2Rectangle1.x1 = -1000;
                                                        redKnight2Rectangle1.x2 = -1000;
                                                        redKnight2Rectangle2.x1 = -1000;
                                                        redKnight2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redRook1Rectangle1.posX == i*100 &&
                                                       redRook1Rectangle1.posY == j*100) {
                                                        redRook1Rectangle1.posX = 1100;
                                                        redRook1Rectangle1.posY = -1000;
                                                        redRook1Base.x1 = -1000;
                                                        redRook1Base.x2 = -1000;
                                                        redRook1Ellipse.x1 = -1000;
                                                        redRook1Ellipse.x2 = -1000;
                                                        redRook1Rectangle1.x1 = -1000;
                                                        redRook1Rectangle1.x2 = -1000;
                                                        redRook1Rectangle2.x1 = -1000;
                                                        redRook1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redRook2Rectangle1.posX == i*100 &&
                                                       redRook2Rectangle1.posY == j*100) {
                                                        redRook2Rectangle1.posX = 1100;
                                                        redRook2Rectangle1.posY = -1000;
                                                        redRook2Base.x1 = -1000;
                                                        redRook2Base.x2 = -1000;
                                                        redRook2Ellipse.x1 = -1000;
                                                        redRook2Ellipse.x2 = -1000;
                                                        redRook2Rectangle1.x1 = -1000;
                                                        redRook2Rectangle1.x2 = -1000;
                                                        redRook2Rectangle2.x1 = -1000;
                                                        redRook2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }

                                                    for(int u=0; u<8; u++) {
                                                        if(redPawnsBase[u].posX == greyPawnsBase[k].posX &&
                                                           redPawnsBase[u].posY == greyPawnsBase[k].posY) {
                                                            redPawnsBase[u].posX = 1100;
                                                            redPawnsBase[u].posY = -1000;
                                                            redPawnsBase[u].x1 = -1000;
                                                            redPawnsBase[u].x2 = -1000;
                                                            redPawnsEllipse[u].x1 = -1000;
                                                            redPawnsEllipse[u].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }

                                                    if(ate) {
                                                        greyPawnsBase[k].firstTimeMove = FALSE;

                                                        greyPawnsBase[k].clicked = FALSE;
                                                        if(1==2) SetWindowText(hwnd, "Red move");
                                                        turnChanged = TRUE;
                                                        done = TRUE;
                                                    } else {
                                                        greyPawnsBase[k].posX = a0;
                                                        greyPawnsBase[k].posY = a1;

                                                        greyPawnsBase[k].x1 = a2;
                                                        greyPawnsBase[k].y1 = a3;

                                                        greyPawnsBase[k].x2 = a4;
                                                        greyPawnsBase[k].y2 = a5;

                                                        greyPawnsEllipse[k].x1 = a6;
                                                        greyPawnsEllipse[k].y1 = a7;

                                                        greyPawnsEllipse[k].x2 = a8;
                                                        greyPawnsEllipse[k].y2 = a9;

                                                        turn = 'h';
                                                    }
                                                }
                                            } else {
                                                turn = 'h';
                                            }
                                        }

                                        else if(!fail &&
                                                j*100 == greyPawnsBase[k].posY - 100 &&
                                                i*100 == greyPawnsBase[k].posX) {

                                            turn = 'r';

                                            boolean cant = FALSE;
                                            for(int s=0; s<8; s++) {
                                                if(greyPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY + 100 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY + 100 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                            }
                                            if(!cant) {

                                                int a0 = greyPawnsBase[k].posX;
                                                int a1 = greyPawnsBase[k].posY;
                                                
                                                int a2 = greyPawnsBase[k].x1;
                                                int a3 = greyPawnsBase[k].y1;
                                                
                                                int a4 = greyPawnsBase[k].x2;
                                                int a5 = greyPawnsBase[k].y2;
                                                
                                                int a6 = greyPawnsEllipse[k].x1;
                                                int a7 = greyPawnsEllipse[k].y1;
                                                
                                                int a8 = greyPawnsEllipse[k].x2;
                                                int a9 = greyPawnsEllipse[k].y2;
                                                
                                                boxes[j][i].clear = FALSE;
                                                boxes[greyPawnsBase[k].posY/100][greyPawnsBase[k].posX/100].clear = TRUE;

                                                greyPawnsBase[k].posY = j*100;

                                                greyPawnsEllipse[k].x1 = i*100 + 40;
                                                greyPawnsEllipse[k].y1 = j*100 + 40;
                                                greyPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                greyPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                greyPawnsBase[k].x1 = i*100 + 40;
                                                greyPawnsBase[k].y1 = j*100 + 60;
                                                greyPawnsBase[k].x2 = i*100 + 40 + 20;
                                                greyPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean ffff = checkCheckGrey(j, i);
                                                
                                                if(ffff) {
                                                    greyPawnsBase[k].posX = a0;
                                                    greyPawnsBase[k].posY = a1;

                                                    greyPawnsBase[k].x1 = a2;
                                                    greyPawnsBase[k].y1 = a3;

                                                    greyPawnsBase[k].x2 = a4;
                                                    greyPawnsBase[k].y2 = a5;

                                                    greyPawnsEllipse[k].x1 = a6;
                                                    greyPawnsEllipse[k].y1 = a7;

                                                    greyPawnsEllipse[k].x2 = a8;
                                                    greyPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'h';
                                                } else {
                                                    greyPawnsBase[k].firstTimeMove = FALSE;

                                                    greyPawnsBase[k].clicked = FALSE;
                                                    if(1==2) SetWindowText(hwnd, "Red move");
                                                    turnChanged = TRUE;
                                                    done = TRUE;
                                                }
                                            } else {
                                                turn = 'h';
                                            }
                                        }

                                        else if(!fail &&
                                                j*100 == greyPawnsBase[k].posY - 200 &&
                                                i*100 == greyPawnsBase[k].posX) {

                                            turn = 'r';

                                            boolean cant = FALSE;
                                            for(int s=0; s<8; s++) {
                                                if(greyPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY + 100 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(greyPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY + 200 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY + 100 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY + 200 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                            }
                                            if(!cant) {

                                                int a0 = greyPawnsBase[k].posX;
                                                int a1 = greyPawnsBase[k].posY;
                                                
                                                int a2 = greyPawnsBase[k].x1;
                                                int a3 = greyPawnsBase[k].y1;
                                                
                                                int a4 = greyPawnsBase[k].x2;
                                                int a5 = greyPawnsBase[k].y2;
                                                
                                                int a6 = greyPawnsEllipse[k].x1;
                                                int a7 = greyPawnsEllipse[k].y1;
                                                
                                                int a8 = greyPawnsEllipse[k].x2;
                                                int a9 = greyPawnsEllipse[k].y2;
                                                
                                                greyPawnsBase[k].posX = a0;
                                                greyPawnsBase[k].posY = a1;

                                                greyPawnsBase[k].x1 = a2;
                                                greyPawnsBase[k].y1 = a3;

                                                greyPawnsBase[k].x2 = a4;
                                                greyPawnsBase[k].y2 = a5;

                                                greyPawnsEllipse[k].x1 = a6;
                                                greyPawnsEllipse[k].y1 = a7;

                                                greyPawnsEllipse[k].x2 = a8;
                                                greyPawnsEllipse[k].y2 = a9;

                                                boxes[j][i].clear = FALSE;
                                                boxes[greyPawnsBase[k].posY/100][greyPawnsBase[k].posX/100].clear = TRUE;

                                                greyPawnsBase[k].posY = j*100;

                                                greyPawnsEllipse[k].x1 = i*100 + 40;
                                                greyPawnsEllipse[k].y1 = j*100 + 40;
                                                greyPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                greyPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                greyPawnsBase[k].x1 = i*100 + 40;
                                                greyPawnsBase[k].y1 = j*100 + 60;
                                                greyPawnsBase[k].x2 = i*100 + 40 + 20;
                                                greyPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean ffff = checkCheckGrey(j, i);
                                                
                                                if(ffff) {
                                                    greyPawnsBase[k].posX = a0;
                                                    greyPawnsBase[k].posY = a1;

                                                    greyPawnsBase[k].x1 = a2;
                                                    greyPawnsBase[k].y1 = a3;

                                                    greyPawnsBase[k].x2 = a4;
                                                    greyPawnsBase[k].y2 = a5;

                                                    greyPawnsEllipse[k].x1 = a6;
                                                    greyPawnsEllipse[k].y1 = a7;

                                                    greyPawnsEllipse[k].x2 = a8;
                                                    greyPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'h';
                                                } else {
                                                    greyPawnsBase[k].firstTimeMove = FALSE;

                                                    greyPawnsBase[k].clicked = FALSE;
                                                    if(1==2) SetWindowText(hwnd, "Red move");
                                                    turnChanged = TRUE;
                                                    done = TRUE;
                                                }                       
                                            } else {
                                                turn = 'h';
                                            }
                                        }

                                    } else if(clickedOne == 'g' &&
                                              greyPawnsBase[k].clicked) {

                                        boolean fail = FALSE;
                                        boolean ff = FALSE;

                                        for(int m=0; m<8; m++) {
                                            if(greyPawnsBase[m].posY == greyPawnsBase[k].posY - 100 &&
                                               (greyPawnsBase[m].posX == greyPawnsBase[k].posX + 100 || greyPawnsBase[m].posX == greyPawnsBase[k].posX - 100)) {
                                                ff = TRUE;
                                            }
                                            if(greyPawnsBase[m].posY == greyPawnsBase[k].posY - 100 &&
                                               greyPawnsBase[m].posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyPawnsBase[m].posY == greyPawnsBase[k].posY - 100 &&
                                               greyPawnsBase[m].posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop1Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop1Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop2Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop2Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyKnight2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop1Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop1Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop2Square.posY == greyPawnsBase[k].posY - 100 &&
                                               greyBishop2Square.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook1Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook1Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook2Rectangle1.posY == greyPawnsBase[k].posY - 100 &&
                                               greyRook2Rectangle1.posX == greyPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                        }
                                        
                                        if(!ff &&
                                           j*100 == greyPawnsBase[k].posY - 100 &&
                                          (i*100 == greyPawnsBase[k].posX - 100 ||
                                           i*100 == greyPawnsBase[k].posX + 100)) {

                                            turn = 'r';

                                            boolean ate = FALSE;

                                            if(1 == 1) {
                                                int a0 = greyPawnsBase[k].posX;
                                                int a1 = greyPawnsBase[k].posY;
                                                
                                                int a2 = greyPawnsBase[k].x1;
                                                int a3 = greyPawnsBase[k].y1;
                                                
                                                int a4 = greyPawnsBase[k].x2;
                                                int a5 = greyPawnsBase[k].y2;
                                                
                                                int a6 = greyPawnsEllipse[k].x1;
                                                int a7 = greyPawnsEllipse[k].y1;
                                                
                                                int a8 = greyPawnsEllipse[k].x2;
                                                int a9 = greyPawnsEllipse[k].y2;
                                                
                                                boxes[j][i].clear = FALSE;
                                                boxes[greyPawnsBase[k].posY/100][greyPawnsBase[k].posX/100].clear = TRUE;

                                                greyPawnsBase[k].posY = j*100;
                                                greyPawnsBase[k].posX = i*100;

                                                greyPawnsEllipse[k].x1 = i*100 + 40;
                                                greyPawnsEllipse[k].y1 = j*100 + 40;
                                                greyPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                greyPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                greyPawnsBase[k].x1 = i*100 + 40;
                                                greyPawnsBase[k].y1 = j*100 + 60;
                                                greyPawnsBase[k].x2 = i*100 + 40 + 20;
                                                greyPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean ffff = checkCheckGrey(j, i);
                                                
                                                if(ffff) {
                                                    greyPawnsBase[k].posX = a0;
                                                    greyPawnsBase[k].posY = a1;

                                                    greyPawnsBase[k].x1 = a2;
                                                    greyPawnsBase[k].y1 = a3;

                                                    greyPawnsBase[k].x2 = a4;
                                                    greyPawnsBase[k].y2 = a5;

                                                    greyPawnsEllipse[k].x1 = a6;
                                                    greyPawnsEllipse[k].y1 = a7;

                                                    greyPawnsEllipse[k].x2 = a8;
                                                    greyPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'h';
                                                } else {

                                                    for(int l=0; l<8; l++) {
                                                        if((redPawnsBase[l].posX == greyPawnsBase[k].posX ||
                                                            redPawnsBase[l].posX == greyPawnsBase[k].posX) && 
                                                            redPawnsBase[l].posY == j*100) {
                                                            redPawnsBase[l].posX = 1100;
                                                            redPawnsBase[l].posY = -1000;
                                                            redPawnsBase[l].x1 = -1000;
                                                            redPawnsBase[l].x2 = -1000;
                                                            redPawnsEllipse[l].x1 = -1000;
                                                            redPawnsEllipse[l].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(redQueenSquare.posX == i*100 &&
                                                       redQueenSquare.posY == j*100) {
                                                        redQueenSquare.posX = 1100;
                                                        redQueenSquare.posY = -1000;
                                                        redQueenSquare.x1 = -1000;
                                                        redQueenSquare.x2 = -1000;
                                                        redQueenBase.x1 = -1000;
                                                        redQueenBase.x2 = -1000;
                                                        redQueenEllipse.x1 = -1000;
                                                        redQueenEllipse.x2 = -1000;
                                                        redQueenRectangle1.x1 = -1000;
                                                        redQueenRectangle1.x2 = -1000;
                                                        redQueenRectangle2.x1 = -1000;
                                                        redQueenRectangle2.x2 = -1000;
                                                        redQueenRectangle3.x1 = -1000;
                                                        redQueenRectangle3.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    for(int z=0; z<8; z++) {
                                                        if(redQueenSquareK[z].posX == i*100 &&
                                                           redQueenSquareK[z].posY == j*100) {
                                                            redQueenSquareK[z].posX = 1100;
                                                            redQueenSquareK[z].x1 = -1000;
                                                            redQueenSquareK[z].x2 = -1000;
                                                            redQueenBaseK[z].x1 = -1000;
                                                            redQueenBaseK[z].x2 = -1000;
                                                            redQueenEllipseK[z].x1 = -1000;
                                                            redQueenEllipseK[z].x2 = -1000;
                                                            redQueenRectangle1K[z].x1 = -1000;
                                                            redQueenRectangle1K[z].x2 = -1000;
                                                            redQueenRectangle2K[z].x1 = -1000;
                                                            redQueenRectangle2K[z].x2 = -1000;
                                                            redQueenRectangle3K[z].x1 = -1000;
                                                            redQueenRectangle3K[z].x2 = -1000;
                                                            ate = TRUE;
                                                        }
                                                    }
                                                    if(redBishop1Square.posX == i*100 &&
                                                       redBishop1Square.posY == j*100) {
                                                        redBishop1Square.posX = 1100;
                                                        redBishop1Square.posY = -1000;
                                                        redBishop1Square.x1 = -1000;
                                                        redBishop1Square.x2 = -1000;
                                                        redBishop1Base.x1 = -1000;
                                                        redBishop1Base.x2 = -1000;
                                                        redBishop1Ellipse.x1 = -1000;
                                                        redBishop1Ellipse.x2 = -1000;
                                                        redBishop1Rectangle.x1 = -1000;
                                                        redBishop1Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redBishop2Square.posX == i*100 &&
                                                       redBishop2Square.posY == j*100) {
                                                        redBishop2Square.posX = 1100;
                                                        redBishop2Square.posY = -1000;
                                                        redBishop2Square.x1 = -1000;
                                                        redBishop2Square.x2 = -1000;
                                                        redBishop2Base.x1 = -1000;
                                                        redBishop2Base.x2 = -1000;
                                                        redBishop2Ellipse.x1 = -1000;
                                                        redBishop2Ellipse.x2 = -1000;
                                                        redBishop2Rectangle.x1 = -1000;
                                                        redBishop2Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redKnight1Rectangle1.posX == i*100 &&
                                                       redKnight1Rectangle1.posY == j*100) {
                                                        redKnight1Rectangle1.posX = 1100;
                                                        redKnight1Rectangle1.posY = -1000;
                                                        redKnight1Base.x1 = -1000;
                                                        redKnight1Base.x2 = -1000;
                                                        redKnight1Ellipse.x1 = -1000;
                                                        redKnight1Ellipse.x2 = -1000;
                                                        redKnight1Rectangle1.x1 = -1000;
                                                        redKnight1Rectangle1.x2 = -1000;
                                                        redKnight1Rectangle2.x1 = -1000;
                                                        redKnight1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redKnight2Rectangle1.posX == i*100 &&
                                                       redKnight2Rectangle1.posY == j*100) {
                                                        redKnight2Rectangle1.posX = 1100;
                                                        redKnight2Rectangle1.posY = -1000;
                                                        redKnight2Base.x1 = -1000;
                                                        redKnight2Base.x2 = -1000;
                                                        redKnight2Ellipse.x1 = -1000;
                                                        redKnight2Ellipse.x2 = -1000;
                                                        redKnight2Rectangle1.x1 = -1000;
                                                        redKnight2Rectangle1.x2 = -1000;
                                                        redKnight2Rectangle2.x1 = -1000;
                                                        redKnight2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redRook1Rectangle1.posX == i*100 &&
                                                       redRook1Rectangle1.posY == j*100) {
                                                        redRook1Rectangle1.posX = 1100;
                                                        redRook1Rectangle1.posY = -1000;
                                                        redRook1Base.x1 = -1000;
                                                        redRook1Base.x2 = -1000;
                                                        redRook1Ellipse.x1 = -1000;
                                                        redRook1Ellipse.x2 = -1000;
                                                        redRook1Rectangle1.x1 = -1000;
                                                        redRook1Rectangle1.x2 = -1000;
                                                        redRook1Rectangle2.x1 = -1000;
                                                        redRook1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(redRook2Rectangle1.posX == i*100 &&
                                                       redRook2Rectangle1.posY == j*100) {
                                                        redRook2Rectangle1.posX = 1100;
                                                        redRook2Rectangle1.posY = -1000;
                                                        redRook2Base.x1 = -1000;
                                                        redRook2Base.x2 = -1000;
                                                        redRook2Ellipse.x1 = -1000;
                                                        redRook2Ellipse.x2 = -1000;
                                                        redRook2Rectangle1.x1 = -1000;
                                                        redRook2Rectangle1.x2 = -1000;
                                                        redRook2Rectangle2.x1 = -1000;
                                                        redRook2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    
                                                    for(int u=0; u<8; u++) {
                                                        if(redPawnsBase[u].posX == greyPawnsBase[k].posX &&
                                                           redPawnsBase[u].posY == greyPawnsBase[k].posY) {
                                                            redPawnsBase[u].posX = 1100;
                                                            redPawnsBase[u].posY = -1000;
                                                            redPawnsBase[u].x1 = -1000;
                                                            redPawnsBase[u].x2 = -1000;
                                                            redPawnsEllipse[u].x1 = -1000;
                                                            redPawnsEllipse[u].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }

                                                    if(ate) {
                                                        greyPawnsBase[k].firstTimeMove = FALSE;
                                                        greyPawnsBase[k].clicked = FALSE;
                                                        if(1==2) SetWindowText(hwnd, "Red move");
                                                        turnChanged = TRUE;
                                                        done = TRUE;
                                                    } else {
                                                        greyPawnsBase[k].posX = a0;
                                                        greyPawnsBase[k].posY = a1;

                                                        greyPawnsBase[k].x1 = a2;
                                                        greyPawnsBase[k].y1 = a3;

                                                        greyPawnsBase[k].x2 = a4;
                                                        greyPawnsBase[k].y2 = a5;

                                                        greyPawnsEllipse[k].x1 = a6;
                                                        greyPawnsEllipse[k].y1 = a7;

                                                        greyPawnsEllipse[k].x2 = a8;
                                                        greyPawnsEllipse[k].y2 = a9;

                                                        turn = 'h';
                                                    }
                                                }
                                            } else {
                                                turn = 'h';
                                            }
                                        }

                                        else if(!fail &&
                                           j*100 == greyPawnsBase[k].posY - 100 &&
                                           i*100 == greyPawnsBase[k].posX) {

                                            turn = 'r';

                                            boolean cant = FALSE;
                                            for(int s=0; s<8; s++) {
                                                if(greyPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY + 100 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == greyPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY + 100 == greyPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                            }
                                            if(!cant) {

                                                int a0 = greyPawnsBase[k].posX;
                                                int a1 = greyPawnsBase[k].posY;
                                                
                                                int a2 = greyPawnsBase[k].x1;
                                                int a3 = greyPawnsBase[k].y1;
                                                
                                                int a4 = greyPawnsBase[k].x2;
                                                int a5 = greyPawnsBase[k].y2;
                                                
                                                int a6 = greyPawnsEllipse[k].x1;
                                                int a7 = greyPawnsEllipse[k].y1;
                                                
                                                int a8 = greyPawnsEllipse[k].x2;
                                                int a9 = greyPawnsEllipse[k].y2;

                                                boxes[j][i].clear = FALSE;
                                                boxes[greyPawnsBase[k].posY/100][greyPawnsBase[k].posX/100].clear = TRUE;

                                                greyPawnsBase[k].posY = j*100;

                                                greyPawnsEllipse[k].x1 = i*100 + 40;
                                                greyPawnsEllipse[k].y1 = j*100 + 40;
                                                greyPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                greyPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                greyPawnsBase[k].x1 = i*100 + 40;
                                                greyPawnsBase[k].y1 = j*100 + 60;
                                                greyPawnsBase[k].x2 = i*100 + 40 + 20;
                                                greyPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean ffff = checkCheckGrey(j, i);
                                                
                                                if(ffff) {
                                                    greyPawnsBase[k].posX = a0;
                                                    greyPawnsBase[k].posY = a1;

                                                    greyPawnsBase[k].x1 = a2;
                                                    greyPawnsBase[k].y1 = a3;

                                                    greyPawnsBase[k].x2 = a4;
                                                    greyPawnsBase[k].y2 = a5;

                                                    greyPawnsEllipse[k].x1 = a6;
                                                    greyPawnsEllipse[k].y1 = a7;

                                                    greyPawnsEllipse[k].x2 = a8;
                                                    greyPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'h';
                                                } else {
                                                    greyPawnsBase[k].clicked = FALSE;
                                                    if(1==2) SetWindowText(hwnd, "Red move");
                                                    turnChanged = TRUE;
                                                    done = TRUE;
                                                }
                                            } else {
                                                turn = 'h';
                                            }
                                        }
                                    }
                                }
                            }

                            boolean itdid = FALSE;
                            
                            if(greyKnight2Rectangle1.posX == i*100 &&
                               greyKnight2Rectangle1.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyKnight2Rectangle1.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "kw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyKnight2Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    boolean failed = FALSE;
                                    
                                    clickedOne = 'g';

                                    greyKnight2Rectangle1.clicked = FALSE;

                                    if(j*100 == greyKnight2Rectangle1.posY - 200 &&
                                       i*100 == greyKnight2Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        int a1 = greyKnight2Rectangle1.posY;
                                        int a0 = greyKnight2Rectangle1.posX;

                                        int a2 = greyKnight2Rectangle1.x1;
                                        int a3 = greyKnight2Rectangle1.x2;

                                        int a4 = greyKnight2Rectangle2.x1;
                                        int a5 = greyKnight2Rectangle2.x2;

                                        int a6 = greyKnight2Base.x1;
                                        int a7 = greyKnight2Base.x2;

                                        int a8 = greyKnight2Ellipse.x1;
                                        int a9 = greyKnight2Ellipse.x2;

                                        int a10 = greyKnight2Rectangle1.y1;
                                        int a11 = greyKnight2Rectangle1.y2;

                                        int a12 = greyKnight2Rectangle2.y1;
                                        int a13 = greyKnight2Rectangle2.y2;

                                        int a14 = greyKnight2Base.y1;
                                        int a15 = greyKnight2Base.y2;

                                        int a16 = greyKnight2Ellipse.y1;
                                        int a17 = greyKnight2Ellipse.y2;

                                        greyKnight2Rectangle1.posX = i*100;
                                        greyKnight2Rectangle1.posY = j*100;

                                        greyKnight2Rectangle1.x1 -= 100;
                                        greyKnight2Rectangle1.y1 -= 200;
                                        greyKnight2Rectangle1.x2 -= 100;
                                        greyKnight2Rectangle1.y2 -= 200;

                                        greyKnight2Rectangle2.x1 -= 100;
                                        greyKnight2Rectangle2.y1 -= 200;
                                        greyKnight2Rectangle2.x2 -= 100;
                                        greyKnight2Rectangle2.y2 -= 200;

                                        greyKnight2Base.x1 -= 100;
                                        greyKnight2Base.y1 -= 200;
                                        greyKnight2Base.x2 -= 100;
                                        greyKnight2Base.y2 -= 200;

                                        greyKnight2Ellipse.x1 -= 100;
                                        greyKnight2Ellipse.y1 -= 200;
                                        greyKnight2Ellipse.x2 -= 100;
                                        greyKnight2Ellipse.y2 -= 200;

                                        if(!failed) {

                                            boolean ffff = checkCheckGrey(j, i);

                                            if(ffff) {

                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY - 200 &&
                                              i*100 == greyKnight2Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;

                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 += 100;
                                            greyKnight2Rectangle1.y1 -= 200;
                                            greyKnight2Rectangle1.x2 += 100;
                                            greyKnight2Rectangle1.y2 -= 200;

                                            greyKnight2Rectangle2.x1 += 100;
                                            greyKnight2Rectangle2.y1 -= 200;
                                            greyKnight2Rectangle2.x2 += 100;
                                            greyKnight2Rectangle2.y2 -= 200;

                                            greyKnight2Base.x1 += 100;
                                            greyKnight2Base.y1 -= 200;
                                            greyKnight2Base.x2 += 100;
                                            greyKnight2Base.y2 -= 200;

                                            greyKnight2Ellipse.x1 += 100;
                                            greyKnight2Ellipse.y1 -= 200;
                                            greyKnight2Ellipse.x2 += 100;
                                            greyKnight2Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY - 100 &&
                                              i*100 == greyKnight2Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;

                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 -= 200;
                                            greyKnight2Rectangle1.y1 -= 100;
                                            greyKnight2Rectangle1.x2 -= 200;
                                            greyKnight2Rectangle1.y2 -= 100;

                                            greyKnight2Rectangle2.x1 -= 200;
                                            greyKnight2Rectangle2.y1 -= 100;
                                            greyKnight2Rectangle2.x2 -= 200;
                                            greyKnight2Rectangle2.y2 -= 100;

                                            greyKnight2Base.x1 -= 200;
                                            greyKnight2Base.y1 -= 100;
                                            greyKnight2Base.x2 -= 200;
                                            greyKnight2Base.y2 -= 100;

                                            greyKnight2Ellipse.x1 -= 200;
                                            greyKnight2Ellipse.y1 -= 100;
                                            greyKnight2Ellipse.x2 -= 200;
                                            greyKnight2Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckGrey(j, i);

                                            if(ffff) {
                                                
                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY + 100 &&
                                              i*100 == greyKnight2Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;

                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 -= 200;
                                            greyKnight2Rectangle1.y1 += 100;
                                            greyKnight2Rectangle1.x2 -= 200;
                                            greyKnight2Rectangle1.y2 += 100;

                                            greyKnight2Rectangle2.x1 -= 200;
                                            greyKnight2Rectangle2.y1 += 100;
                                            greyKnight2Rectangle2.x2 -= 200;
                                            greyKnight2Rectangle2.y2 += 100;

                                            greyKnight2Base.x1 -= 200;
                                            greyKnight2Base.y1 += 100;
                                            greyKnight2Base.x2 -= 200;
                                            greyKnight2Base.y2 += 100;

                                            greyKnight2Ellipse.x1 -= 200;
                                            greyKnight2Ellipse.y1 += 100;
                                            greyKnight2Ellipse.x2 -= 200;
                                            greyKnight2Ellipse.y2 += 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                
                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY + 200 &&
                                              i*100 == greyKnight2Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;

                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 -= 100;
                                            greyKnight2Rectangle1.y1 += 200;
                                            greyKnight2Rectangle1.x2 -= 100;
                                            greyKnight2Rectangle1.y2 += 200;

                                            greyKnight2Rectangle2.x1 -= 100;
                                            greyKnight2Rectangle2.y1 += 200;
                                            greyKnight2Rectangle2.x2 -= 100;
                                            greyKnight2Rectangle2.y2 += 200;

                                            greyKnight2Base.x1 -= 100;
                                            greyKnight2Base.y1 += 200;
                                            greyKnight2Base.x2 -= 100;
                                            greyKnight2Base.y2 += 200;

                                            greyKnight2Ellipse.x1 -= 100;
                                            greyKnight2Ellipse.y1 += 200;
                                            greyKnight2Ellipse.x2 -= 100;
                                            greyKnight2Ellipse.y2 += 200;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                
                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;
                                                
                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY + 200 &&
                                              i*100 == greyKnight2Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;

                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 += 100;
                                            greyKnight2Rectangle1.y1 += 200;
                                            greyKnight2Rectangle1.x2 += 100;
                                            greyKnight2Rectangle1.y2 += 200;

                                            greyKnight2Rectangle2.x1 += 100;
                                            greyKnight2Rectangle2.y1 += 200;
                                            greyKnight2Rectangle2.x2 += 100;
                                            greyKnight2Rectangle2.y2 += 200;

                                            greyKnight2Base.x1 += 100;
                                            greyKnight2Base.y1 += 200;
                                            greyKnight2Base.x2 += 100;
                                            greyKnight2Base.y2 += 200;

                                            greyKnight2Ellipse.x1 += 100;
                                            greyKnight2Ellipse.y1 += 200;
                                            greyKnight2Ellipse.x2 += 100;
                                            greyKnight2Ellipse.y2 += 200;

                                            boolean ffff = checkCheckGrey(j, i);

                                            if(ffff) {

                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY - 100 &&
                                              i*100 == greyKnight2Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;
                                            
                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 += 200;
                                            greyKnight2Rectangle1.y1 -= 100;
                                            greyKnight2Rectangle1.x2 += 200;
                                            greyKnight2Rectangle1.y2 -= 100;

                                            greyKnight2Rectangle2.x1 += 200;
                                            greyKnight2Rectangle2.y1 -= 100;
                                            greyKnight2Rectangle2.x2 += 200;
                                            greyKnight2Rectangle2.y2 -= 100;

                                            greyKnight2Base.x1 += 200;
                                            greyKnight2Base.y1 -= 100;
                                            greyKnight2Base.x2 += 200;
                                            greyKnight2Base.y2 -= 100;

                                            greyKnight2Ellipse.x1 += 200;
                                            greyKnight2Ellipse.y1 -= 100;
                                            greyKnight2Ellipse.x2 += 200;
                                            greyKnight2Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                            
                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight2Rectangle1.posY + 100 &&
                                              i*100 == greyKnight2Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight2Rectangle1.posY;
                                            int a0 = greyKnight2Rectangle1.posX;

                                            int a2 = greyKnight2Rectangle1.x1;
                                            int a3 = greyKnight2Rectangle1.x2;

                                            int a4 = greyKnight2Rectangle2.x1;
                                            int a5 = greyKnight2Rectangle2.x2;

                                            int a6 = greyKnight2Base.x1;
                                            int a7 = greyKnight2Base.x2;

                                            int a8 = greyKnight2Ellipse.x1;
                                            int a9 = greyKnight2Ellipse.x2;

                                            int a10 = greyKnight2Rectangle1.y1;
                                            int a11 = greyKnight2Rectangle1.y2;

                                            int a12 = greyKnight2Rectangle2.y1;
                                            int a13 = greyKnight2Rectangle2.y2;

                                            int a14 = greyKnight2Base.y1;
                                            int a15 = greyKnight2Base.y2;

                                            int a16 = greyKnight2Ellipse.y1;
                                            int a17 = greyKnight2Ellipse.y2;

                                            greyKnight2Rectangle1.posX = i*100;
                                            greyKnight2Rectangle1.posY = j*100;

                                            greyKnight2Rectangle1.x1 += 200;
                                            greyKnight2Rectangle1.y1 += 100;
                                            greyKnight2Rectangle1.x2 += 200;
                                            greyKnight2Rectangle1.y2 += 100;

                                            greyKnight2Rectangle2.x1 += 200;
                                            greyKnight2Rectangle2.y1 += 100;
                                            greyKnight2Rectangle2.x2 += 200;
                                            greyKnight2Rectangle2.y2 += 100;

                                            greyKnight2Base.x1 += 200;
                                            greyKnight2Base.y1 += 100;
                                            greyKnight2Base.x2 += 200;
                                            greyKnight2Base.y2 += 100;

                                            greyKnight2Ellipse.x1 += 200;
                                            greyKnight2Ellipse.y1 += 100;
                                            greyKnight2Ellipse.x2 += 200;
                                            greyKnight2Ellipse.y2 += 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                
                                                greyKnight2Rectangle1.posY = a1;
                                                greyKnight2Rectangle1.posX = a0;

                                                greyKnight2Rectangle1.x1 = a2;
                                                greyKnight2Rectangle1.x2 = a3;

                                                greyKnight2Rectangle2.x1 = a4;
                                                greyKnight2Rectangle2.x2 = a5;

                                                greyKnight2Base.x1 = a6;
                                                greyKnight2Base.x2 = a7;

                                                greyKnight2Ellipse.x1 = a8;
                                                greyKnight2Ellipse.x2 = a9;

                                                greyKnight2Rectangle1.y1 = a10;
                                                greyKnight2Rectangle1.y2 = a11;

                                                greyKnight2Rectangle2.y1 = a12;
                                                greyKnight2Rectangle2.y2 = a13;

                                                greyKnight2Base.y1 = a14;
                                                greyKnight2Base.y2 = a15;

                                                greyKnight2Ellipse.y1 = a16;
                                                greyKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    }
                                }
                            }

                            itdid = FALSE;
                            
                            if(greyKnight1Rectangle1.posX == i*100 &&
                               greyKnight1Rectangle1.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyKnight1Rectangle1.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "kw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyKnight1Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    boolean failed = FALSE;
                                    
                                    clickedOne = 'g';

                                    greyKnight1Rectangle1.clicked = FALSE;

                                    if(j*100 == greyKnight1Rectangle1.posY - 200 &&
                                       i*100 == greyKnight1Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;
                                            
                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 -= 100;
                                            greyKnight1Rectangle1.y1 -= 200;
                                            greyKnight1Rectangle1.x2 -= 100;
                                            greyKnight1Rectangle1.y2 -= 200;

                                            greyKnight1Rectangle2.x1 -= 100;
                                            greyKnight1Rectangle2.y1 -= 200;
                                            greyKnight1Rectangle2.x2 -= 100;
                                            greyKnight1Rectangle2.y2 -= 200;

                                            greyKnight1Base.x1 -= 100;
                                            greyKnight1Base.y1 -= 200;
                                            greyKnight1Base.x2 -= 100;
                                            greyKnight1Base.y2 -= 200;

                                            greyKnight1Ellipse.x1 -= 100;
                                            greyKnight1Ellipse.y1 -= 200;
                                            greyKnight1Ellipse.x2 -= 100;
                                            greyKnight1Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;
                                                
                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY - 200 &&
                                              i*100 == greyKnight1Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;
                                            
                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 += 100;
                                            greyKnight1Rectangle1.y1 -= 200;
                                            greyKnight1Rectangle1.x2 += 100;
                                            greyKnight1Rectangle1.y2 -= 200;

                                            greyKnight1Rectangle2.x1 += 100;
                                            greyKnight1Rectangle2.y1 -= 200;
                                            greyKnight1Rectangle2.x2 += 100;
                                            greyKnight1Rectangle2.y2 -= 200;

                                            greyKnight1Base.x1 += 100;
                                            greyKnight1Base.y1 -= 200;
                                            greyKnight1Base.x2 += 100;
                                            greyKnight1Base.y2 -= 200;

                                            greyKnight1Ellipse.x1 += 100;
                                            greyKnight1Ellipse.y1 -= 200;
                                            greyKnight1Ellipse.x2 += 100;
                                            greyKnight1Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY - 100 &&
                                              i*100 == greyKnight1Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;

                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 -= 200;
                                            greyKnight1Rectangle1.y1 -= 100;
                                            greyKnight1Rectangle1.x2 -= 200;
                                            greyKnight1Rectangle1.y2 -= 100;

                                            greyKnight1Rectangle2.x1 -= 200;
                                            greyKnight1Rectangle2.y1 -= 100;
                                            greyKnight1Rectangle2.x2 -= 200;
                                            greyKnight1Rectangle2.y2 -= 100;

                                            greyKnight1Base.x1 -= 200;
                                            greyKnight1Base.y1 -= 100;
                                            greyKnight1Base.x2 -= 200;
                                            greyKnight1Base.y2 -= 100;

                                            greyKnight1Ellipse.x1 -= 200;
                                            greyKnight1Ellipse.y1 -= 100;
                                            greyKnight1Ellipse.x2 -= 200;
                                            greyKnight1Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;

                                            } else {
                                            
                                                done = TRUE;

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY + 100 &&
                                              i*100 == greyKnight1Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;

                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 -= 200;
                                            greyKnight1Rectangle1.y1 += 100;
                                            greyKnight1Rectangle1.x2 -= 200;
                                            greyKnight1Rectangle1.y2 += 100;

                                            greyKnight1Rectangle2.x1 -= 200;
                                            greyKnight1Rectangle2.y1 += 100;
                                            greyKnight1Rectangle2.x2 -= 200;
                                            greyKnight1Rectangle2.y2 += 100;

                                            greyKnight1Base.x1 -= 200;
                                            greyKnight1Base.y1 += 100;
                                            greyKnight1Base.x2 -= 200;
                                            greyKnight1Base.y2 += 100;

                                            greyKnight1Ellipse.x1 -= 200;
                                            greyKnight1Ellipse.y1 += 100;
                                            greyKnight1Ellipse.x2 -= 200;
                                            greyKnight1Ellipse.y2 += 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                            
                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;

                                            } else {
                                            
                                                done = TRUE;

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY + 200 &&
                                              i*100 == greyKnight1Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;

                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 -= 100;
                                            greyKnight1Rectangle1.y1 += 200;
                                            greyKnight1Rectangle1.x2 -= 100;
                                            greyKnight1Rectangle1.y2 += 200;

                                            greyKnight1Rectangle2.x1 -= 100;
                                            greyKnight1Rectangle2.y1 += 200;
                                            greyKnight1Rectangle2.x2 -= 100;
                                            greyKnight1Rectangle2.y2 += 200;

                                            greyKnight1Base.x1 -= 100;
                                            greyKnight1Base.y1 += 200;
                                            greyKnight1Base.x2 -= 100;
                                            greyKnight1Base.y2 += 200;

                                            greyKnight1Ellipse.x1 -= 100;
                                            greyKnight1Ellipse.y1 += 200;
                                            greyKnight1Ellipse.x2 -= 100;
                                            greyKnight1Ellipse.y2 += 200;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                            
                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;
                                                
                                            } else {

                                                done = TRUE;

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY + 200 &&
                                              i*100 == greyKnight1Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;

                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 += 100;
                                            greyKnight1Rectangle1.y1 += 200;
                                            greyKnight1Rectangle1.x2 += 100;
                                            greyKnight1Rectangle1.y2 += 200;

                                            greyKnight1Rectangle2.x1 += 100;
                                            greyKnight1Rectangle2.y1 += 200;
                                            greyKnight1Rectangle2.x2 += 100;
                                            greyKnight1Rectangle2.y2 += 200;

                                            greyKnight1Base.x1 += 100;
                                            greyKnight1Base.y1 += 200;
                                            greyKnight1Base.x2 += 100;
                                            greyKnight1Base.y2 += 200;

                                            greyKnight1Ellipse.x1 += 100;
                                            greyKnight1Ellipse.y1 += 200;
                                            greyKnight1Ellipse.x2 += 100;
                                            greyKnight1Ellipse.y2 += 200;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                
                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;

                                            } else {

                                                done = TRUE;

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY - 100 &&
                                              i*100 == greyKnight1Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;

                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 += 200;
                                            greyKnight1Rectangle1.y1 -= 100;
                                            greyKnight1Rectangle1.x2 += 200;
                                            greyKnight1Rectangle1.y2 -= 100;

                                            greyKnight1Rectangle2.x1 += 200;
                                            greyKnight1Rectangle2.y1 -= 100;
                                            greyKnight1Rectangle2.x2 += 200;
                                            greyKnight1Rectangle2.y2 -= 100;

                                            greyKnight1Base.x1 += 200;
                                            greyKnight1Base.y1 -= 100;
                                            greyKnight1Base.x2 += 200;
                                            greyKnight1Base.y2 -= 100;

                                            greyKnight1Ellipse.x1 += 200;
                                            greyKnight1Ellipse.y1 -= 100;
                                            greyKnight1Ellipse.x2 += 200;
                                            greyKnight1Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                
                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;

                                            } else {

                                                done = TRUE;

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKnight1Rectangle1.posY + 100 &&
                                              i*100 == greyKnight1Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = greyKnight1Rectangle1.posY;
                                            int a0 = greyKnight1Rectangle1.posX;
                                            
                                            int a2 = greyKnight1Rectangle1.x1;
                                            int a3 = greyKnight1Rectangle1.x2;
                                            
                                            int a4 = greyKnight1Rectangle2.x1;
                                            int a5 = greyKnight1Rectangle2.x2;
                                            
                                            int a6 = greyKnight1Base.x1;
                                            int a7 = greyKnight1Base.x2;
                                            
                                            int a8 = greyKnight1Ellipse.x1;
                                            int a9 = greyKnight1Ellipse.x2;

                                            int a10 = greyKnight1Rectangle1.y1;
                                            int a11 = greyKnight1Rectangle1.y2;
                                            
                                            int a12 = greyKnight1Rectangle2.y1;
                                            int a13 = greyKnight1Rectangle2.y2;
                                            
                                            int a14 = greyKnight1Base.y1;
                                            int a15 = greyKnight1Base.y2;
                                            
                                            int a16 = greyKnight1Ellipse.y1;
                                            int a17 = greyKnight1Ellipse.y2;

                                            greyKnight1Rectangle1.posX = i*100;
                                            greyKnight1Rectangle1.posY = j*100;

                                            greyKnight1Rectangle1.x1 += 200;
                                            greyKnight1Rectangle1.y1 += 100;
                                            greyKnight1Rectangle1.x2 += 200;
                                            greyKnight1Rectangle1.y2 += 100;

                                            greyKnight1Rectangle2.x1 += 200;
                                            greyKnight1Rectangle2.y1 += 100;
                                            greyKnight1Rectangle2.x2 += 200;
                                            greyKnight1Rectangle2.y2 += 100;

                                            greyKnight1Base.x1 += 200;
                                            greyKnight1Base.y1 += 100;
                                            greyKnight1Base.x2 += 200;
                                            greyKnight1Base.y2 += 100;

                                            greyKnight1Ellipse.x1 += 200;
                                            greyKnight1Ellipse.y1 += 100;
                                            greyKnight1Ellipse.x2 += 200;
                                            greyKnight1Ellipse.y2 += 100;

                                            boolean ffff = checkCheckGrey(j, i);

                                            if(ffff) {
                                                
                                                greyKnight1Rectangle1.posY = a1;
                                                greyKnight1Rectangle1.posX = a0;

                                                greyKnight1Rectangle1.x1 = a2;
                                                greyKnight1Rectangle1.x2 = a3;

                                                greyKnight1Rectangle2.x1 = a4;
                                                greyKnight1Rectangle2.x2 = a5;

                                                greyKnight1Base.x1 = a6;
                                                greyKnight1Base.x2 = a7;

                                                greyKnight1Ellipse.x1 = a8;
                                                greyKnight1Ellipse.x2 = a9;

                                                greyKnight1Rectangle1.y1 = a10;
                                                greyKnight1Rectangle1.y2 = a11;

                                                greyKnight1Rectangle2.y1 = a12;
                                                greyKnight1Rectangle2.y2 = a13;

                                                greyKnight1Base.y1 = a14;
                                                greyKnight1Base.y2 = a15;

                                                greyKnight1Ellipse.y1 = a16;
                                                greyKnight1Ellipse.y2 = a17;

                                            } else {

                                                done = TRUE;

                                                for(int t=0; t<8; t++) {
                                                    if(redPawnsBase[t].posX == i*100 &&
                                                       redPawnsBase[t].posY == j*100) {
                                                        redPawnsBase[t].posX = 1100;
                                                        redPawnsBase[t].x1 = -1000;
                                                        redPawnsBase[t].x2 = -1000;
                                                        redPawnsEllipse[t].x1 = -1000;
                                                        redPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -100;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -100;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -100;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -100;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    }
                                }
                            }
                            
                            itdid = FALSE;
                            
                            if(greyKingSquare.posX == i*100 &&
                               greyKingSquare.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyKingSquare.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "cw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyKingSquare.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    boolean failed = FALSE;
                                    
                                    clickedOne = 'g';

                                    greyKingSquare.clicked = FALSE;

                                    if(j*100 == greyKingSquare.posY &&
                                       i*100 == greyKingSquare.posX - 200) {
                                        if(greyRook1Rectangle1.posY == 700 &&
                                           greyRook1Rectangle1.posX == 0) {
                                            if(greyKingSquare.posY == 700 &&
                                               greyKingSquare.posX == 400) {
                                                boolean isthere = FALSE;
                                                if(greyRook1Rectangle1.posX == 300 &&
                                                   greyRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook1Rectangle1.posX == 200 &&
                                                   greyRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook1Rectangle1.posX == 100 &&
                                                   greyRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 300 &&
                                                   greyRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 200 &&
                                                   greyRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 100 &&
                                                   greyRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 300 &&
                                                   redRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 200 &&
                                                   redRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 100 &&
                                                   redRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 300 &&
                                                   redRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 200 &&
                                                   redRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 100 &&
                                                   redRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 300 &&
                                                   greyBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 200 &&
                                                   greyBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 100 &&
                                                   greyBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 300 &&
                                                   greyBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 200 &&
                                                   greyBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 100 &&
                                                   greyBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 300 &&
                                                   redBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 200 &&
                                                   redBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 100 &&
                                                   redBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 300 &&
                                                   redBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 200 &&
                                                   redBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 100 &&
                                                   redBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 300 &&
                                                   greyKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 200 &&
                                                   greyKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 100 &&
                                                   greyKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 300 &&
                                                   greyKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 200 &&
                                                   greyKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 100 &&
                                                   greyKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 300 &&
                                                   redKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 200 &&
                                                   redKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 100 &&
                                                   redKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 300 &&
                                                   redKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 200 &&
                                                   redKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 100 &&
                                                   redKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 300 &&
                                                   greyQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 200 &&
                                                   greyQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 100 &&
                                                   greyQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 300 &&
                                                   redQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 200 &&
                                                   redQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 100 &&
                                                   redQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(!isthere && !greyKingMoved && !greyRook1Moved) {
                                                    greyKingSquare.posX -= 200;
                                                    greyKingSquare.x1 -= 200;
                                                    greyKingSquare.x2 -= 200;
                                                    greyKingRectangle.x1 -= 200;
                                                    greyKingRectangle.x2 -= 200;
                                                    greyKingEllipse.x1 -= 200;
                                                    greyKingEllipse.x2 -= 200;
                                                    greyKingBase.x1 -= 200;
                                                    greyKingBase.x2 -= 200;
                                                    greyRook1Rectangle1.posX += 300;
                                                    greyRook1Rectangle1.x1 += 300;
                                                    greyRook1Rectangle1.x2 += 300;
                                                    greyRook1Rectangle2.x1 += 300;
                                                    greyRook1Rectangle2.x2 += 300;
                                                    greyRook1Ellipse.x1 += 300;
                                                    greyRook1Ellipse.x2 += 300;
                                                    greyRook1Base.x1 += 300;
                                                    greyRook1Base.x2 += 300;
                                                    greyKingMoved = TRUE;
                                                    greyRook1Moved = TRUE;
                                                    turnChanged = TRUE;
                                                    turn = 'r';
                                                    done = TRUE;
                                                }
                                            }
                                        }
                                    }

                                    if(j*100 == greyKingSquare.posY &&
                                       i*100 == greyKingSquare.posX + 200) {
                                        if(greyRook2Rectangle1.posY == 700 &&
                                           greyRook2Rectangle1.posX == 700) {
                                            if(greyKingSquare.posY == 700 &&
                                               greyKingSquare.posX == 400) {
                                                boolean isthere = FALSE;
                                                if(greyRook1Rectangle1.posX == 500 &&
                                                   greyRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook1Rectangle1.posX == 600 &&
                                                   greyRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 500 &&
                                                   greyRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 600 &&
                                                   greyRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 500 &&
                                                   redRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 600 &&
                                                   redRook1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 500 &&
                                                   redRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 600 &&
                                                   redRook2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 500 &&
                                                   greyBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 600 &&
                                                   greyBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 500 &&
                                                   greyBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 600 &&
                                                   greyBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 500 &&
                                                   redBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 600 &&
                                                   redBishop1Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 500 &&
                                                   redBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 600 &&
                                                   redBishop2Square.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 500 &&
                                                   greyKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 600 &&
                                                   greyKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 500 &&
                                                   greyKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 600 &&
                                                   greyKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 500 &&
                                                   redKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 600 &&
                                                   redKnight1Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 500 &&
                                                   redKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 600 &&
                                                   redKnight2Rectangle1.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 500 &&
                                                   greyQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 600 &&
                                                   greyQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 500 &&
                                                   redQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 600 &&
                                                   redQueenSquare.posY == 700) {
                                                    isthere = TRUE;
                                                }
                                                if(!isthere && !greyKingMoved && !greyRook2Moved) {
                                                    greyKingSquare.posX += 200;
                                                    greyKingSquare.x1 += 200;
                                                    greyKingSquare.x2 += 200;
                                                    greyKingRectangle.x1 += 200;
                                                    greyKingRectangle.x2 += 200;
                                                    greyKingEllipse.x1 += 200;
                                                    greyKingEllipse.x2 += 200;
                                                    greyKingBase.x1 += 200;
                                                    greyKingBase.x2 += 200;
                                                    greyRook2Rectangle1.posX -= 200;
                                                    greyRook2Rectangle1.x1 -= 200;
                                                    greyRook2Rectangle1.x2 -= 200;
                                                    greyRook2Rectangle2.x1 -= 200;
                                                    greyRook2Rectangle2.x2 -= 200;
                                                    greyRook2Ellipse.x1 -= 200;
                                                    greyRook2Ellipse.x2 -= 200;
                                                    greyRook2Base.x1 -= 200;
                                                    greyRook2Base.x2 -= 200;
                                                    greyKingMoved = TRUE;
                                                    greyRook2Moved = TRUE;
                                                    turnChanged = TRUE;
                                                    turn = 'r';
                                                    done = TRUE;
                                                }
                                            }
                                        }
                                    }

                                    if(j*100 == greyKingSquare.posY - 100 &&
                                       i*100 == greyKingSquare.posX) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;

                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;

                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;

                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;

                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;

                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;

                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;

                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;

                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posY -= 100;
                                            
                                            greyKingSquare.y1 -= 100;
                                            greyKingSquare.y2 -= 100;
                                            
                                            greyKingRectangle.y1 -= 100;
                                            greyKingRectangle.y2 -= 100;

                                            greyKingEllipse.y1 -= 100;
                                            greyKingEllipse.y2 -= 100;

                                            greyKingBase.y1 -= 100;
                                            greyKingBase.y2 -= 100;
                                            
                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY - 100 &&
                                              i*100 == greyKingSquare.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;

                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;

                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;

                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;

                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;

                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;

                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;

                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;

                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posY -= 100;
                                            greyKingSquare.posX += 100;
                                            
                                            greyKingSquare.y1 -= 100;
                                            greyKingSquare.y2 -= 100;
                                            greyKingSquare.x1 += 100;
                                            greyKingSquare.x2 += 100;
                                            
                                            greyKingRectangle.y1 -= 100;
                                            greyKingRectangle.y2 -= 100;
                                            greyKingRectangle.x1 += 100;
                                            greyKingRectangle.x2 += 100;

                                            greyKingEllipse.y1 -= 100;
                                            greyKingEllipse.y2 -= 100;
                                            greyKingEllipse.x1 += 100;
                                            greyKingEllipse.x2 += 100;

                                            greyKingBase.y1 -= 100;
                                            greyKingBase.y2 -= 100;
                                            greyKingBase.x1 += 100;
                                            greyKingBase.x2 += 100;
                                            
                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {
                                            
                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY &&
                                              i*100 == greyKingSquare.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;

                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;

                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;

                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;

                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;

                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;

                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;

                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;

                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posX += 100;
                                            
                                            greyKingSquare.x1 += 100;
                                            greyKingSquare.x2 += 100;
                                            
                                            greyKingRectangle.x1 += 100;
                                            greyKingRectangle.x2 += 100;

                                            greyKingEllipse.x1 += 100;
                                            greyKingEllipse.x2 += 100;

                                            greyKingBase.x1 += 100;
                                            greyKingBase.x2 += 100;
                                            
                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY + 100 &&
                                              i*100 == greyKingSquare.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;

                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;

                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;

                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;

                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;

                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;

                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;

                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;

                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posX += 100;
                                            greyKingSquare.posY += 100;
                                            
                                            greyKingSquare.x1 += 100;
                                            greyKingSquare.x2 += 100;

                                            greyKingSquare.y1 += 100;
                                            greyKingSquare.y2 += 100;
                                            
                                            greyKingRectangle.x1 += 100;
                                            greyKingRectangle.x2 += 100;

                                            greyKingRectangle.y1 += 100;
                                            greyKingRectangle.y2 += 100;

                                            greyKingEllipse.x1 += 100;
                                            greyKingEllipse.x2 += 100;

                                            greyKingEllipse.y1 += 100;
                                            greyKingEllipse.y2 += 100;

                                            greyKingBase.x1 += 100;
                                            greyKingBase.x2 += 100;

                                            greyKingBase.y1 += 100;
                                            greyKingBase.y2 += 100;
                                            
                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {
                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY + 100 &&
                                              i*100 == greyKingSquare.posX) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;
                                            
                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;
                                            
                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;
                                            
                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;
                                            
                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;
                                            
                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;
                                            
                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;
                                            
                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;
                                            
                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;
                                            
                                            greyKingSquare.posY += 100;
                                            
                                            greyKingSquare.y1 += 100;
                                            greyKingSquare.y2 += 100;

                                            greyKingRectangle.y1 += 100;
                                            greyKingRectangle.y2 += 100;

                                            greyKingEllipse.y1 += 100;
                                            greyKingEllipse.y2 += 100;

                                            greyKingBase.y1 += 100;
                                            greyKingBase.y2 += 100;
                                            
                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY + 100 &&
                                              i*100 == greyKingSquare.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;
                                            
                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;
                                            
                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;
                                            
                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;
                                            
                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;
                                            
                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;
                                            
                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;
                                            
                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;
                                            
                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posX -= 100;
                                            greyKingSquare.posY += 100;
                                            
                                            greyKingSquare.y2 += 100;
                                            greyKingSquare.x2 -= 100;
                                            greyKingSquare.x1 -= 100;
                                            greyKingSquare.y1 += 100;

                                            greyKingRectangle.y2 += 100;
                                            greyKingRectangle.x2 -= 100;
                                            greyKingRectangle.x1 -= 100;
                                            greyKingRectangle.y1 += 100;

                                            greyKingEllipse.y2 += 100;
                                            greyKingEllipse.x2 -= 100;
                                            greyKingEllipse.x1 -= 100;
                                            greyKingEllipse.y1 += 100;

                                            greyKingBase.y2 += 100;
                                            greyKingBase.x2 -= 100;
                                            greyKingBase.x1 -= 100;
                                            greyKingBase.y1 += 100;
                                            
                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY &&
                                              i*100 == greyKingSquare.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;
                                            
                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;
                                            
                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;
                                            
                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;
                                            
                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;
                                            
                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;
                                            
                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;
                                            
                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;
                                            
                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posX -= 100;
                                            
                                            greyKingRectangle.x1 -= 100;
                                            greyKingRectangle.x2 -= 100;

                                            greyKingBase.x1 -= 100;
                                            greyKingBase.x2 -= 100;

                                            greyKingEllipse.x1 -= 100;
                                            greyKingEllipse.x2 -= 100;

                                            greyKingSquare.x1 -= 100;
                                            greyKingSquare.x2 -= 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == greyKingSquare.posY - 100 &&
                                              i*100 == greyKingSquare.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(greyPawnsBase[t].posX == i*100 &&
                                               greyPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(greyQueenSquare.posX == i*100 &&
                                           greyQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop1Square.posX == i*100 &&
                                           greyBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyBishop2Square.posX == i*100 &&
                                           greyBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight1Rectangle1.posX == i*100 &&
                                           greyKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKnight2Rectangle1.posX == i*100 &&
                                           greyKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook1Rectangle1.posX == i*100 &&
                                           greyRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyRook2Rectangle1.posX == i*100 &&
                                           greyRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            
                                            int a1 = greyKingSquare.posY;
                                            int a0 = greyKingSquare.posX;
                                            
                                            int a2 = greyKingSquare.x1;
                                            int a3 = greyKingSquare.x2;
                                            
                                            int a4 = greyKingRectangle.x1;
                                            int a5 = greyKingRectangle.x2;
                                            
                                            int a6 = greyKingEllipse.x1;
                                            int a7 = greyKingEllipse.x2;
                                            
                                            int a8 = greyKingBase.x1;
                                            int a9 = greyKingBase.x2;
                                            
                                            int a10 = greyKingSquare.y1;
                                            int a11 = greyKingSquare.y2;
                                            
                                            int a12 = greyKingRectangle.y1;
                                            int a13 = greyKingRectangle.y2;
                                            
                                            int a14 = greyKingEllipse.y1;
                                            int a15 = greyKingEllipse.y2;
                                            
                                            int a16 = greyKingBase.y1;
                                            int a17 = greyKingBase.y2;

                                            greyKingSquare.posX -= 100;
                                            greyKingSquare.posY -= 100;
                                            
                                            greyKingSquare.x1 -= 100;
                                            greyKingSquare.x2 -= 100;

                                            greyKingSquare.y1 -= 100;
                                            greyKingSquare.y2 -= 100;

                                            greyKingRectangle.x1 -= 100;
                                            greyKingRectangle.x2 -= 100;

                                            greyKingRectangle.y1 -= 100;
                                            greyKingRectangle.y2 -= 100;

                                            greyKingBase.x1 -= 100;
                                            greyKingBase.x2 -= 100;

                                            greyKingBase.y1 -= 100;
                                            greyKingBase.y2 -= 100;

                                            greyKingEllipse.x1 -= 100;
                                            greyKingEllipse.x2 -= 100;

                                            greyKingEllipse.y1 -= 100;
                                            greyKingEllipse.y2 -= 100;

                                            boolean ffff = checkCheckGrey(j, i);
                                            
                                            if(ffff) {

                                                greyKingSquare.posY = a1;
                                                greyKingSquare.posX = a0;

                                                greyKingSquare.x1 = a2;
                                                greyKingSquare.x2 = a3;

                                                greyKingRectangle.x1 = a4;
                                                greyKingRectangle.x2 = a5;

                                                greyKingEllipse.x1 = a6;
                                                greyKingEllipse.x2 = a7;

                                                greyKingBase.x1 = a8;
                                                greyKingBase.x2 = a9;

                                                greyKingSquare.y1 = a10;
                                                greyKingSquare.y2 = a11;

                                                greyKingRectangle.y1 = a12;
                                                greyKingRectangle.y2 = a13;

                                                greyKingEllipse.y1 = a14;
                                                greyKingEllipse.y2 = a15;

                                                greyKingBase.y1 = a16;
                                                greyKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if((redPawnsBase[l].posX == greyKingSquare.posX ||
                                                        redPawnsBase[l].posX == greyKingSquare.posX) && 
                                                        redPawnsBase[l].posY == j*100) {
                                                        redPawnsBase[l].posX = 1100;
                                                        redPawnsBase[l].posY = -1000;
                                                        redPawnsBase[l].x1 = -1000;
                                                        redPawnsBase[l].x2 = -1000;
                                                        redPawnsEllipse[l].x1 = -1000;
                                                        redPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(redQueenSquare.posX == i*100 &&
                                                   redQueenSquare.posY == j*100) {
                                                    redQueenSquare.posX = 1100;
                                                    redQueenSquare.posY = -1000;
                                                    redQueenSquare.x1 = -1000;
                                                    redQueenSquare.x2 = -1000;
                                                    redQueenBase.x1 = -1000;
                                                    redQueenBase.x2 = -1000;
                                                    redQueenEllipse.x1 = -1000;
                                                    redQueenEllipse.x2 = -1000;
                                                    redQueenRectangle1.x1 = -1000;
                                                    redQueenRectangle1.x2 = -1000;
                                                    redQueenRectangle2.x1 = -1000;
                                                    redQueenRectangle2.x2 = -1000;
                                                    redQueenRectangle3.x1 = -1000;
                                                    redQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(redQueenSquareK[z].posX == i*100 &&
                                                       redQueenSquareK[z].posY == j*100) {
                                                        redQueenSquareK[z].posX = 1100;
                                                        redQueenSquareK[z].x1 = -1000;
                                                        redQueenSquareK[z].x2 = -1000;
                                                        redQueenBaseK[z].x1 = -1000;
                                                        redQueenBaseK[z].x2 = -1000;
                                                        redQueenEllipseK[z].x1 = -1000;
                                                        redQueenEllipseK[z].x2 = -1000;
                                                        redQueenRectangle1K[z].x1 = -1000;
                                                        redQueenRectangle1K[z].x2 = -1000;
                                                        redQueenRectangle2K[z].x1 = -1000;
                                                        redQueenRectangle2K[z].x2 = -1000;
                                                        redQueenRectangle3K[z].x1 = -1000;
                                                        redQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(redBishop1Square.posX == i*100 &&
                                                   redBishop1Square.posY == j*100) {
                                                    redBishop1Square.posX = 1100;
                                                    redBishop1Square.posY = -1000;
                                                    redBishop1Square.x1 = -1000;
                                                    redBishop1Square.x2 = -1000;
                                                    redBishop1Base.x1 = -1000;
                                                    redBishop1Base.x2 = -1000;
                                                    redBishop1Ellipse.x1 = -1000;
                                                    redBishop1Ellipse.x2 = -1000;
                                                    redBishop1Rectangle.x1 = -1000;
                                                    redBishop1Rectangle.x2 = -1000;
                                                }
                                                if(redBishop2Square.posX == i*100 &&
                                                   redBishop2Square.posY == j*100) {
                                                    redBishop2Square.posX = 1100;
                                                    redBishop2Square.posY = -1000;
                                                    redBishop2Square.x1 = -1000;
                                                    redBishop2Square.x2 = -1000;
                                                    redBishop2Base.x1 = -1000;
                                                    redBishop2Base.x2 = -1000;
                                                    redBishop2Ellipse.x1 = -1000;
                                                    redBishop2Ellipse.x2 = -1000;
                                                    redBishop2Rectangle.x1 = -1000;
                                                    redBishop2Rectangle.x2 = -1000;
                                                }
                                                if(redKnight1Rectangle1.posX == i*100 &&
                                                   redKnight1Rectangle1.posY == j*100) {
                                                    redKnight1Rectangle1.posX = 1100;
                                                    redKnight1Rectangle1.posY = -1000;
                                                    redKnight1Base.x1 = -1000;
                                                    redKnight1Base.x2 = -1000;
                                                    redKnight1Ellipse.x1 = -1000;
                                                    redKnight1Ellipse.x2 = -1000;
                                                    redKnight1Rectangle1.x1 = -1000;
                                                    redKnight1Rectangle1.x2 = -1000;
                                                    redKnight1Rectangle2.x1 = -1000;
                                                    redKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(redKnight2Rectangle1.posX == i*100 &&
                                                   redKnight2Rectangle1.posY == j*100) {
                                                    redKnight2Rectangle1.posX = 1100;
                                                    redKnight2Rectangle1.posY = -1000;
                                                    redKnight2Base.x1 = -1000;
                                                    redKnight2Base.x2 = -1000;
                                                    redKnight2Ellipse.x1 = -1000;
                                                    redKnight2Ellipse.x2 = -1000;
                                                    redKnight2Rectangle1.x1 = -1000;
                                                    redKnight2Rectangle1.x2 = -1000;
                                                    redKnight2Rectangle2.x1 = -1000;
                                                    redKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(redRook1Rectangle1.posX == i*100 &&
                                                   redRook1Rectangle1.posY == j*100) {
                                                    redRook1Rectangle1.posX = 1100;
                                                    redRook1Rectangle1.posY = -1000;
                                                    redRook1Base.x1 = -1000;
                                                    redRook1Base.x2 = -1000;
                                                    redRook1Ellipse.x1 = -1000;
                                                    redRook1Ellipse.x2 = -1000;
                                                    redRook1Rectangle1.x1 = -1000;
                                                    redRook1Rectangle1.x2 = -1000;
                                                    redRook1Rectangle2.x1 = -1000;
                                                    redRook1Rectangle2.x2 = -1000;
                                                }
                                                if(redRook2Rectangle1.posX == i*100 &&
                                                   redRook2Rectangle1.posY == j*100) {
                                                    redRook2Rectangle1.posX = 1100;
                                                    redRook2Rectangle1.posY = -1000;
                                                    redRook2Base.x1 = -1000;
                                                    redRook2Base.x2 = -1000;
                                                    redRook2Ellipse.x1 = -1000;
                                                    redRook2Ellipse.x2 = -1000;
                                                    redRook2Rectangle1.x1 = -1000;
                                                    redRook2Rectangle1.x2 = -1000;
                                                    redRook2Rectangle2.x1 = -1000;
                                                    redRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(redPawnsBase[u].posX == greyKingSquare.posX &&
                                                       redPawnsBase[u].posY == greyKingSquare.posY + 100) {
                                                        redPawnsBase[u].posX = 1100;
                                                        redPawnsBase[u].posY = -1000;
                                                        redPawnsBase[u].x1 = -1000;
                                                        redPawnsBase[u].x2 = -1000;
                                                        redPawnsEllipse[u].x1 = -1000;
                                                        redPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Red move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                greyKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    }
                                }
                            }

                            boolean changeii = FALSE;
                            
                            for(int z=0; z<8; z++) {
                                if(greyPawnsBase[z].posY == 0) {
                                    strncpy(chosenPiece, "qw", 2);
                                    changeii = TRUE;
                                    int x = greyPawnsBase[z].posX;
                                    int y = greyPawnsBase[z].posY;
                                    greyQueenSquareK[z].posX = x;
                                    greyQueenSquareK[z].posY = y;
                                    
                                    greyQueenSquareK[z].x1 = x+0+20+10-5+3;
                                    greyQueenSquareK[z].y1 = 30;
                                    greyQueenSquareK[z].x2 = x+0+40+20+10-5+3;
                                    greyQueenSquareK[z].y2 = 50;
                                    greyQueenRectangle1K[z].x1 = x+0+35-5-5+3;
                                    greyQueenRectangle1K[z].y1 = 15;
                                    greyQueenRectangle1K[z].x2 = x+0+40+5-5-5+3;
                                    greyQueenRectangle1K[z].y2 = 50;
                                    greyQueenRectangle2K[z].x1 = x+0+35+13-5+3;
                                    greyQueenRectangle2K[z].y1 = 15;
                                    greyQueenRectangle2K[z].x2 = x+0+40+5+13-5+3;
                                    greyQueenRectangle2K[z].y2 = 50;
                                    greyQueenRectangle3K[z].x1 = x+0+35+30-5+3;
                                    greyQueenRectangle3K[z].y1 = 15;
                                    greyQueenRectangle3K[z].x2 = x+0+40+5+30-5+3;
                                    greyQueenRectangle3K[z].y2 = 50;
                                    greyQueenEllipseK[z].x1 = x+0+30+10;
                                    greyQueenEllipseK[z].y1 = 50;
                                    greyQueenEllipseK[z].x2 = x+0+30+20+10;
                                    greyQueenEllipseK[z].y2 = 70;
                                    greyQueenBaseK[z].x1 = x+0+30+10;
                                    greyQueenBaseK[z].y1 = 70;
                                    greyQueenBaseK[z].x2 = x+0+30+20+10;
                                    greyQueenBaseK[z].y2 = 100;

                                    greyPawnsBase[z].posX = 1100;
                                    greyPawnsBase[z].posY = -1000;
                                    greyPawnsBase[z].x1 = -1000;
                                    greyPawnsBase[z].x2 = -1000;
                                    greyPawnsEllipse[z].x1 = -1000;
                                    greyPawnsEllipse[z].x2 = -1000;
                                    
                                    turn = 'r';
                                    SetWindowText(hwnd, "Red move");
                                }
                            }

                            itdid = FALSE;
                            
                            if(greyQueenSquare.posX == i*100 &&
                               greyQueenSquare.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyQueenSquare.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "qw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyQueenSquare.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'g';
                                    greyQueenSquare.clicked = FALSE;

                                    int a1 = greyQueenSquare.posY;
                                    int a0 = greyQueenSquare.posX;

                                    int a2 = greyQueenSquare.x1;
                                    int a3 = greyQueenSquare.x2;

                                    int a4 = greyQueenRectangle1.x1;
                                    int a5 = greyQueenRectangle1.x2;

                                    int a6 = greyQueenRectangle2.x1;
                                    int a7 = greyQueenRectangle2.x2;

                                    int a8 = greyQueenRectangle3.x1;
                                    int a9 = greyQueenRectangle3.x2;

                                    int a10 = greyQueenEllipse.x1;
                                    int a11 = greyQueenEllipse.x2;

                                    int a12 = greyQueenBase.x1;
                                    int a13 = greyQueenBase.x2;

                                    int a14 = greyQueenSquare.y1;
                                    int a15 = greyQueenSquare.y2;

                                    int a16 = greyQueenRectangle1.y1;
                                    int a17 = greyQueenRectangle1.y2;

                                    int a18 = greyQueenRectangle2.y1;
                                    int a19 = greyQueenRectangle2.y2;

                                    int a20 = greyQueenRectangle3.y1;
                                    int a21 = greyQueenRectangle3.y2;

                                    int a22 = greyQueenEllipse.y1;
                                    int a23 = greyQueenEllipse.y2;

                                    int a24 = greyQueenBase.y1;
                                    int a25 = greyQueenBase.y2;

                                    boxes[greyQueenSquare.posY/100][greyQueenSquare.posX/100].clear = TRUE;
                                    boolean f = FALSE;
                                    
                                    greyQueenSquare.failedpath = FALSE;

                                    if(i*100 == greyQueenSquare.posX) {
                                        f = moveGreyQueen(msg, j, i, j*100 - greyQueenSquare.posY, j*100 - greyQueenSquare.posY);
                                        f = greyQueenSquare.failedpath;
                                    } else if(j*100 == greyQueenSquare.posY) {
                                        f = moveGreyQueenSide(msg, j, i, i*100 - greyQueenSquare.posX, i*100 - greyQueenSquare.posX);
                                        f = greyQueenSquare.failedpath;
                                    } else if(i*100 != greyQueenSquare.posX &&
                                       j*100 != greyQueenSquare.posY) {
                                        f = moveGreyQueenDiagonally(msg, j, i, j*100 - greyQueenSquare.posY, i*100 - greyQueenSquare.posX, j*100 - greyQueenSquare.posY, i*100 - greyQueenSquare.posX);
                                        f = greyQueenSquare.failedpath;
                                    }

                                    boolean fff = checkCheckGrey(j, i);

                                    if(f || fff) {

                                        greyQueenSquare.posY = a1;
                                        greyQueenSquare.posX = a0;

                                        greyQueenSquare.x1 = a2;
                                        greyQueenSquare.x2 = a3;

                                        greyQueenRectangle1.x1 = a4;
                                        greyQueenRectangle1.x2 = a5;

                                        greyQueenRectangle2.x1 = a6;
                                        greyQueenRectangle2.x2 = a7;

                                        greyQueenRectangle3.x1 = a8;
                                        greyQueenRectangle3.x2 = a9;

                                        greyQueenEllipse.x1 = a10;
                                        greyQueenEllipse.x2 = a11;

                                        greyQueenBase.x1 = a12;
                                        greyQueenBase.x2 = a13;

                                        greyQueenSquare.y1 = a14;
                                        greyQueenSquare.y2 = a15;

                                        greyQueenRectangle1.y1 = a16;
                                        greyQueenRectangle1.y2 = a17;

                                        greyQueenRectangle2.y1 = a18;
                                        greyQueenRectangle2.y2 = a19;

                                        greyQueenRectangle3.y1 = a20;
                                        greyQueenRectangle3.y2 = a21;

                                        greyQueenEllipse.y1 = a22;
                                        greyQueenEllipse.y2 = a23;

                                        greyQueenBase.y1 = a24;
                                        greyQueenBase.y2 = a25;

                                        turn = 'h';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        boxes[j][i].clear = FALSE;
                                        turn = 'r';
                                        if(1==2) SetWindowText(hwnd, "Red move");
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    
                                    itdid = FALSE;
                                }
                            }

                            for(int z=0; z<8; z++) {

                                itdid = FALSE;

                                if(changeii == FALSE &&
                                   greyQueenSquareK[z].posX == i*100 &&
                                   greyQueenSquareK[z].posY == j*100) {

                                    clickedOne = 'h';
                                    greyQueenSquareK[z].clicked = TRUE;
                                    turn = 'h';
                                    strncpy(chosenPiece, "qw", 2);
                                } else if(clickedOne == 'h' &&
                                          greyQueenSquareK[z].clicked == TRUE) {
                                    itdid = TRUE;
                                }

                                if(boxes[j][i].clicked == TRUE) {

                                    if(itdid && changeii == FALSE) {

                                        clickedOne = 'h';
                                        greyQueenSquareK[z].clicked = FALSE;

                                        int a1 = greyQueenSquareK[z].posY;
                                        int a0 = greyQueenSquareK[z].posX;

                                        int a2 = greyQueenSquareK[z].x1;
                                        int a3 = greyQueenSquareK[z].x2;

                                        int a4 = greyQueenRectangle1K[z].x1;
                                        int a5 = greyQueenRectangle1K[z].x2;

                                        int a6 = greyQueenRectangle2K[z].x1;
                                        int a7 = greyQueenRectangle2K[z].x2;

                                        int a8 = greyQueenRectangle3K[z].x1;
                                        int a9 = greyQueenRectangle3K[z].x2;

                                        int a10 = greyQueenEllipseK[z].x1;
                                        int a11 = greyQueenEllipseK[z].x2;

                                        int a12 = greyQueenBaseK[z].x1;
                                        int a13 = greyQueenBaseK[z].x2;

                                        int a14 = greyQueenSquareK[z].y1;
                                        int a15 = greyQueenSquareK[z].y2;

                                        int a16 = greyQueenRectangle1K[z].y1;
                                        int a17 = greyQueenRectangle1K[z].y2;

                                        int a18 = greyQueenRectangle2K[z].y1;
                                        int a19 = greyQueenRectangle2K[z].y2;

                                        int a20 = greyQueenRectangle3K[z].y1;
                                        int a21 = greyQueenRectangle3K[z].y2;

                                        int a22 = greyQueenEllipseK[z].y1;
                                        int a23 = greyQueenEllipseK[z].y2;

                                        int a24 = greyQueenBaseK[z].y1;
                                        int a25 = greyQueenBaseK[z].y2;

                                        boolean f = FALSE;

                                        greyQueenSquareK[z].failedpath = FALSE;

                                        if(i*100 == greyQueenSquareK[z].posX) {
                                            f = moveGreyQueenK(msg, j, i, j*100 - greyQueenSquareK[z].posY, j*100 - greyQueenSquareK[z].posY, z);
                                            f = greyQueenSquareK[z].failedpath;
                                        } else if(j*100 == greyQueenSquareK[z].posY) {
                                            f = moveGreyQueenSideK(msg, j, i, i*100 - greyQueenSquareK[z].posX, i*100 - greyQueenSquareK[z].posX, z);
                                            f = greyQueenSquareK[z].failedpath;
                                        } else if(i*100 != greyQueenSquareK[z].posX &&
                                           j*100 != greyQueenSquareK[z].posY) {
                                            if(j*100 - greyQueenSquareK[z].posY == i*100 - greyQueenSquareK[z].posX ||
                                               j*100 - greyQueenSquareK[z].posY == -1 * (i*100 - greyQueenSquareK[z].posX)) {
                                                f = moveGreyQueenDiagonallyK(msg, j, i, j*100 - greyQueenSquareK[z].posY, i*100 - greyQueenSquareK[z].posX, j*100 - greyQueenSquareK[z].posY, i*100 - greyQueenSquareK[z].posX, z);
                                                f = greyQueenSquareK[z].failedpath;
                                            } else {
                                                f = greyQueenSquareK[z].failedpath = TRUE;
                                            }
                                        }
                                        
                                        boolean fff = checkCheckGrey(j, i);

                                        if(f || fff) {

                                            greyQueenSquareK[z].posY = a1;
                                            greyQueenSquareK[z].posX = a0;

                                            greyQueenSquareK[z].x1 = a2;
                                            greyQueenSquareK[z].x2 = a3;

                                            greyQueenRectangle1K[z].x1 = a4;
                                            greyQueenRectangle1K[z].x2 = a5;

                                            greyQueenRectangle2K[z].x1 = a6;
                                            greyQueenRectangle2K[z].x2 = a7;

                                            greyQueenRectangle3K[z].x1 = a8;
                                            greyQueenRectangle3K[z].x2 = a9;

                                            greyQueenEllipseK[z].x1 = a10;
                                            greyQueenEllipseK[z].x2 = a11;

                                            greyQueenBaseK[z].x1 = a12;
                                            greyQueenBaseK[z].x2 = a13;

                                            greyQueenSquareK[z].y1 = a14;
                                            greyQueenSquareK[z].y2 = a15;

                                            greyQueenRectangle1K[z].y1 = a16;
                                            greyQueenRectangle1K[z].y2 = a17;

                                            greyQueenRectangle2K[z].y1 = a18;
                                            greyQueenRectangle2K[z].y2 = a19;

                                            greyQueenRectangle3K[z].y1 = a20;
                                            greyQueenRectangle3K[z].y2 = a21;

                                            greyQueenEllipseK[z].y1 = a22;
                                            greyQueenEllipseK[z].y2 = a23;

                                            greyQueenBaseK[z].y1 = a24;
                                            greyQueenBaseK[z].y2 = a25;

                                            turn = 'h';
                                        }

                                        else {
                                            for(int a=0; a<8; a++) {
                                                greyPawnsBase[a].clicked = FALSE;
                                            }
                                            for(int a=0; a<8; a++) {
                                                greyPawnsBase[a].clicked = FALSE;
                                            }
                                            boxes[j][i].clear = FALSE;
                                            turn = 'r';
                                            if(1==2) SetWindowText(hwnd, "Red move");
                                            turnChanged = TRUE;
                                            done = TRUE;
                                        }

                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }

                                        itdid = FALSE;
                                    }
                                }
                            }

                            itdid = FALSE;
                            
                            if(greyBishop1Square.posX == i*100 &&
                               greyBishop1Square.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyBishop1Square.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "bw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyBishop1Square.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'g';
                                    greyBishop1Square.clicked = FALSE;

                                    int a1 = greyBishop1Square.posY;
                                    int a0 = greyBishop1Square.posX;

                                    int a2 = greyBishop1Square.x1;
                                    int a3 = greyBishop1Square.x2;

                                    int a4 = greyBishop1Rectangle.x1;
                                    int a5 = greyBishop1Rectangle.x2;

                                    int a6 = greyBishop1Ellipse.x1;
                                    int a7 = greyBishop1Ellipse.x2;

                                    int a8 = greyBishop1Base.x1;
                                    int a9 = greyBishop1Base.x2;

                                    int a10 = greyBishop1Square.y1;
                                    int a11 = greyBishop1Square.y2;

                                    int a12 = greyBishop1Rectangle.y1;
                                    int a13 = greyBishop1Rectangle.y2;

                                    int a14 = greyBishop1Ellipse.y1;
                                    int a15 = greyBishop1Ellipse.y2;

                                    int a16 = greyBishop1Base.y1;
                                    int a17 = greyBishop1Base.y2;

                                    boolean f = FALSE;

                                    greyBishop1Square.failedpath = FALSE;

                                    if(i*100 != greyBishop1Square.posX &&
                                       j*100 != greyBishop1Square.posY) {
                                        f = moveGreyBishop1(msg, j, i, j*100 - greyBishop1Square.posY, i*100 - greyBishop1Square.posX, j*100 - greyBishop1Square.posY, i*100 - greyBishop1Square.posX);
                                        f = greyBishop1Square.failedpath;
                                    } else {
                                        f = greyBishop1Square.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckGrey(j, i);
                                    
                                    if(f || fff) {

                                        greyBishop1Square.posY = a1;
                                        greyBishop1Square.posX = a0;

                                        greyBishop1Square.x1 = a2;
                                        greyBishop1Square.x2 = a3;

                                        greyBishop1Rectangle.x1 = a4;
                                        greyBishop1Rectangle.x2 = a5;

                                        greyBishop1Ellipse.x1 = a6;
                                        greyBishop1Ellipse.x2 = a7;

                                        greyBishop1Base.x1 = a8;
                                        greyBishop1Base.x2 = a9;

                                        greyBishop1Square.y1 = a10;
                                        greyBishop1Square.y2 = a11;

                                        greyBishop1Rectangle.y1 = a12;
                                        greyBishop1Rectangle.y2 = a13;

                                        greyBishop1Ellipse.y1 = a14;
                                        greyBishop1Ellipse.y2 = a15;

                                        greyBishop1Base.y1 = a16;
                                        greyBishop1Base.y2 = a17;

                                        turn = 'h';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        boxes[j][i].clear = FALSE;
                                        turn = 'r';
                                        if(1==2) SetWindowText(hwnd, "Red move");
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }

                                    itdid = FALSE;
                                }
                            }

                            itdid = FALSE;
                            
                            if(greyBishop2Square.posX == i*100 &&
                               greyBishop2Square.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyBishop2Square.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "bw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyBishop2Square.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'g';
                                    greyBishop2Square.clicked = FALSE;

                                    int a1 = greyBishop2Square.posY;
                                    int a0 = greyBishop2Square.posX;

                                    int a2 = greyBishop2Square.x1;
                                    int a3 = greyBishop2Square.x2;

                                    int a4 = greyBishop2Rectangle.x1;
                                    int a5 = greyBishop2Rectangle.x2;

                                    int a6 = greyBishop2Ellipse.x1;
                                    int a7 = greyBishop2Ellipse.x2;

                                    int a8 = greyBishop2Base.x1;
                                    int a9 = greyBishop2Base.x2;

                                    int a10 = greyBishop2Square.y1;
                                    int a11 = greyBishop2Square.y2;

                                    int a12 = greyBishop2Rectangle.y1;
                                    int a13 = greyBishop2Rectangle.y2;

                                    int a14 = greyBishop2Ellipse.y1;
                                    int a15 = greyBishop2Ellipse.y2;

                                    int a16 = greyBishop2Base.y1;
                                    int a17 = greyBishop2Base.y2;

                                    boolean f = FALSE;

                                    greyBishop2Square.failedpath = FALSE;
                                    
                                    if(i*100 != greyBishop2Square.posX &&
                                       j*100 != greyBishop2Square.posY) {
                                        f = moveGreyBishop2(msg, j, i, j*100 - greyBishop2Square.posY, i*100 - greyBishop2Square.posX, j*100 - greyBishop2Square.posY, i*100 - greyBishop2Square.posX);
                                        f = greyBishop2Square.failedpath;
                                    } else {
                                        f = greyBishop2Square.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckGrey(j, i);

                                    if(f || fff) {
                                        
                                        greyBishop2Square.posY = a1;
                                        greyBishop2Square.posX = a0;

                                        greyBishop2Square.x1 = a2;
                                        greyBishop2Square.x2 = a3;

                                        greyBishop2Rectangle.x1 = a4;
                                        greyBishop2Rectangle.x2 = a5;

                                        greyBishop2Ellipse.x1 = a6;
                                        greyBishop2Ellipse.x2 = a7;

                                        greyBishop2Base.x1 = a8;
                                        greyBishop2Base.x2 = a9;

                                        greyBishop2Square.y1 = a10;
                                        greyBishop2Square.y2 = a11;

                                        greyBishop2Rectangle.y1 = a12;
                                        greyBishop2Rectangle.y2 = a13;

                                        greyBishop2Ellipse.y1 = a14;
                                        greyBishop2Ellipse.y2 = a15;

                                        greyBishop2Base.y1 = a16;
                                        greyBishop2Base.y2 = a17;

                                        turn = 'h';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        boxes[j][i].clear = FALSE;
                                        turn = 'r';
                                        if(1==2) SetWindowText(hwnd, "Red move");
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }

                                    itdid = FALSE;
                                }
                            }

                            itdid = FALSE;
                            
                            if(greyRook1Rectangle1.posX == i*100 &&
                               greyRook1Rectangle1.posY == j*100) {
                                
                                clickedOne = 'g';
                                greyRook1Rectangle1.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "rw", 2);
                            } else if(clickedOne == 'g' &&
                                      greyRook1Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'g';
                                    greyRook1Rectangle1.clicked = FALSE;

                                    int a1 = greyRook1Rectangle1.posY;
                                    int a0 = greyRook1Rectangle1.posX;

                                    int a2 = greyRook1Rectangle1.x1;
                                    int a3 = greyRook1Rectangle1.x2;

                                    int a4 = greyRook1Rectangle2.x1;
                                    int a5 = greyRook1Rectangle2.x2;

                                    int a6 = greyRook1Ellipse.x1;
                                    int a7 = greyRook1Ellipse.x2;

                                    int a8 = greyRook1Base.x1;
                                    int a9 = greyRook1Base.x2;

                                    int a10 = greyRook1Rectangle1.y1;
                                    int a11 = greyRook1Rectangle1.y2;

                                    int a12 = greyRook1Rectangle2.y1;
                                    int a13 = greyRook1Rectangle2.y2;

                                    int a14 = greyRook1Ellipse.y1;
                                    int a15 = greyRook1Ellipse.y2;

                                    int a16 = greyRook1Base.y1;
                                    int a17 = greyRook1Base.y2;

                                    boxes[greyRook1Rectangle1.posY/100][greyRook1Rectangle1.posX/100].clear = TRUE;

                                    boolean f = FALSE;

                                    greyRook1Rectangle1.failedpath = FALSE;

                                    if(i*100 == greyRook1Rectangle1.posX) {
                                        f = moveGreyRook1(msg, j, i, j*100 - greyRook1Rectangle1.posY, j*100 - greyRook1Rectangle1.posY);
                                        f = greyRook1Rectangle1.failedpath;
                                    } else if(j*100 == greyRook1Rectangle1.posY) {
                                        f = moveGreyRook1Side(msg, j, i, i*100 - greyRook1Rectangle1.posX, i*100 - greyRook1Rectangle1.posX);
                                        f = greyRook1Rectangle1.failedpath;
                                    } else {
                                        f = greyRook1Rectangle1.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckGrey(j, i);

                                    if(f || fff) {

                                        greyRook1Rectangle1.posY = a1;
                                        greyRook1Rectangle1.posX = a0;

                                        greyRook1Rectangle1.x1 = a2;
                                        greyRook1Rectangle1.x2 = a3;

                                        greyRook1Rectangle2.x1 = a4;
                                        greyRook1Rectangle2.x2 = a5;

                                        greyRook1Ellipse.x1 = a6;
                                        greyRook1Ellipse.x2 = a7;

                                        greyRook1Base.x1 = a8;
                                        greyRook1Base.x2 = a9;

                                        greyRook1Rectangle1.y1 = a10;
                                        greyRook1Rectangle1.y2 = a11;

                                        greyRook1Rectangle2.y1 = a12;
                                        greyRook1Rectangle2.y2 = a13;

                                        greyRook1Ellipse.y1 = a14;
                                        greyRook1Ellipse.y2 = a15;

                                        greyRook1Base.y1 = a16;
                                        greyRook1Base.y2 = a17;

                                        turn = 'h';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        greyQueenSquare.clicked = FALSE;
                                        greyRook2Rectangle1.clicked = FALSE;
                                        boxes[j][i].clear = FALSE;
                                        turn = 'r';
                                        if(1==2) SetWindowText(hwnd, "Red move");
                                        greyRook1Moved = TRUE;
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    greyQueenSquare.clicked = FALSE;
                                    greyRook2Rectangle1.clicked = FALSE;
                                    
                                    itdid = FALSE;
                                }
                            }

                            itdid = FALSE;
                            
                            if(greyRook2Rectangle1.posX == i*100 &&
                               greyRook2Rectangle1.posY == j*100) {
                                
                                clickedOne = 'h';
                                greyRook2Rectangle1.clicked = TRUE;
                                turn = 'h';
                                strncpy(chosenPiece, "rw", 2);
                            } else if(clickedOne == 'h' &&
                                      greyRook2Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'h';
                                    greyRook2Rectangle1.clicked = FALSE;

                                    int a1 = greyRook2Rectangle1.posY;
                                    int a0 = greyRook2Rectangle1.posX;

                                    int a2 = greyRook2Rectangle1.x1;
                                    int a3 = greyRook2Rectangle1.x2;

                                    int a4 = greyRook2Rectangle2.x1;
                                    int a5 = greyRook2Rectangle2.x2;

                                    int a6 = greyRook2Ellipse.x1;
                                    int a7 = greyRook2Ellipse.x2;

                                    int a8 = greyRook2Base.x1;
                                    int a9 = greyRook2Base.x2;

                                    int a10 = greyRook2Rectangle1.y1;
                                    int a11 = greyRook2Rectangle1.y2;

                                    int a12 = greyRook2Rectangle2.y1;
                                    int a13 = greyRook2Rectangle2.y2;

                                    int a14 = greyRook2Ellipse.y1;
                                    int a15 = greyRook2Ellipse.y2;

                                    int a16 = greyRook2Base.y1;
                                    int a17 = greyRook2Base.y2;

                                    boxes[greyRook2Rectangle1.posY/100][greyRook2Rectangle1.posX/100].clear = TRUE;

                                    boolean f = FALSE;

                                    greyRook2Rectangle1.failedpath = FALSE;

                                    if(i*100 == greyRook2Rectangle1.posX) {
                                        f = moveGreyRook2(msg, j, i, j*100 - greyRook2Rectangle1.posY, j*100 - greyRook2Rectangle1.posY);
                                        f = greyRook2Rectangle1.failedpath;
                                    } else if(j*100 == greyRook2Rectangle1.posY) {
                                        f = moveGreyRook2Side(msg, j, i, i*100 - greyRook2Rectangle1.posX, i*100 - greyRook2Rectangle1.posX);
                                        f = greyRook2Rectangle1.failedpath;
                                    } else {
                                        f = greyRook2Rectangle1.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckGrey(j, i);
                                    
                                    if(f || fff) {

                                        greyRook2Rectangle1.posY = a1;
                                        greyRook2Rectangle1.posX = a0;

                                        greyRook2Rectangle1.x1 = a2;
                                        greyRook2Rectangle1.x2 = a3;

                                        greyRook2Rectangle2.x1 = a4;
                                        greyRook2Rectangle2.x2 = a5;

                                        greyRook2Ellipse.x1 = a6;
                                        greyRook2Ellipse.x2 = a7;

                                        greyRook2Base.x1 = a8;
                                        greyRook2Base.x2 = a9;

                                        greyRook2Rectangle1.y1 = a10;
                                        greyRook2Rectangle1.y2 = a11;

                                        greyRook2Rectangle2.y1 = a12;
                                        greyRook2Rectangle2.y2 = a13;

                                        greyRook2Ellipse.y1 = a14;
                                        greyRook2Ellipse.y2 = a15;

                                        greyRook2Base.y1 = a16;
                                        greyRook2Base.y2 = a17;

                                        turn = 'h';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        greyQueenSquare.clicked = FALSE;
                                        greyRook1Rectangle1.clicked = FALSE;
                                        boxes[j][i].clear = FALSE;
                                        turn = 'r';
                                        if(1==2) SetWindowText(hwnd, "Red move");
                                        greyRook2Moved = TRUE;
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    greyQueenSquare.clicked = FALSE;
                                    greyRook1Rectangle1.clicked = FALSE;
                                    
                                    itdid = FALSE;
                                }
                            }
                        }
 
                        checkCheckRed(j, i);

                        HBRUSH rBrush;
                        rBrush = CreateSolidBrush(RGB(155, 100, 100));
                        RECT r = {i*100, j*100, i*100 + 16, j*100 + 16};
                        for(int t=0; t<8; t++) {
                            if(turn == 'r' && greyPawnsBase[t].posX == i*100 &&
                               greyPawnsBase[t].posY == j*100) {
                                if(TRUE==done) {
                                    int l1_x1 = i*100;
                                    int l1_y1 = j*100 + 8;
                                    int l1_x2 = i*100 + 8;
                                    int l1_y2 = j*100 + 16;
                                    int l2_x1 = i*100 + 8;
                                    int l2_y1 = j*100 + 16;
                                    int l2_x2 = i*100 + 16;
                                    int l2_y2 = j*100;
                                    PAINTSTRUCT pntS;
                                    HPEN pen, oldPen;
                                    
                                    						
                                    pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                    oldPen = (HPEN)SelectObject(hdc, pen);				
                                    MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                    LineTo(hdc, l1_x2, l1_y2);
                                    MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                    LineTo(hdc, l2_x2, l2_y2);
                                    SelectObject(hdc, oldPen); 
                                    DeleteObject(pen);
                                    
                                }
                            }
                        }
                        for(int t=0; t<8; t++) {
                            if(turn == 'h' && greyPawnsBase[t].posX == i*100 &&
                               greyPawnsBase[t].posY == j*100) {
                                FillRect(hdc, &r, rBrush);
                            }
                        }
                        if(turn == 'r' && greyKingSquare.posX == i*100 &&
                           greyKingSquare.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyKingSquare.posX == i*100 &&
                           greyKingSquare.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyQueenSquare.posX == i*100 &&
                           greyQueenSquare.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyQueenSquare.posX == i*100 &&
                           greyQueenSquare.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyKnight1Rectangle1.posX == i*100 &&
                           greyKnight1Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyKnight1Rectangle1.posX == i*100 &&
                           greyKnight1Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyKnight2Rectangle1.posX == i*100 &&
                           greyKnight2Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyKnight2Rectangle1.posX == i*100 &&
                           greyKnight2Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyBishop1Square.posX == i*100 &&
                           greyBishop1Square.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyBishop1Square.posX == i*100 &&
                           greyBishop1Square.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyBishop2Square.posX == i*100 &&
                           greyBishop2Square.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyBishop2Square.posX == i*100 &&
                           greyBishop2Square.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyRook1Rectangle1.posX == i*100 &&
                           greyRook1Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyRook1Rectangle1.posX == i*100 &&
                           greyRook1Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && greyRook2Rectangle1.posX == i*100 &&
                           greyRook2Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && greyRook2Rectangle1.posX == i*100 &&
                           greyRook2Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        DeleteObject(rBrush);

                        if(done) {
                            PostMessage(hwnd, WM_NOTIFY, 0, 0);
                        }
                    }
                }
            }

            break;
        }
        case WM_RBUTTONUP:
            klicked = FALSE;

            DrawChessBoard();

            Sleep(1);
            pawnBlack = (HBITMAP)LoadImage(hInst, "pawnblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            pawnWhite = (HBITMAP)LoadImage(hInst, "pawnwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knightBlack = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knightWhite = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knight2Black = (HBITMAP)LoadImage(hInst, "knightblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            knight2White = (HBITMAP)LoadImage(hInst, "knightwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rookBlack = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rookWhite = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rook2Black = (HBITMAP)LoadImage(hInst, "rookblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            rook2White = (HBITMAP)LoadImage(hInst, "rookwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishopBlack = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishopWhite = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishop2Black = (HBITMAP)LoadImage(hInst, "bishopblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            bishop2White = (HBITMAP)LoadImage(hInst, "bishopwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            queenBlack = (HBITMAP)LoadImage(hInst, "queenblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            queenWhite = (HBITMAP)LoadImage(hInst, "queenwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            kingBlack = (HBITMAP)LoadImage(hInst, "kingblack.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
            Sleep(1);
            kingWhite = (HBITMAP)LoadImage(hInst, "kingwhite.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

            //draw grey rook1
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyRook1Rectangle1.posX/100)+(greyRook1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rookWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rookWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyRook1Rectangle1.posX+25+7, greyRook1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey rook2
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyRook2Rectangle1.posX/100)+(greyRook2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rook2White,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rook2White,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyRook2Rectangle1.posX+25+7, greyRook2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight1
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyKnight1Rectangle1.posX/100)+(greyKnight1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knightWhite,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knightWhite,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyKnight1Rectangle1.posX+25+7, greyKnight1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight2
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyKnight2Rectangle1.posX/100)+(greyKnight2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knight2White,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knight2White,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyKnight2Rectangle1.posX+25+7, greyKnight2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop1
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyBishop1Square.posX/100)+(greyBishop1Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishopWhite,0x4cb122,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishopWhite,0x4cb122,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyBishop1Square.posX+25+7, greyBishop1Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop2
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyBishop2Square.posX/100)+(greyBishop2Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishop2White,0x4cb122,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishop2White,0x4cb122,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyBishop2Square.posX+25+7, greyBishop2Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey queen
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyQueenSquare.posX/100)+(greyQueenSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(queenWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(queenWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyQueenSquare.posX+25+7, greyQueenSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            //draw grey queen

            //draw grey king
            hdcMem = CreateCompatibleDC(hdc);
            if(((greyKingSquare.posX/100)+(greyKingSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(kingWhite,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(kingWhite,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, greyKingSquare.posX+25+7, greyKingSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey pawns
            for(int o=0; o<8; o++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyPawnsBase[o].posX/100)+(greyPawnsBase[o].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(pawnWhite,0x000000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(pawnWhite,0x000000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyPawnsBase[o].posX+25+7, greyPawnsBase[o].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }
            //isnt this great?!

            //draw red rook1
            hdcMem = CreateCompatibleDC(hdc);
            if(((redRook1Rectangle1.posX/100)+(redRook1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rookBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rookBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redRook1Rectangle1.posX+25+7, redRook1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw red rook2
            hdcMem = CreateCompatibleDC(hdc);
            if(((redRook2Rectangle1.posX/100)+(redRook2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(rook2Black,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(rook2Black,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redRook2Rectangle1.posX+25+7, redRook2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight1
            hdcMem = CreateCompatibleDC(hdc);
            if(((redKnight1Rectangle1.posX/100)+(redKnight1Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knightBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knightBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redKnight1Rectangle1.posX+25+7, redKnight1Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey knight2
            hdcMem = CreateCompatibleDC(hdc);
            if(((redKnight2Rectangle1.posX/100)+(redKnight2Rectangle1.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(knight2Black,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(knight2Black,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redKnight2Rectangle1.posX+25+7, redKnight2Rectangle1.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop1
            hdcMem = CreateCompatibleDC(hdc);
            if(((redBishop1Square.posX/100)+(redBishop1Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishopBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishopBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redBishop1Square.posX+25+7, redBishop1Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey bishop2
            hdcMem = CreateCompatibleDC(hdc);
            if(((redBishop2Square.posX/100)+(redBishop2Square.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(bishop2Black,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(bishop2Black,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redBishop2Square.posX+25+7, redBishop2Square.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey queen
            hdcMem = CreateCompatibleDC(hdc);
            if(((redQueenSquare.posX/100)+(redQueenSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(queenBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(queenBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redQueenSquare.posX+25+7, redQueenSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            //draw grey queen

            //draw grey king
            hdcMem = CreateCompatibleDC(hdc);
            if(((redKingSquare.posX/100)+(redKingSquare.posY/100)) % 2 == 0)
                hBmp = ReplaceColor(kingBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
            else
                hBmp = ReplaceColor(kingBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
            oldBitmap = SelectObject(hdcMem, hBmp);
            GetObject(hBmp, sizeof(bitmap), &bitmap);
            BitBlt(hdc, redKingSquare.posX+25+7, redKingSquare.posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
            SelectObject(hdcMem, oldBitmap);
            /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);

            //draw grey pawns
            for(int o=0; o<8; o++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((redPawnsBase[o].posX/100)+(redPawnsBase[o].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(pawnBlack,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(pawnBlack,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redPawnsBase[o].posX+25+7, redPawnsBase[o].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }

            //draw grey queen
            for(int m=0; m<8; m++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((greyQueenSquareK[m].posX/100)+(greyQueenSquareK[m].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(queenWhite,0xff0000,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(queenWhite,0xff0000,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, greyQueenSquareK[m].posX+25+7, greyQueenSquareK[m].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }

            //draw grey queen
            for(int m=0; m<8; m++) {
                hdcMem = CreateCompatibleDC(hdc);
                if(((redQueenSquareK[m].posX/100)+(redQueenSquareK[m].posY/100)) % 2 == 0)
                    hBmp = ReplaceColor(queenBlack,0x00ff00,0xb8d1eb,hdcMem); // replace red by white
                else
                    hBmp = ReplaceColor(queenBlack,0x00ff00,0x1a2c49,hdcMem); // replace red by beige
                oldBitmap = SelectObject(hdcMem, hBmp);
                GetObject(hBmp, sizeof(bitmap), &bitmap);
                BitBlt(hdc, redQueenSquareK[m].posX+25+7, redQueenSquareK[m].posY+25, 65, 65, hdcMem, 0, 0, SRCCOPY);
                SelectObject(hdcMem, oldBitmap);
                /*ReleaseDC(hwnd, hdc);*/ ReleaseDC(hwnd, hdcMem); DeleteDC(hdcMem); DeleteObject(hBmp);
            }
            
            DeleteObject(pawnBlack);
            DeleteObject(pawnWhite);
            DeleteObject(knightBlack);
            DeleteObject(knightWhite);
            DeleteObject(knight2Black);
            DeleteObject(knight2White);
            DeleteObject(rookBlack);
            DeleteObject(rookWhite);
            DeleteObject(rook2Black);
            DeleteObject(rook2White);
            DeleteObject(bishopBlack);
            DeleteObject(bishopWhite);
            DeleteObject(bishop2Black);
            DeleteObject(bishop2White);
            DeleteObject(queenBlack);
            DeleteObject(queenWhite);
            DeleteObject(kingBlack);
            DeleteObject(kingWhite);

            GdiFlush();

        case WM_RBUTTONDOWN:
        {
            if(msg == WM_RBUTTONDOWN)
                klicked = TRUE;

            done = FALSE;
            
            int iPosX = LOWORD(lParam);
            int iPosY = HIWORD(lParam);

            for(int j=0; j<8; j++) {
                for(int i=0; i<8; i++) {
                    if(iPosX >= i*100 &&
                       iPosY >= j*100 &&
                       iPosX < i*100+100 &&
                       iPosY < j*100+100) {
                        
                        for(int k=0; k<8; k++) {
                            for(int l=0; l<8; l++) {
                                boxes[k][l].clicked = FALSE;
                            }
                        }
                        boxes[j][i].clicked = TRUE;

                        if(turn == 'r') {

                            if(1==2) SetWindowText(hwnd, "Red move");
                            
                            for(int k=0; k<8; k++) {

                                if(redPawnsBase[k].posX == i*100 &&
                                   redPawnsBase[k].posY == j*100) {

                                    clickedOne = 'r';
                                    redPawnsBase[k].clicked = TRUE;
                                    turn = 'r';

                                    strncpy(chosenPiece, "pr", 2);

                                    for(int l=0; l<8; l++) {
                                        greyPawnsBase[l].clicked = FALSE;
                                    }

                                    for(int l=0; l<8; l++) {
                                        if(l != k) {
                                            redPawnsBase[l].clicked = FALSE;
                                        }
                                    }
                                }

                                if(boxes[j][i].clicked == TRUE) {

                                    if(clickedOne == 'r' &&
                                       redPawnsBase[k].clicked == TRUE &&
                                       redPawnsBase[k].firstTimeMove == TRUE) {

                                        boolean fail = FALSE;
                                        boolean ff = FALSE;

                                        for(int m=0; m<8; m++) {
                                            if(redPawnsBase[m].posY == redPawnsBase[k].posY + 100 &&
                                               (redPawnsBase[m].posX == redPawnsBase[k].posX + 100 || redPawnsBase[m].posX == redPawnsBase[k].posX - 100)) {
                                                ff = TRUE;
                                            }
                                            if(redPawnsBase[m].posY == redPawnsBase[k].posY + 100 &&
                                               redPawnsBase[m].posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redKnight1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redKnight1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redKnight2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redKnight2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redBishop1Square.posY == redPawnsBase[k].posY + 100 &&
                                               redBishop1Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redBishop2Square.posY == redPawnsBase[k].posY + 100 &&
                                               redBishop2Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redRook1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redRook1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redRook2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redRook2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redKnight1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redKnight1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redKnight2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redKnight2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redBishop1Square.posY == redPawnsBase[k].posY + 100 &&
                                               redBishop1Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redBishop2Square.posY == redPawnsBase[k].posY + 100 &&
                                               redBishop2Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redRook1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redRook1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(redRook2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               redRook2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                        }

                                        if(!ff &&
                                           j*100 == redPawnsBase[k].posY + 100 &&
                                          (i*100 == redPawnsBase[k].posX - 100 ||
                                           i*100 == redPawnsBase[k].posX + 100)) {

                                            turn = 'h';

                                            boolean ate = FALSE;

                                            if(1 == 1) {

                                                int a0 = redPawnsBase[k].posX;
                                                int a1 = redPawnsBase[k].posY;
                                                
                                                int a2 = redPawnsBase[k].x1;
                                                int a3 = redPawnsBase[k].y1;
                                                
                                                int a4 = redPawnsBase[k].x2;
                                                int a5 = redPawnsBase[k].y2;
                                                
                                                int a6 = redPawnsEllipse[k].x1;
                                                int a7 = redPawnsEllipse[k].y1;
                                                
                                                int a8 = redPawnsEllipse[k].x2;
                                                int a9 = redPawnsEllipse[k].y2;

                                                boxes[j][i].clear = FALSE;
                                                boxes[redPawnsBase[k].posY/100][redPawnsBase[k].posX/100].clear = TRUE;
                                                redPawnsBase[k].posY = j*100;
                                                redPawnsBase[k].posX = i*100;

                                                redPawnsEllipse[k].x1 = i*100 + 40;
                                                redPawnsEllipse[k].y1 = j*100 + 40;
                                                redPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                redPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                redPawnsBase[k].x1 = i*100 + 40;
                                                redPawnsBase[k].y1 = j*100 + 60;
                                                redPawnsBase[k].x2 = i*100 + 40 + 20;
                                                redPawnsBase[k].y2 = j*100 + 60 + 20;
                                                
                                                boolean ffff = checkCheckRed(j, i);
                                                
                                                if(ffff) {
                                                
                                                    redPawnsBase[k].posX = a0;
                                                    redPawnsBase[k].posY = a1;

                                                    redPawnsBase[k].x1 = a2;
                                                    redPawnsBase[k].y1 = a3;

                                                    redPawnsBase[k].x2 = a4;
                                                    redPawnsBase[k].y2 = a5;

                                                    redPawnsEllipse[k].x1 = a6;
                                                    redPawnsEllipse[k].y1 = a7;

                                                    redPawnsEllipse[k].x2 = a8;
                                                    redPawnsEllipse[k].y2 = a9;

                                                    turn = 'r';
                                                } else {

                                                    for(int l=0; l<8; l++) {
                                                        if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                        if((greyPawnsBase[l].posX == redPawnsBase[k].posX ||
                                                            greyPawnsBase[l].posX == redPawnsBase[k].posX) &&
                                                            greyPawnsBase[l].posY == j*100) {
                                                            greyPawnsBase[l].posX = 1100;
                                                            greyPawnsBase[l].posY = -1000;
                                                            greyPawnsBase[l].x1 = -1000;
                                                            greyPawnsBase[l].x2 = -1000;
                                                            greyPawnsEllipse[l].x1 = -1000;
                                                            greyPawnsEllipse[l].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    for(int z=0; z<8; z++) {
                                                        if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                        if(greyQueenSquareK[z].posX == i*100 &&
                                                           greyQueenSquareK[z].posY == j*100) {
                                                            greyQueenSquareK[z].posX = 1100;
                                                            greyQueenSquareK[z].posY = -1000;
                                                            greyQueenSquareK[z].x1 = -1000;
                                                            greyQueenSquareK[z].x2 = -1000;
                                                            greyQueenBaseK[z].x1 = -1000;
                                                            greyQueenBaseK[z].x2 = -1000;
                                                            greyQueenEllipseK[z].x1 = -1000;
                                                            greyQueenEllipseK[z].x2 = -1000;
                                                            greyQueenRectangle1K[z].x1 = -1000;
                                                            greyQueenRectangle1K[z].x2 = -1000;
                                                            greyQueenRectangle2K[z].x1 = -1000;
                                                            greyQueenRectangle2K[z].x2 = -1000;
                                                            greyQueenRectangle3K[z].x1 = -1000;
                                                            greyQueenRectangle3K[z].x2 = -1000;
                                                            ate = TRUE;
                                                        }
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyQueenSquare.posX == i*100 &&
                                                       greyQueenSquare.posY == j*100) {
                                                        greyQueenSquare.posX = 1100;
                                                        greyQueenSquare.posY = -1000;
                                                        greyQueenSquare.x1 = -1000;
                                                        greyQueenSquare.x2 = -1000;
                                                        greyQueenBase.x1 = -1000;
                                                        greyQueenBase.x2 = -1000;
                                                        greyQueenEllipse.x1 = -1000;
                                                        greyQueenEllipse.x2 = -1000;
                                                        greyQueenRectangle1.x1 = -1000;
                                                        greyQueenRectangle1.x2 = -1000;
                                                        greyQueenRectangle2.x1 = -1000;
                                                        greyQueenRectangle2.x2 = -1000;
                                                        greyQueenRectangle3.x1 = -1000;
                                                        greyQueenRectangle3.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyBishop1Square.posX == i*100 &&
                                                       greyBishop1Square.posY == j*100) {
                                                        greyBishop1Square.posX = 1100;
                                                        greyBishop1Square.posY = -1000;
                                                        greyBishop1Square.x1 = -1000;
                                                        greyBishop1Square.x2 = -1000;
                                                        greyBishop1Base.x1 = -1000;
                                                        greyBishop1Base.x2 = -1000;
                                                        greyBishop1Ellipse.x1 = -1000;
                                                        greyBishop1Ellipse.x2 = -1000;
                                                        greyBishop1Rectangle.x1 = -1000;
                                                        greyBishop1Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyBishop2Square.posX == i*100 &&
                                                       greyBishop2Square.posY == j*100) {
                                                        greyBishop2Square.posX = 1100;
                                                        greyBishop2Square.posY = -1000;
                                                        greyBishop2Square.x1 = -1000;
                                                        greyBishop2Square.x2 = -1000;
                                                        greyBishop2Base.x1 = -1000;
                                                        greyBishop2Base.x2 = -1000;
                                                        greyBishop2Ellipse.x1 = -1000;
                                                        greyBishop2Ellipse.x2 = -1000;
                                                        greyBishop2Rectangle.x1 = -1000;
                                                        greyBishop2Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyKnight1Rectangle1.posX == i*100 &&
                                                       greyKnight1Rectangle1.posY == j*100) {
                                                        greyKnight1Rectangle1.posX = 1100;
                                                        greyKnight1Rectangle1.posY = -1000;
                                                        greyKnight1Base.x1 = -1000;
                                                        greyKnight1Base.x2 = -1000;
                                                        greyKnight1Ellipse.x1 = -1000;
                                                        greyKnight1Ellipse.x2 = -1000;
                                                        greyKnight1Rectangle1.x1 = -1000;
                                                        greyKnight1Rectangle1.x2 = -1000;
                                                        greyKnight1Rectangle2.x1 = -1000;
                                                        greyKnight1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyKnight2Rectangle1.posX == i*100 &&
                                                       greyKnight2Rectangle1.posY == j*100) {
                                                        greyKnight2Rectangle1.posX = 1100;
                                                        greyKnight2Rectangle1.posY = -1000;
                                                        greyKnight2Base.x1 = -1000;
                                                        greyKnight2Base.x2 = -1000;
                                                        greyKnight2Ellipse.x1 = -1000;
                                                        greyKnight2Ellipse.x2 = -1000;
                                                        greyKnight2Rectangle1.x1 = -1000;
                                                        greyKnight2Rectangle1.x2 = -1000;
                                                        greyKnight2Rectangle2.x1 = -1000;
                                                        greyKnight2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyRook1Rectangle1.posX == i*100 &&
                                                       greyRook1Rectangle1.posY == j*100) {
                                                        greyRook1Rectangle1.posX = 1100;
                                                        greyRook1Rectangle1.posY = -1000;
                                                        greyRook1Base.x1 = -1000;
                                                        greyRook1Base.x2 = -1000;
                                                        greyRook1Ellipse.x1 = -1000;
                                                        greyRook1Ellipse.x2 = -1000;
                                                        greyRook1Rectangle1.x1 = -1000;
                                                        greyRook1Rectangle1.x2 = -1000;
                                                        greyRook1Rectangle2.x1 = -1000;
                                                        greyRook1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if(greyRook2Rectangle1.posX == i*100 &&
                                                       greyRook2Rectangle1.posY == j*100) {
                                                        greyRook2Rectangle1.posX = 1100;
                                                        greyRook2Rectangle1.posY = -1000;
                                                        greyRook2Base.x1 = -1000;
                                                        greyRook2Base.x2 = -1000;
                                                        greyRook2Ellipse.x1 = -1000;
                                                        greyRook2Ellipse.x2 = -1000;
                                                        greyRook2Rectangle1.x1 = -1000;
                                                        greyRook2Rectangle1.x2 = -1000;
                                                        greyRook2Rectangle2.x1 = -1000;
                                                        greyRook2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }

                                                    for(int u=0; u<8; u++) {
                                                        if(greyPawnsBase[u].posX == redPawnsBase[k].posX &&
                                                           greyPawnsBase[u].posY == redPawnsBase[k].posY) {
                                                            greyPawnsBase[u].posX = 1100;
                                                            greyPawnsBase[u].posY = -1000;
                                                            greyPawnsBase[u].x1 = -1000;
                                                            greyPawnsBase[u].x2 = -1000;
                                                            greyPawnsEllipse[u].x1 = -1000;
                                                            greyPawnsEllipse[u].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }

                                                    if(ate) {
                                                        redPawnsBase[k].firstTimeMove = FALSE;
                                                        redPawnsBase[k].clicked = FALSE;
                                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                                        turnChanged = TRUE;
                                                        done = TRUE;
                                                    } else {
                                                        redPawnsBase[k].posX = a0;
                                                        redPawnsBase[k].posY = a1;

                                                        redPawnsBase[k].x1 = a2;
                                                        redPawnsBase[k].y1 = a3;

                                                        redPawnsBase[k].x2 = a4;
                                                        redPawnsBase[k].y2 = a5;

                                                        redPawnsEllipse[k].x1 = a6;
                                                        redPawnsEllipse[k].y1 = a7;

                                                        redPawnsEllipse[k].x2 = a8;
                                                        redPawnsEllipse[k].y2 = a9;

                                                        turn = 'r';
                                                    }
                                                }
                                            } else {
                                                turn = 'r';
                                            }
                                        }

                                        else if(!fail &&
                                                j*100 == redPawnsBase[k].posY + 100 &&
                                                i*100 == redPawnsBase[k].posX) {

                                            turn = 'h';

                                            boolean cant = FALSE;
                                            for(int s=0; s<8; s++) {
                                                if(greyPawnsBase[s].posX == redPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY - 100 == redPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == redPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY - 100 == redPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                            }
                                            if(!cant) {

                                                int a0 = redPawnsBase[k].posX;
                                                int a1 = redPawnsBase[k].posY;
                                                
                                                int a2 = redPawnsBase[k].x1;
                                                int a3 = redPawnsBase[k].y1;
                                                
                                                int a4 = redPawnsBase[k].x2;
                                                int a5 = redPawnsBase[k].y2;
                                                
                                                int a6 = redPawnsEllipse[k].x1;
                                                int a7 = redPawnsEllipse[k].y1;
                                                
                                                int a8 = redPawnsEllipse[k].x2;
                                                int a9 = redPawnsEllipse[k].y2;

                                                boxes[j][i].clear = FALSE;

                                                boxes[redPawnsBase[k].posY/100][redPawnsBase[k].posX/100].clear = TRUE;
                                                redPawnsBase[k].posY = j*100;

                                                redPawnsEllipse[k].x1 = i*100 + 40;
                                                redPawnsEllipse[k].y1 = j*100 + 40;
                                                redPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                redPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                redPawnsBase[k].x1 = i*100 + 40;
                                                redPawnsBase[k].y1 = j*100 + 60;
                                                redPawnsBase[k].x2 = i*100 + 40 + 20;
                                                redPawnsBase[k].y2 = j*100 + 60 + 20;
                                                
                                                boolean ffff = checkCheckRed(j, i);
                                                
                                                if(ffff) {
                                                    redPawnsBase[k].posX = a0;
                                                    redPawnsBase[k].posY = a1;

                                                    redPawnsBase[k].x1 = a2;
                                                    redPawnsBase[k].y1 = a3;

                                                    redPawnsBase[k].x2 = a4;
                                                    redPawnsBase[k].y2 = a5;

                                                    redPawnsEllipse[k].x1 = a6;
                                                    redPawnsEllipse[k].y1 = a7;

                                                    redPawnsEllipse[k].x2 = a8;
                                                    redPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'r';
                                                } else {

                                                    redPawnsBase[k].firstTimeMove = FALSE;

                                                    redPawnsBase[k].clicked = FALSE;
                                                    if(1==2) SetWindowText(hwnd, "Grey move");
                                                    turnChanged = TRUE;
                                                    done = TRUE;
                                                }
                                            } else {
                                                turn = 'r';
                                            }
                                        }

                                        else if(!fail &&
                                                j*100 == redPawnsBase[k].posY + 200 &&
                                                i*100 == redPawnsBase[k].posX) {

                                            turn = 'h';

                                            boolean cant = FALSE;
                                            for(int s=0; s<8; s++) {
                                                if(greyPawnsBase[s].posX == redPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY - 100 == redPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == redPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY - 100 == redPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                            }
                                            if(!cant) {

                                                int a0 = redPawnsBase[k].posX;
                                                int a1 = redPawnsBase[k].posY;
                                                
                                                int a2 = redPawnsBase[k].x1;
                                                int a3 = redPawnsBase[k].y1;
                                                
                                                int a4 = redPawnsBase[k].x2;
                                                int a5 = redPawnsBase[k].y2;
                                                
                                                int a6 = redPawnsEllipse[k].x1;
                                                int a7 = redPawnsEllipse[k].y1;
                                                
                                                int a8 = redPawnsEllipse[k].x2;
                                                int a9 = redPawnsEllipse[k].y2;

                                                boxes[j][i].clear = FALSE;

                                                boxes[redPawnsBase[k].posY/100][redPawnsBase[k].posX/100].clear = TRUE;
                                                redPawnsBase[k].posY = j*100;

                                                redPawnsEllipse[k].x1 = i*100 + 40;
                                                redPawnsEllipse[k].y1 = j*100 + 40;
                                                redPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                redPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                redPawnsBase[k].x1 = i*100 + 40;
                                                redPawnsBase[k].y1 = j*100 + 60;
                                                redPawnsBase[k].x2 = i*100 + 40 + 20;
                                                redPawnsBase[k].y2 = j*100 + 60 + 20;
                                                
                                                boolean ffff = checkCheckRed(j, i);
                                                
                                                if(ffff) {
                                                    redPawnsBase[k].posX = a0;
                                                    redPawnsBase[k].posY = a1;

                                                    redPawnsBase[k].x1 = a2;
                                                    redPawnsBase[k].y1 = a3;

                                                    redPawnsBase[k].x2 = a4;
                                                    redPawnsBase[k].y2 = a5;

                                                    redPawnsEllipse[k].x1 = a6;
                                                    redPawnsEllipse[k].y1 = a7;

                                                    redPawnsEllipse[k].x2 = a8;
                                                    redPawnsEllipse[k].y2 = a9;
                                                    
                                                    turn = 'r';
                                                } else {

                                                    redPawnsBase[k].firstTimeMove = FALSE;

                                                    redPawnsBase[k].clicked = FALSE;
                                                    if(1==2) SetWindowText(hwnd, "Grey move");
                                                    turnChanged = TRUE;
                                                    done = TRUE;
                                                }
                                            }
                                        }
                                        
                                    } else if(clickedOne == 'r' &&
                                              redPawnsBase[k].clicked) {

                                        boolean fail = FALSE;
                                        boolean ff = FALSE;

                                        for(int m=0; m<8; m++) {
                                            if(redPawnsBase[m].posY == redPawnsBase[k].posY + 100 &&
                                               (redPawnsBase[m].posX == redPawnsBase[k].posX + 100 || redPawnsBase[m].posX == redPawnsBase[k].posX - 100)) {
                                                ff = TRUE;
                                            }
                                            if(greyPawnsBase[m].posY == redPawnsBase[k].posY + 100 &&
                                               greyPawnsBase[m].posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyKnight1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyKnight2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop1Square.posY == redPawnsBase[k].posY + 100 &&
                                               greyBishop1Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop2Square.posY == redPawnsBase[k].posY + 100 &&
                                               greyBishop2Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyRook1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyRook2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyKnight1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyKnight2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyKnight2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop1Square.posY == redPawnsBase[k].posY + 100 &&
                                               greyBishop1Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyBishop2Square.posY == redPawnsBase[k].posY + 100 &&
                                               greyBishop2Square.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook1Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyRook1Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                            if(greyRook2Rectangle1.posY == redPawnsBase[k].posY + 100 &&
                                               greyRook2Rectangle1.posX == redPawnsBase[k].posX) {
                                                fail = TRUE;
                                            }
                                        }

                                        if(!ff &&
                                           j*100 == redPawnsBase[k].posY + 100 &&
                                          (i*100 == redPawnsBase[k].posX - 100 ||
                                           i*100 == redPawnsBase[k].posX + 100)) {

                                            turn = 'h';

                                            boolean ate = FALSE;

                                            if(1 == 1) {

                                                int a0 = redPawnsBase[k].posX;
                                                int a1 = redPawnsBase[k].posY;
                                                
                                                int a2 = redPawnsBase[k].x1;
                                                int a3 = redPawnsBase[k].y1;
                                                
                                                int a4 = redPawnsBase[k].x2;
                                                int a5 = redPawnsBase[k].y2;
                                                
                                                int a6 = redPawnsEllipse[k].x1;
                                                int a7 = redPawnsEllipse[k].y1;
                                                
                                                int a8 = redPawnsEllipse[k].x2;
                                                int a9 = redPawnsEllipse[k].y2;

                                                boxes[redPawnsBase[k].posY/100][redPawnsBase[k].posX/100].clear = TRUE;
                                                boxes[j][i].clear = FALSE;
                                                redPawnsBase[k].posY = j*100;
                                                redPawnsBase[k].posX = i*100;

                                                redPawnsEllipse[k].x1 = i*100 + 40;
                                                redPawnsEllipse[k].y1 = j*100 + 40;
                                                redPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                redPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                redPawnsBase[k].x1 = i*100 + 40;
                                                redPawnsBase[k].y1 = j*100 + 60;
                                                redPawnsBase[k].x2 = i*100 + 40 + 20;
                                                redPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean ffff = checkCheckRed(j, i);
                                                
                                                if(ffff) {
                                                
                                                    redPawnsBase[k].posX = a0;
                                                    redPawnsBase[k].posY = a1;

                                                    redPawnsBase[k].x1 = a2;
                                                    redPawnsBase[k].y1 = a3;

                                                    redPawnsBase[k].x2 = a4;
                                                    redPawnsBase[k].y2 = a5;

                                                    redPawnsEllipse[k].x1 = a6;
                                                    redPawnsEllipse[k].y1 = a7;

                                                    redPawnsEllipse[k].x2 = a8;
                                                    redPawnsEllipse[k].y2 = a9;

                                                    turn = 'r';
                                                } else {

                                                    for(int l=0; l<8; l++) {
                                                        if(greyPawnsBase[l].posX == i*100 &&
                                                           greyPawnsBase[l].posY == j*100) {
                                                            greyPawnsBase[l].posX = 1100;
                                                            greyPawnsBase[l].posY = -1000;
                                                            greyPawnsBase[l].x1 = -1000;
                                                            greyPawnsBase[l].x2 = -1000;
                                                            greyPawnsEllipse[l].x1 = -1000;
                                                            greyPawnsEllipse[l].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }
                                                    if(greyQueenSquare.posX == i*100 &&
                                                       greyQueenSquare.posY == j*100) {
                                                        greyQueenSquare.posX = 1100;
                                                        greyQueenSquare.posY = -1000;
                                                        greyQueenSquare.x1 = -1000;
                                                        greyQueenSquare.x2 = -1000;
                                                        greyQueenBase.x1 = -1000;
                                                        greyQueenBase.x2 = -1000;
                                                        greyQueenEllipse.x1 = -1000;
                                                        greyQueenEllipse.x2 = -1000;
                                                        greyQueenRectangle1.x1 = -1000;
                                                        greyQueenRectangle1.x2 = -1000;
                                                        greyQueenRectangle2.x1 = -1000;
                                                        greyQueenRectangle2.x2 = -1000;
                                                        greyQueenRectangle3.x1 = -1000;
                                                        greyQueenRectangle3.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    for(int z=0; z<8; z++) {
                                                        if(greyQueenSquareK[z].posX == i*100 &&
                                                           greyQueenSquareK[z].posY == j*100) {
                                                            greyQueenSquareK[z].posX = 1100;
                                                            greyQueenSquareK[z].posY = -1000;
                                                            greyQueenSquareK[z].x1 = -1000;
                                                            greyQueenSquareK[z].x2 = -1000;
                                                            greyQueenBaseK[z].x1 = -1000;
                                                            greyQueenBaseK[z].x2 = -1000;
                                                            greyQueenEllipseK[z].x1 = -1000;
                                                            greyQueenEllipseK[z].x2 = -1000;
                                                            greyQueenRectangle1K[z].x1 = -1000;
                                                            greyQueenRectangle1K[z].x2 = -1000;
                                                            greyQueenRectangle2K[z].x1 = -1000;
                                                            greyQueenRectangle2K[z].x2 = -1000;
                                                            greyQueenRectangle3K[z].x1 = -1000;
                                                            greyQueenRectangle3K[z].x2 = -1000;
                                                            ate = TRUE;
                                                        }
                                                    }
                                                    if(greyBishop1Square.posX == i*100 &&
                                                       greyBishop1Square.posY == j*100) {
                                                        greyBishop1Square.posX = 1100;
                                                        greyBishop1Square.posY = -1000;
                                                        greyBishop1Square.x1 = -1000;
                                                        greyBishop1Square.x2 = -1000;
                                                        greyBishop1Base.x1 = -1000;
                                                        greyBishop1Base.x2 = -1000;
                                                        greyBishop1Ellipse.x1 = -1000;
                                                        greyBishop1Ellipse.x2 = -1000;
                                                        greyBishop1Rectangle.x1 = -1000;
                                                        greyBishop1Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(greyBishop2Square.posX == i*100 &&
                                                       greyBishop2Square.posY == j*100) {
                                                        greyBishop2Square.posX = 1100;
                                                        greyBishop2Square.posY = -1000;
                                                        greyBishop2Square.x1 = -1000;
                                                        greyBishop2Square.x2 = -1000;
                                                        greyBishop2Base.x1 = -1000;
                                                        greyBishop2Base.x2 = -1000;
                                                        greyBishop2Ellipse.x1 = -1000;
                                                        greyBishop2Ellipse.x2 = -1000;
                                                        greyBishop2Rectangle.x1 = -1000;
                                                        greyBishop2Rectangle.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(greyKnight1Rectangle1.posX == i*100 &&
                                                       greyKnight1Rectangle1.posY == j*100) {
                                                        greyKnight1Rectangle1.posX = 1100;
                                                        greyKnight1Rectangle1.posY = -1000;
                                                        greyKnight1Base.x1 = -1000;
                                                        greyKnight1Base.x2 = -1000;
                                                        greyKnight1Ellipse.x1 = -1000;
                                                        greyKnight1Ellipse.x2 = -1000;
                                                        greyKnight1Rectangle1.x1 = -1000;
                                                        greyKnight1Rectangle1.x2 = -1000;
                                                        greyKnight1Rectangle2.x1 = -1000;
                                                        greyKnight1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(greyKnight2Rectangle1.posX == i*100 &&
                                                       greyKnight2Rectangle1.posY == j*100) {
                                                        greyKnight2Rectangle1.posX = 1100;
                                                        greyKnight2Rectangle1.posY = -1000;
                                                        greyKnight2Base.x1 = -1000;
                                                        greyKnight2Base.x2 = -1000;
                                                        greyKnight2Ellipse.x1 = -1000;
                                                        greyKnight2Ellipse.x2 = -1000;
                                                        greyKnight2Rectangle1.x1 = -1000;
                                                        greyKnight2Rectangle1.x2 = -1000;
                                                        greyKnight2Rectangle2.x1 = -1000;
                                                        greyKnight2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    if(greyRook1Rectangle1.posX == i*100 &&
                                                       greyRook1Rectangle1.posY == j*100) {
                                                        greyRook1Rectangle1.posX = 1100;
                                                        greyRook1Rectangle1.posY = -1000;
                                                        greyRook1Base.x1 = -1000;
                                                        greyRook1Base.x2 = -1000;
                                                        greyRook1Ellipse.x1 = -1000;
                                                        greyRook1Ellipse.x2 = -1000;
                                                        greyRook1Rectangle1.x1 = -1000;
                                                        greyRook1Rectangle1.x2 = -1000;
                                                        greyRook1Rectangle2.x1 = -1000;
                                                        greyRook1Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    
                                                    if(greyRook2Rectangle1.posX == i*100 &&
                                                       greyRook2Rectangle1.posY == j*100) {
                                                        greyRook2Rectangle1.posX = 1100;
                                                        greyRook2Rectangle1.posY = -1000;
                                                        greyRook2Base.x1 = -1000;
                                                        greyRook2Base.x2 = -1000;
                                                        greyRook2Ellipse.x1 = -1000;
                                                        greyRook2Ellipse.x2 = -1000;
                                                        greyRook2Rectangle1.x1 = -1000;
                                                        greyRook2Rectangle1.x2 = -1000;
                                                        greyRook2Rectangle2.x1 = -1000;
                                                        greyRook2Rectangle2.x2 = -1000;
                                                        ate = TRUE;
                                                    }
                                                    
                                                    for(int u=0; u<8; u++) {
                                                        if(greyPawnsBase[u].posX == redPawnsBase[k].posX &&
                                                           greyPawnsBase[u].posY == redPawnsBase[k].posY) {
                                                            greyPawnsBase[u].posX = 1100;
                                                            greyPawnsBase[u].posY = -1000;
                                                            greyPawnsBase[u].x1 = -1000;
                                                            greyPawnsBase[u].x2 = -1000;
                                                            greyPawnsEllipse[u].x1 = -1000;
                                                            greyPawnsEllipse[u].x2 = -1000;
                                                            ate = TRUE;
                                                            break;
                                                        }
                                                    }

                                                    if(ate) {
                                                        redPawnsBase[k].clicked = FALSE;
                                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                                        turnChanged = TRUE;
                                                        done = TRUE;
                                                    } else {

                                                        redPawnsBase[k].posX = a0;
                                                        redPawnsBase[k].posY = a1;

                                                        redPawnsBase[k].x1 = a2;
                                                        redPawnsBase[k].y1 = a3;

                                                        redPawnsBase[k].x2 = a4;
                                                        redPawnsBase[k].y2 = a5;

                                                        redPawnsEllipse[k].x1 = a6;
                                                        redPawnsEllipse[k].y1 = a7;

                                                        redPawnsEllipse[k].x2 = a8;
                                                        redPawnsEllipse[k].y2 = a9;

                                                        turn = 'r';
                                                    }
                                                }
                                            } else {
                                                turn = 'r';
                                            }
                                        }

                                        else if(!fail &&
                                           j*100 == redPawnsBase[k].posY + 100 &&
                                           i*100 == redPawnsBase[k].posX) {

                                            turn = 'h';

                                            boolean cant = FALSE;
                                            for(int s=0; s<8; s++) {
                                                if(greyPawnsBase[s].posX == redPawnsBase[k].posX &&
                                                   greyPawnsBase[s].posY - 100 == redPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                                if(redPawnsBase[s].posX == redPawnsBase[k].posX &&
                                                   redPawnsBase[s].posY - 100 == redPawnsBase[k].posY) {
                                                    cant = TRUE;
                                                }
                                            }
                                            if(!cant) {

                                                int a0 = redPawnsBase[k].posX;
                                                int a1 = redPawnsBase[k].posY;
                                                
                                                int a2 = redPawnsBase[k].x1;
                                                int a3 = redPawnsBase[k].y1;
                                                
                                                int a4 = redPawnsBase[k].x2;
                                                int a5 = redPawnsBase[k].y2;
                                                
                                                int a6 = redPawnsEllipse[k].x1;
                                                int a7 = redPawnsEllipse[k].y1;
                                                
                                                int a8 = redPawnsEllipse[k].x2;
                                                int a9 = redPawnsEllipse[k].y2;

                                                boxes[redPawnsBase[k].posY/100][redPawnsBase[k].posX/100].clear = TRUE;
                                                boxes[j][i].clear = FALSE;

                                                redPawnsBase[k].posY = j*100;

                                                redPawnsEllipse[k].x1 = i*100 + 40;
                                                redPawnsEllipse[k].y1 = j*100 + 40;
                                                redPawnsEllipse[k].x2 = i*100 + 40 + 20;
                                                redPawnsEllipse[k].y2 = j*100 + 40 + 20;

                                                redPawnsBase[k].x1 = i*100 + 40;
                                                redPawnsBase[k].y1 = j*100 + 60;
                                                redPawnsBase[k].x2 = i*100 + 40 + 20;
                                                redPawnsBase[k].y2 = j*100 + 60 + 20;

                                                boolean ffff = checkCheckRed(j, i);
                                                
                                                if(ffff) {

                                                    redPawnsBase[k].posX = a0;
                                                    redPawnsBase[k].posY = a1;

                                                    redPawnsBase[k].x1 = a2;
                                                    redPawnsBase[k].y1 = a3;

                                                    redPawnsBase[k].x2 = a4;
                                                    redPawnsBase[k].y2 = a5;

                                                    redPawnsEllipse[k].x1 = a6;
                                                    redPawnsEllipse[k].y1 = a7;

                                                    redPawnsEllipse[k].x2 = a8;
                                                    redPawnsEllipse[k].y2 = a9;

                                                    turn = 'r';
                                                } else {

                                                    redPawnsBase[k].clicked = FALSE;
                                                    if(1==2) SetWindowText(hwnd, "Grey move");
                                                    turnChanged = TRUE;
                                                    done = TRUE;
                                                }
                                            } else {
                                                turn = 'r';
                                            }
                                        }
                                    }
                                }
                            }

                            boolean itdid = FALSE;
                            
                            if(redKnight1Rectangle1.posX == i*100 &&
                               redKnight1Rectangle1.posY == j*100) {
                                
                                clickedOne = 'r';
                                redKnight1Rectangle1.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "kr", 2);
                            } else if(clickedOne == 'r' &&
                                      redKnight1Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    boolean failed = FALSE;
                                    
                                    clickedOne = 'r';

                                    redKnight1Rectangle1.clicked = FALSE;

                                    if(j*100 == redKnight1Rectangle1.posY - 200 &&
                                       i*100 == redKnight1Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {
                                            
                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 -= 100;
                                            redKnight1Rectangle1.y1 -= 200;
                                            redKnight1Rectangle1.x2 -= 100;
                                            redKnight1Rectangle1.y2 -= 200;

                                            redKnight1Rectangle2.x1 -= 100;
                                            redKnight1Rectangle2.y1 -= 200;
                                            redKnight1Rectangle2.x2 -= 100;
                                            redKnight1Rectangle2.y2 -= 200;

                                            redKnight1Base.x1 -= 100;
                                            redKnight1Base.y1 -= 200;
                                            redKnight1Base.x2 -= 100;
                                            redKnight1Base.y2 -= 200;

                                            redKnight1Ellipse.x1 -= 100;
                                            redKnight1Ellipse.y1 -= 200;
                                            redKnight1Ellipse.x2 -= 100;
                                            redKnight1Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckRed(j, i);

                                            if(ffff) {

                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;
                                                
                                                turn = 'r';

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY - 200 &&
                                              i*100 == redKnight1Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;
                                            
                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 += 100;
                                            redKnight1Rectangle1.y1 -= 200;
                                            redKnight1Rectangle1.x2 += 100;
                                            redKnight1Rectangle1.y2 -= 200;

                                            redKnight1Rectangle2.x1 += 100;
                                            redKnight1Rectangle2.y1 -= 200;
                                            redKnight1Rectangle2.x2 += 100;
                                            redKnight1Rectangle2.y2 -= 200;

                                            redKnight1Base.x1 += 100;
                                            redKnight1Base.y1 -= 200;
                                            redKnight1Base.x2 += 100;
                                            redKnight1Base.y2 -= 200;

                                            redKnight1Ellipse.x1 += 100;
                                            redKnight1Ellipse.y1 -= 200;
                                            redKnight1Ellipse.x2 += 100;
                                            redKnight1Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckRed(j, i);
                                        
                                            if(ffff) {

                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY - 100 &&
                                              i*100 == redKnight1Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 -= 200;
                                            redKnight1Rectangle1.y1 -= 100;
                                            redKnight1Rectangle1.x2 -= 200;
                                            redKnight1Rectangle1.y2 -= 100;

                                            redKnight1Rectangle2.x1 -= 200;
                                            redKnight1Rectangle2.y1 -= 100;
                                            redKnight1Rectangle2.x2 -= 200;
                                            redKnight1Rectangle2.y2 -= 100;

                                            redKnight1Base.x1 -= 200;
                                            redKnight1Base.y1 -= 100;
                                            redKnight1Base.x2 -= 200;
                                            redKnight1Base.y2 -= 100;

                                            redKnight1Ellipse.x1 -= 200;
                                            redKnight1Ellipse.y1 -= 100;
                                            redKnight1Ellipse.x2 -= 200;
                                            redKnight1Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY + 100 &&
                                              i*100 == redKnight1Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        boolean fff = checkCheckRed(j, i);
                                        
                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 -= 200;
                                            redKnight1Rectangle1.y1 += 100;
                                            redKnight1Rectangle1.x2 -= 200;
                                            redKnight1Rectangle1.y2 += 100;

                                            redKnight1Rectangle2.x1 -= 200;
                                            redKnight1Rectangle2.y1 += 100;
                                            redKnight1Rectangle2.x2 -= 200;
                                            redKnight1Rectangle2.y2 += 100;

                                            redKnight1Base.x1 -= 200;
                                            redKnight1Base.y1 += 100;
                                            redKnight1Base.x2 -= 200;
                                            redKnight1Base.y2 += 100;

                                            redKnight1Ellipse.x1 -= 200;
                                            redKnight1Ellipse.y1 += 100;
                                            redKnight1Ellipse.x2 -= 200;
                                            redKnight1Ellipse.y2 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'g';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY + 200 &&
                                              i*100 == redKnight1Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 -= 100;
                                            redKnight1Rectangle1.y1 += 200;
                                            redKnight1Rectangle1.x2 -= 100;
                                            redKnight1Rectangle1.y2 += 200;

                                            redKnight1Rectangle2.x1 -= 100;
                                            redKnight1Rectangle2.y1 += 200;
                                            redKnight1Rectangle2.x2 -= 100;
                                            redKnight1Rectangle2.y2 += 200;

                                            redKnight1Base.x1 -= 100;
                                            redKnight1Base.y1 += 200;
                                            redKnight1Base.x2 -= 100;
                                            redKnight1Base.y2 += 200;

                                            redKnight1Ellipse.x1 -= 100;
                                            redKnight1Ellipse.y1 += 200;
                                            redKnight1Ellipse.x2 -= 100;
                                            redKnight1Ellipse.y2 += 200;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY + 200 &&
                                              i*100 == redKnight1Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 += 100;
                                            redKnight1Rectangle1.y1 += 200;
                                            redKnight1Rectangle1.x2 += 100;
                                            redKnight1Rectangle1.y2 += 200;

                                            redKnight1Rectangle2.x1 += 100;
                                            redKnight1Rectangle2.y1 += 200;
                                            redKnight1Rectangle2.x2 += 100;
                                            redKnight1Rectangle2.y2 += 200;

                                            redKnight1Base.x1 += 100;
                                            redKnight1Base.y1 += 200;
                                            redKnight1Base.x2 += 100;
                                            redKnight1Base.y2 += 200;

                                            redKnight1Ellipse.x1 += 100;
                                            redKnight1Ellipse.y1 += 200;
                                            redKnight1Ellipse.x2 += 100;
                                            redKnight1Ellipse.y2 += 200;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {
                                            
                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY - 100 &&
                                              i*100 == redKnight1Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 += 200;
                                            redKnight1Rectangle1.y1 -= 100;
                                            redKnight1Rectangle1.x2 += 200;
                                            redKnight1Rectangle1.y2 -= 100;

                                            redKnight1Rectangle2.x1 += 200;
                                            redKnight1Rectangle2.y1 -= 100;
                                            redKnight1Rectangle2.x2 += 200;
                                            redKnight1Rectangle2.y2 -= 100;

                                            redKnight1Base.x1 -= 200;
                                            redKnight1Base.y1 += 100;
                                            redKnight1Base.x2 -= 200;
                                            redKnight1Base.y2 += 100;

                                            redKnight1Ellipse.x1 += 200;
                                            redKnight1Ellipse.y1 -= 100;
                                            redKnight1Ellipse.x2 += 200;
                                            redKnight1Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight1Rectangle1.posY + 100 &&
                                              i*100 == redKnight1Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight1Rectangle1.posY;
                                            int a0 = redKnight1Rectangle1.posX;

                                            int a2 = redKnight1Rectangle1.x1;
                                            int a3 = redKnight1Rectangle1.x2;

                                            int a4 = redKnight1Rectangle2.x1;
                                            int a5 = redKnight1Rectangle2.x2;

                                            int a6 = redKnight1Base.x1;
                                            int a7 = redKnight1Base.x2;

                                            int a8 = redKnight1Ellipse.x1;
                                            int a9 = redKnight1Ellipse.x2;

                                            int a10 = redKnight1Rectangle1.y1;
                                            int a11 = redKnight1Rectangle1.y2;

                                            int a12 = redKnight1Rectangle2.y1;
                                            int a13 = redKnight1Rectangle2.y2;

                                            int a14 = redKnight1Base.y1;
                                            int a15 = redKnight1Base.y2;

                                            int a16 = redKnight1Ellipse.y1;
                                            int a17 = redKnight1Ellipse.y2;

                                            redKnight1Rectangle1.posX = i*100;
                                            redKnight1Rectangle1.posY = j*100;

                                            redKnight1Rectangle1.x1 += 200;
                                            redKnight1Rectangle1.y1 += 100;
                                            redKnight1Rectangle1.x2 += 200;
                                            redKnight1Rectangle1.y2 += 100;

                                            redKnight1Rectangle2.x1 += 200;
                                            redKnight1Rectangle2.y1 += 100;
                                            redKnight1Rectangle2.x2 += 200;
                                            redKnight1Rectangle2.y2 += 100;

                                            redKnight1Base.x1 += 200;
                                            redKnight1Base.y1 += 100;
                                            redKnight1Base.x2 += 200;
                                            redKnight1Base.y2 += 100;

                                            redKnight1Ellipse.x1 += 200;
                                            redKnight1Ellipse.y1 += 100;
                                            redKnight1Ellipse.x2 += 200;
                                            redKnight1Ellipse.y2 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKnight1Rectangle1.posY = a1;
                                                redKnight1Rectangle1.posX = a0;

                                                redKnight1Rectangle1.x1 = a2;
                                                redKnight1Rectangle1.x2 = a3;

                                                redKnight1Rectangle2.x1 = a4;
                                                redKnight1Rectangle2.x2 = a5;

                                                redKnight1Base.x1 = a6;
                                                redKnight1Base.x2 = a7;

                                                redKnight1Ellipse.x1 = a8;
                                                redKnight1Ellipse.x2 = a9;

                                                redKnight1Rectangle1.y1 = a10;
                                                redKnight1Rectangle1.y2 = a11;

                                                redKnight1Rectangle2.y1 = a12;
                                                redKnight1Rectangle2.y2 = a13;

                                                redKnight1Base.y1 = a14;
                                                redKnight1Base.y2 = a15;

                                                redKnight1Ellipse.y1 = a16;
                                                redKnight1Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    }
                                }
                            }

                            itdid = FALSE;
                            
                            if(redKnight2Rectangle1.posX == i*100 &&
                               redKnight2Rectangle1.posY == j*100) {
                                
                                clickedOne = 'r';
                                redKnight2Rectangle1.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "kr", 2);
                            } else if(clickedOne == 'r' &&
                                      redKnight2Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    boolean failed = FALSE;
                                    
                                    clickedOne = 'r';

                                    redKnight2Rectangle1.clicked = FALSE;

                                    if(j*100 == redKnight2Rectangle1.posY - 200 &&
                                       i*100 == redKnight2Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;

                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 -= 100;
                                            redKnight2Rectangle1.y1 -= 200;
                                            redKnight2Rectangle1.x2 -= 100;
                                            redKnight2Rectangle1.y2 -= 200;

                                            redKnight2Rectangle2.x1 -= 100;
                                            redKnight2Rectangle2.y1 -= 200;
                                            redKnight2Rectangle2.x2 -= 100;
                                            redKnight2Rectangle2.y2 -= 200;

                                            redKnight2Base.x1 -= 100;
                                            redKnight2Base.y1 -= 200;
                                            redKnight2Base.x2 -= 100;
                                            redKnight2Base.y2 -= 200;

                                            redKnight2Ellipse.x1 -= 100;
                                            redKnight2Ellipse.y1 -= 200;
                                            redKnight2Ellipse.x2 -= 100;
                                            redKnight2Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }
                                            
                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY - 200 &&
                                              i*100 == redKnight2Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;

                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 += 100;
                                            redKnight2Rectangle1.y1 -= 200;
                                            redKnight2Rectangle1.x2 += 100;
                                            redKnight2Rectangle1.y2 -= 200;

                                            redKnight2Rectangle2.x1 += 100;
                                            redKnight2Rectangle2.y1 -= 200;
                                            redKnight2Rectangle2.x2 += 100;
                                            redKnight2Rectangle2.y2 -= 200;

                                            redKnight2Base.x1 += 100;
                                            redKnight2Base.y1 -= 200;
                                            redKnight2Base.x2 += 100;
                                            redKnight2Base.y2 -= 200;

                                            redKnight2Ellipse.x1 += 100;
                                            redKnight2Ellipse.y1 -= 200;
                                            redKnight2Ellipse.x2 += 100;
                                            redKnight2Ellipse.y2 -= 200;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY - 100 &&
                                              i*100 == redKnight2Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;

                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 -= 200;
                                            redKnight2Rectangle1.y1 -= 100;
                                            redKnight2Rectangle1.x2 -= 200;
                                            redKnight2Rectangle1.y2 -= 100;

                                            redKnight2Rectangle2.x1 -= 200;
                                            redKnight2Rectangle2.y1 -= 100;
                                            redKnight2Rectangle2.x2 -= 200;
                                            redKnight2Rectangle2.y2 -= 100;

                                            redKnight2Base.x1 -= 200;
                                            redKnight2Base.y1 -= 100;
                                            redKnight2Base.x2 -= 200;
                                            redKnight2Base.y2 -= 100;

                                            redKnight2Ellipse.x1 -= 200;
                                            redKnight2Ellipse.y1 -= 100;
                                            redKnight2Ellipse.x2 -= 200;
                                            redKnight2Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;
                                                
                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'r';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'h';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY + 100 &&
                                              i*100 == redKnight2Rectangle1.posX - 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;

                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 -= 200;
                                            redKnight2Rectangle1.y1 += 100;
                                            redKnight2Rectangle1.x2 -= 200;
                                            redKnight2Rectangle1.y2 += 100;

                                            redKnight2Rectangle2.x1 -= 200;
                                            redKnight2Rectangle2.y1 += 100;
                                            redKnight2Rectangle2.x2 -= 200;
                                            redKnight2Rectangle2.y2 += 100;

                                            redKnight2Base.x1 -= 200;
                                            redKnight2Base.y1 += 100;
                                            redKnight2Base.x2 -= 200;
                                            redKnight2Base.y2 += 100;

                                            redKnight2Ellipse.x1 -= 200;
                                            redKnight2Ellipse.y1 += 100;
                                            redKnight2Ellipse.x2 -= 200;
                                            redKnight2Ellipse.y2 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'g';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY + 200 &&
                                              i*100 == redKnight2Rectangle1.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;

                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 -= 100;
                                            redKnight2Rectangle1.y1 += 200;
                                            redKnight2Rectangle1.x2 -= 100;
                                            redKnight2Rectangle1.y2 += 200;

                                            redKnight2Rectangle2.x1 -= 100;
                                            redKnight2Rectangle2.y1 += 200;
                                            redKnight2Rectangle2.x2 -= 100;
                                            redKnight2Rectangle2.y2 += 200;

                                            redKnight2Base.x1 -= 100;
                                            redKnight2Base.y1 += 200;
                                            redKnight2Base.x2 -= 100;
                                            redKnight2Base.y2 += 200;

                                            redKnight2Ellipse.x1 -= 100;
                                            redKnight2Ellipse.y1 += 200;
                                            redKnight2Ellipse.x2 -= 100;
                                            redKnight2Ellipse.y2 += 200;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY + 200 &&
                                              i*100 == redKnight2Rectangle1.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;
                                            
                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 += 100;
                                            redKnight2Rectangle1.y1 += 200;
                                            redKnight2Rectangle1.x2 += 100;
                                            redKnight2Rectangle1.y2 += 200;

                                            redKnight2Rectangle2.x1 += 100;
                                            redKnight2Rectangle2.y1 += 200;
                                            redKnight2Rectangle2.x2 += 100;
                                            redKnight2Rectangle2.y2 += 200;

                                            redKnight2Base.x1 += 100;
                                            redKnight2Base.y1 += 200;
                                            redKnight2Base.x2 += 100;
                                            redKnight2Base.y2 += 200;

                                            redKnight2Ellipse.x1 += 100;
                                            redKnight2Ellipse.y1 += 200;
                                            redKnight2Ellipse.x2 += 100;
                                            redKnight2Ellipse.y2 += 200;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY - 100 &&
                                              i*100 == redKnight2Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }

                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;
                                            
                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 += 200;
                                            redKnight2Rectangle1.y1 -= 100;
                                            redKnight2Rectangle1.x2 += 200;
                                            redKnight2Rectangle1.y2 -= 100;

                                            redKnight2Rectangle2.x1 += 200;
                                            redKnight2Rectangle2.y1 -= 100;
                                            redKnight2Rectangle2.x2 += 200;
                                            redKnight2Rectangle2.y2 -= 100;

                                            redKnight2Base.x1 += 200;
                                            redKnight2Base.y1 -= 100;
                                            redKnight2Base.x2 += 200;
                                            redKnight2Base.y2 -= 100;

                                            redKnight2Ellipse.x1 += 200;
                                            redKnight2Ellipse.y1 -= 100;
                                            redKnight2Ellipse.x2 += 200;
                                            redKnight2Ellipse.y2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {

                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKnight2Rectangle1.posY + 100 &&
                                              i*100 == redKnight2Rectangle1.posX + 200) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKingSquare.posX == i*100 &&
                                           redKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(greyKingSquare.posX == i*100 &&
                                           greyKingSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {

                                            int a1 = redKnight2Rectangle1.posY;
                                            int a0 = redKnight2Rectangle1.posX;

                                            int a2 = redKnight2Rectangle1.x1;
                                            int a3 = redKnight2Rectangle1.x2;

                                            int a4 = redKnight2Rectangle2.x1;
                                            int a5 = redKnight2Rectangle2.x2;

                                            int a6 = redKnight2Base.x1;
                                            int a7 = redKnight2Base.x2;

                                            int a8 = redKnight2Ellipse.x1;
                                            int a9 = redKnight2Ellipse.x2;

                                            int a10 = redKnight2Rectangle1.y1;
                                            int a11 = redKnight2Rectangle1.y2;

                                            int a12 = redKnight2Rectangle2.y1;
                                            int a13 = redKnight2Rectangle2.y2;

                                            int a14 = redKnight2Base.y1;
                                            int a15 = redKnight2Base.y2;

                                            int a16 = redKnight2Ellipse.y1;
                                            int a17 = redKnight2Ellipse.y2;

                                            redKnight2Rectangle1.posX = i*100;
                                            redKnight2Rectangle1.posY = j*100;

                                            redKnight2Rectangle1.x1 += 200;
                                            redKnight2Rectangle1.y1 += 100;
                                            redKnight2Rectangle1.x2 += 200;
                                            redKnight2Rectangle1.y2 += 100;

                                            redKnight2Rectangle2.x1 += 200;
                                            redKnight2Rectangle2.y1 += 100;
                                            redKnight2Rectangle2.x2 += 200;
                                            redKnight2Rectangle2.y2 += 100;

                                            redKnight2Base.x1 += 200;
                                            redKnight2Base.y1 += 100;
                                            redKnight2Base.x2 += 200;
                                            redKnight2Base.y2 += 100;

                                            redKnight2Ellipse.x1 += 200;
                                            redKnight2Ellipse.y1 += 100;
                                            redKnight2Ellipse.x2 += 200;
                                            redKnight2Ellipse.y2 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {
                                                
                                                redKnight2Rectangle1.posY = a1;
                                                redKnight2Rectangle1.posX = a0;

                                                redKnight2Rectangle1.x1 = a2;
                                                redKnight2Rectangle1.x2 = a3;

                                                redKnight2Rectangle2.x1 = a4;
                                                redKnight2Rectangle2.x2 = a5;

                                                redKnight2Base.x1 = a6;
                                                redKnight2Base.x2 = a7;

                                                redKnight2Ellipse.x1 = a8;
                                                redKnight2Ellipse.x2 = a9;

                                                redKnight2Rectangle1.y1 = a10;
                                                redKnight2Rectangle1.y2 = a11;

                                                redKnight2Rectangle2.y1 = a12;
                                                redKnight2Rectangle2.y2 = a13;

                                                redKnight2Base.y1 = a14;
                                                redKnight2Base.y2 = a15;

                                                redKnight2Ellipse.y1 = a16;
                                                redKnight2Ellipse.y2 = a17;

                                            } else {
                                            
                                                for(int t=0; t<8; t++) {
                                                    if(greyPawnsBase[t].posX == i*100 &&
                                                       greyPawnsBase[t].posY == j*100) {
                                                        greyPawnsBase[t].posX = 1100;
                                                        greyPawnsBase[t].x1 = -1000;
                                                        greyPawnsBase[t].x2 = -1000;
                                                        greyPawnsEllipse[t].x1 = -1000;
                                                        greyPawnsEllipse[t].x2 = -1000;
                                                    }
                                                }
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -100;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                }
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -100;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                }
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -100;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                }
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -100;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    }
                                }
                            }
                                                        
                            itdid = FALSE;
                            
                            if(redKingSquare.posX == i*100 &&
                               redKingSquare.posY == j*100) {
                                
                                clickedOne = 'r';
                                redKingSquare.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "cr", 2);
                            } else if(clickedOne == 'r' &&
                                      redKingSquare.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    boolean failed = FALSE;
                                    
                                    clickedOne = 'r';

                                    redKingSquare.clicked = FALSE;

                                    if(j*100 == redKingSquare.posY &&
                                       i*100 == redKingSquare.posX - 200) {
                                        if(redRook1Rectangle1.posY == 0 &&
                                           redRook1Rectangle1.posX == 0) {
                                            if(redKingSquare.posY == 0 &&
                                               redKingSquare.posX == 400) {
                                                boolean isthere = FALSE;
                                                if(greyRook1Rectangle1.posX == 300 &&
                                                   greyRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook1Rectangle1.posX == 200 &&
                                                   greyRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook1Rectangle1.posX == 100 &&
                                                   greyRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 300 &&
                                                   greyRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 200 &&
                                                   greyRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 100 &&
                                                   greyRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 300 &&
                                                   redRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 200 &&
                                                   redRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 100 &&
                                                   redRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 300 &&
                                                   redRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 200 &&
                                                   redRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 100 &&
                                                   redRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 300 &&
                                                   greyBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 200 &&
                                                   greyBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 100 &&
                                                   greyBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 300 &&
                                                   greyBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 200 &&
                                                   greyBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 100 &&
                                                   greyBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 300 &&
                                                   redBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 200 &&
                                                   redBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 100 &&
                                                   redBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 300 &&
                                                   redBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 200 &&
                                                   redBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 100 &&
                                                   redBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 300 &&
                                                   greyKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 200 &&
                                                   greyKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 100 &&
                                                   greyKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 300 &&
                                                   greyKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 200 &&
                                                   greyKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 100 &&
                                                   greyKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 300 &&
                                                   redKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 200 &&
                                                   redKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 100 &&
                                                   redKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 300 &&
                                                   redKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 200 &&
                                                   redKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 100 &&
                                                   redKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 300 &&
                                                   greyQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 200 &&
                                                   greyQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 100 &&
                                                   greyQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 300 &&
                                                   redQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 200 &&
                                                   redQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 100 &&
                                                   redQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(!isthere && !redKingMoved && !redRook1Moved) {
                                                    redKingSquare.posX -= 200;
                                                    redKingSquare.x1 -= 200;
                                                    redKingSquare.x2 -= 200;
                                                    redKingRectangle.x1 -= 200;
                                                    redKingRectangle.x2 -= 200;
                                                    redKingEllipse.x1 -= 200;
                                                    redKingEllipse.x2 -= 200;
                                                    redKingBase.x1 -= 200;
                                                    redKingBase.x2 -= 200;
                                                    redRook1Rectangle1.posX += 300;
                                                    redRook1Rectangle1.x1 += 300;
                                                    redRook1Rectangle1.x2 += 300;
                                                    redRook1Rectangle2.x1 += 300;
                                                    redRook1Rectangle2.x2 += 300;
                                                    redRook1Ellipse.x1 += 300;
                                                    redRook1Ellipse.x2 += 300;
                                                    redRook1Base.x1 += 300;
                                                    redRook1Base.x2 += 300;
                                                    redKingMoved = TRUE;
                                                    redRook1Moved = TRUE;
                                                    turnChanged = TRUE;
                                                    turn = 'h';
                                                    done = TRUE;
                                                }
                                            }
                                        }
                                    }

                                    if(j*100 == redKingSquare.posY &&
                                       i*100 == redKingSquare.posX + 200) {
                                        if(redRook2Rectangle1.posY == 0 &&
                                           redRook2Rectangle1.posX == 700) {
                                            if(redKingSquare.posY == 0 &&
                                               redKingSquare.posX == 400) {
                                                boolean isthere = FALSE;
                                                if(greyRook1Rectangle1.posX == 500 &&
                                                   greyRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook1Rectangle1.posX == 600 &&
                                                   greyRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 500 &&
                                                   greyRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyRook2Rectangle1.posX == 600 &&
                                                   greyRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 500 &&
                                                   redRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook1Rectangle1.posX == 600 &&
                                                   redRook1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 500 &&
                                                   redRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redRook2Rectangle1.posX == 600 &&
                                                   redRook2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 500 &&
                                                   greyBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop1Square.posX == 600 &&
                                                   greyBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 500 &&
                                                   greyBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyBishop2Square.posX == 600 &&
                                                   greyBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 500 &&
                                                   redBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop1Square.posX == 600 &&
                                                   redBishop1Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 500 &&
                                                   redBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redBishop2Square.posX == 600 &&
                                                   redBishop2Square.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 500 &&
                                                   greyKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight1Rectangle1.posX == 600 &&
                                                   greyKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 500 &&
                                                   greyKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyKnight2Rectangle1.posX == 600 &&
                                                   greyKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 500 &&
                                                   redKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight1Rectangle1.posX == 600 &&
                                                   redKnight1Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 500 &&
                                                   redKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redKnight2Rectangle1.posX == 600 &&
                                                   redKnight2Rectangle1.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 500 &&
                                                   greyQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(greyQueenSquare.posX == 600 &&
                                                   greyQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 500 &&
                                                   redQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(redQueenSquare.posX == 600 &&
                                                   redQueenSquare.posY == 0) {
                                                    isthere = TRUE;
                                                }
                                                if(!isthere && !redKingMoved && !redRook2Moved) {
                                                    redKingSquare.posX += 200;
                                                    redKingSquare.x1 += 200;
                                                    redKingSquare.x2 += 200;
                                                    redKingRectangle.x1 += 200;
                                                    redKingRectangle.x2 += 200;
                                                    redKingEllipse.x1 += 200;
                                                    redKingEllipse.x2 += 200;
                                                    redKingBase.x1 += 200;
                                                    redKingBase.x2 += 200;
                                                    redRook2Rectangle1.posX -= 200;
                                                    redRook2Rectangle1.x1 -= 200;
                                                    redRook2Rectangle1.x2 -= 200;
                                                    redRook2Rectangle2.x1 -= 200;
                                                    redRook2Rectangle2.x2 -= 200;
                                                    redRook2Ellipse.x1 -= 200;
                                                    redRook2Ellipse.x2 -= 200;
                                                    redRook2Base.x1 -= 200;
                                                    redRook2Base.x2 -= 200;
                                                    redKingMoved = TRUE;
                                                    redRook2Moved = TRUE;
                                                    turnChanged = TRUE;
                                                    turn = 'h';
                                                    done = TRUE;
                                                }
                                            }
                                        }
                                    }

                                    if(j*100 == redKingSquare.posY - 100 &&
                                       i*100 == redKingSquare.posX) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posY -= 100;
                                            
                                            redKingSquare.y1 -= 100;
                                            redKingSquare.y2 -= 100;
                                            
                                            redKingRectangle.y1 -= 100;
                                            redKingRectangle.y2 -= 100;

                                            redKingEllipse.y1 -= 100;
                                            redKingEllipse.y2 -= 100;

                                            redKingBase.y1 -= 100;
                                            redKingBase.y2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;
                                                
                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY - 100 &&
                                              i*100 == redKingSquare.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posY -= 100;
                                            redKingSquare.posX += 100;
                                            
                                            redKingSquare.y1 -= 100;
                                            redKingSquare.y2 -= 100;
                                            redKingSquare.x1 += 100;
                                            redKingSquare.x2 += 100;
                                            
                                            redKingRectangle.y1 -= 100;
                                            redKingRectangle.y2 -= 100;
                                            redKingRectangle.x1 += 100;
                                            redKingRectangle.x2 += 100;

                                            redKingEllipse.y1 -= 100;
                                            redKingEllipse.y2 -= 100;
                                            redKingEllipse.x1 += 100;
                                            redKingEllipse.x2 += 100;

                                            redKingBase.y1 -= 100;
                                            redKingBase.y2 -= 100;
                                            redKingBase.x1 += 100;
                                            redKingBase.x2 += 100;

                                            boolean ffff = checkCheckRed(j, i);

                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;

                                            } else {
                                                
                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY &&
                                              i*100 == redKingSquare.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posX += 100;
                                            
                                            redKingSquare.x1 += 100;
                                            redKingSquare.x2 += 100;
                                            
                                            redKingRectangle.x1 += 100;
                                            redKingRectangle.x2 += 100;

                                            redKingEllipse.x1 += 100;
                                            redKingEllipse.x2 += 100;

                                            redKingBase.x1 += 100;
                                            redKingBase.x2 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY + 100 &&
                                              i*100 == redKingSquare.posX + 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posX += 100;
                                            redKingSquare.posY += 100;
                                            
                                            redKingSquare.x1 += 100;
                                            redKingSquare.x2 += 100;

                                            redKingSquare.y1 += 100;
                                            redKingSquare.y2 += 100;
                                            
                                            redKingRectangle.x1 += 100;
                                            redKingRectangle.x2 += 100;

                                            redKingRectangle.y1 += 100;
                                            redKingRectangle.y2 += 100;

                                            redKingEllipse.x1 += 100;
                                            redKingEllipse.x2 += 100;

                                            redKingEllipse.y1 += 100;
                                            redKingEllipse.y2 += 100;

                                            redKingBase.x1 += 100;
                                            redKingBase.x2 += 100;

                                            redKingBase.y1 += 100;
                                            redKingBase.y2 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;

                                            } else {
                                            
                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY + 100 &&
                                              i*100 == redKingSquare.posX) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posY += 100;
                                            
                                            redKingSquare.y1 += 100;
                                            redKingSquare.y2 += 100;

                                            redKingRectangle.y1 += 100;
                                            redKingRectangle.y2 += 100;

                                            redKingEllipse.y1 += 100;
                                            redKingEllipse.y2 += 100;

                                            redKingBase.y1 += 100;
                                            redKingBase.y2 += 100;

                                            boolean ffff = checkCheckRed(j, i);

                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;

                                            } else {
                                            
                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY + 100 &&
                                              i*100 == redKingSquare.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posX -= 100;
                                            redKingSquare.posY += 100;
                                            
                                            redKingSquare.y2 += 100;
                                            redKingSquare.x2 -= 100;
                                            redKingSquare.x1 -= 100;
                                            redKingSquare.y1 += 100;

                                            redKingRectangle.y2 += 100;
                                            redKingRectangle.x2 -= 100;
                                            redKingRectangle.x1 -= 100;
                                            redKingRectangle.y1 += 100;

                                            redKingEllipse.y2 += 100;
                                            redKingEllipse.x2 -= 100;
                                            redKingEllipse.x1 -= 100;
                                            redKingEllipse.y1 += 100;

                                            redKingBase.y2 += 100;
                                            redKingBase.x2 -= 100;
                                            redKingBase.x1 -= 100;
                                            redKingBase.y1 += 100;

                                            boolean ffff = checkCheckRed(j, i);
                                        
                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY &&
                                              i*100 == redKingSquare.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posX -= 100;
                                            
                                            redKingRectangle.x1 -= 100;
                                            redKingRectangle.x2 -= 100;

                                            redKingBase.x1 -= 100;
                                            redKingBase.x2 -= 100;

                                            redKingEllipse.x1 -= 100;
                                            redKingEllipse.x2 -= 100;

                                            redKingSquare.x1 -= 100;
                                            redKingSquare.x2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;

                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    } else if(j*100 == redKingSquare.posY - 100 &&
                                              i*100 == redKingSquare.posX - 100) {
                                        
                                        for(int t=0; t<8; t++) {
                                            if(redPawnsBase[t].posX == i*100 &&
                                               redPawnsBase[t].posY == j*100) {
                                                failed = TRUE;
                                            }
                                        }
                                        if(redQueenSquare.posX == i*100 &&
                                           redQueenSquare.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop1Square.posX == i*100 &&
                                           redBishop1Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redBishop2Square.posX == i*100 &&
                                           redBishop2Square.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight1Rectangle1.posX == i*100 &&
                                           redKnight1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redKnight2Rectangle1.posX == i*100 &&
                                           redKnight2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook1Rectangle1.posX == i*100 &&
                                           redRook1Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        if(redRook2Rectangle1.posX == i*100 &&
                                           redRook2Rectangle1.posY == j*100) {
                                            failed = TRUE;
                                        }
                                        
                                        if(!failed) {
                                            int a1 = redKingSquare.posY;
                                            int a0 = redKingSquare.posX;

                                            int a2 = redKingSquare.x1;
                                            int a3 = redKingSquare.x2;
                                            
                                            int a4 = redKingRectangle.x1;
                                            int a5 = redKingRectangle.x2;

                                            int a6 = redKingEllipse.x1;
                                            int a7 = redKingEllipse.x2;

                                            int a8 = redKingBase.x1;
                                            int a9 = redKingBase.x2;

                                            int a10 = redKingSquare.y1;
                                            int a11 = redKingSquare.y2;
                                            
                                            int a12 = redKingRectangle.y1;
                                            int a13 = redKingRectangle.y2;

                                            int a14 = redKingEllipse.y1;
                                            int a15 = redKingEllipse.y2;

                                            int a16 = redKingBase.y1;
                                            int a17 = redKingBase.y2;

                                            redKingSquare.posX -= 100;
                                            redKingSquare.posY -= 100;
                                            
                                            redKingSquare.x1 -= 100;
                                            redKingSquare.x2 -= 100;

                                            redKingSquare.y1 -= 100;
                                            redKingSquare.y2 -= 100;

                                            redKingRectangle.x1 -= 100;
                                            redKingRectangle.x2 -= 100;

                                            redKingRectangle.y1 -= 100;
                                            redKingRectangle.y2 -= 100;

                                            redKingBase.x1 -= 100;
                                            redKingBase.x2 -= 100;

                                            redKingBase.y1 -= 100;
                                            redKingBase.y2 -= 100;

                                            redKingEllipse.x1 -= 100;
                                            redKingEllipse.x2 -= 100;

                                            redKingEllipse.y1 -= 100;
                                            redKingEllipse.y2 -= 100;

                                            boolean ffff = checkCheckRed(j, i);
                                            
                                            if(ffff) {

                                                redKingSquare.posY = a1;
                                                redKingSquare.posX = a0;

                                                redKingSquare.x1 = a2;
                                                redKingSquare.x2 = a3;

                                                redKingRectangle.x1 = a4;
                                                redKingRectangle.x2 = a5;

                                                redKingEllipse.x1 = a6;
                                                redKingEllipse.x2 = a7;

                                                redKingBase.x1 = a8;
                                                redKingBase.x2 = a9;

                                                redKingSquare.y1 = a10;
                                                redKingSquare.y2 = a11;

                                                redKingRectangle.y1 = a12;
                                                redKingRectangle.y2 = a13;

                                                redKingEllipse.y1 = a14;
                                                redKingEllipse.y2 = a15;

                                                redKingBase.y1 = a16;
                                                redKingBase.y2 = a17;
                                            } else {

                                                for(int l=0; l<8; l++) {
                                                    if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                    if((greyPawnsBase[l].posX == redKingSquare.posX ||
                                                        greyPawnsBase[l].posX == redKingSquare.posX) &&
                                                        greyPawnsBase[l].posY == j*100) {
                                                        greyPawnsBase[l].posX = 1100;
                                                        greyPawnsBase[l].posY = -1000;
                                                        greyPawnsBase[l].x1 = -1000;
                                                        greyPawnsBase[l].x2 = -1000;
                                                        greyPawnsEllipse[l].x1 = -1000;
                                                        greyPawnsEllipse[l].x2 = -1000;
                                                        break;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyQueenSquare.posX == i*100 &&
                                                   greyQueenSquare.posY == j*100) {
                                                    greyQueenSquare.posX = 1100;
                                                    greyQueenSquare.posY = -1000;
                                                    greyQueenSquare.x1 = -1000;
                                                    greyQueenSquare.x2 = -1000;
                                                    greyQueenBase.x1 = -1000;
                                                    greyQueenBase.x2 = -1000;
                                                    greyQueenEllipse.x1 = -1000;
                                                    greyQueenEllipse.x2 = -1000;
                                                    greyQueenRectangle1.x1 = -1000;
                                                    greyQueenRectangle1.x2 = -1000;
                                                    greyQueenRectangle2.x1 = -1000;
                                                    greyQueenRectangle2.x2 = -1000;
                                                    greyQueenRectangle3.x1 = -1000;
                                                    greyQueenRectangle3.x2 = -1000;
                                                }
                                                for(int z=0; z<8; z++) {
                                                    if(greyQueenSquareK[z].posX == i*100 &&
                                                       greyQueenSquareK[z].posY == j*100) {
                                                        greyQueenSquareK[z].posX = 1100;
                                                        greyQueenSquareK[z].posY = -1000;
                                                        greyQueenSquareK[z].x1 = -1000;
                                                        greyQueenSquareK[z].x2 = -1000;
                                                        greyQueenBaseK[z].x1 = -1000;
                                                        greyQueenBaseK[z].x2 = -1000;
                                                        greyQueenEllipseK[z].x1 = -1000;
                                                        greyQueenEllipseK[z].x2 = -1000;
                                                        greyQueenRectangle1K[z].x1 = -1000;
                                                        greyQueenRectangle1K[z].x2 = -1000;
                                                        greyQueenRectangle2K[z].x1 = -1000;
                                                        greyQueenRectangle2K[z].x2 = -1000;
                                                        greyQueenRectangle3K[z].x1 = -1000;
                                                        greyQueenRectangle3K[z].x2 = -1000;
                                                    }
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop1Square.posX == i*100 &&
                                                   greyBishop1Square.posY == j*100) {
                                                    greyBishop1Square.posX = 1100;
                                                    greyBishop1Square.posY = -1000;
                                                    greyBishop1Square.x1 = -1000;
                                                    greyBishop1Square.x2 = -1000;
                                                    greyBishop1Base.x1 = -1000;
                                                    greyBishop1Base.x2 = -1000;
                                                    greyBishop1Ellipse.x1 = -1000;
                                                    greyBishop1Ellipse.x2 = -1000;
                                                    greyBishop1Rectangle.x1 = -1000;
                                                    greyBishop1Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyBishop2Square.posX == i*100 &&
                                                   greyBishop2Square.posY == j*100) {
                                                    greyBishop2Square.posX = 1100;
                                                    greyBishop2Square.posY = -1000;
                                                    greyBishop2Square.x1 = -1000;
                                                    greyBishop2Square.x2 = -1000;
                                                    greyBishop2Base.x1 = -1000;
                                                    greyBishop2Base.x2 = -1000;
                                                    greyBishop2Ellipse.x1 = -1000;
                                                    greyBishop2Ellipse.x2 = -1000;
                                                    greyBishop2Rectangle.x1 = -1000;
                                                    greyBishop2Rectangle.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight1Rectangle1.posX == i*100 &&
                                                   greyKnight1Rectangle1.posY == j*100) {
                                                    greyKnight1Rectangle1.posX = 1100;
                                                    greyKnight1Rectangle1.posY = -1000;
                                                    greyKnight1Base.x1 = -1000;
                                                    greyKnight1Base.x2 = -1000;
                                                    greyKnight1Ellipse.x1 = -1000;
                                                    greyKnight1Ellipse.x2 = -1000;
                                                    greyKnight1Rectangle1.x1 = -1000;
                                                    greyKnight1Rectangle1.x2 = -1000;
                                                    greyKnight1Rectangle2.x1 = -1000;
                                                    greyKnight1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyKnight2Rectangle1.posX == i*100 &&
                                                   greyKnight2Rectangle1.posY == j*100) {
                                                    greyKnight2Rectangle1.posX = 1100;
                                                    greyKnight2Rectangle1.posY = -1000;
                                                    greyKnight2Base.x1 = -1000;
                                                    greyKnight2Base.x2 = -1000;
                                                    greyKnight2Ellipse.x1 = -1000;
                                                    greyKnight2Ellipse.x2 = -1000;
                                                    greyKnight2Rectangle1.x1 = -1000;
                                                    greyKnight2Rectangle1.x2 = -1000;
                                                    greyKnight2Rectangle2.x1 = -1000;
                                                    greyKnight2Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook1Rectangle1.posX == i*100 &&
                                                   greyRook1Rectangle1.posY == j*100) {
                                                    greyRook1Rectangle1.posX = 1100;
                                                    greyRook1Rectangle1.posY = -1000;
                                                    greyRook1Base.x1 = -1000;
                                                    greyRook1Base.x2 = -1000;
                                                    greyRook1Ellipse.x1 = -1000;
                                                    greyRook1Ellipse.x2 = -1000;
                                                    greyRook1Rectangle1.x1 = -1000;
                                                    greyRook1Rectangle1.x2 = -1000;
                                                    greyRook1Rectangle2.x1 = -1000;
                                                    greyRook1Rectangle2.x2 = -1000;
                                                }
                                                if(WM_RBUTTONDOWN == msg || 1 == 1)
                                                if(greyRook2Rectangle1.posX == i*100 &&
                                                   greyRook2Rectangle1.posY == j*100) {
                                                    greyRook2Rectangle1.posX = 1100;
                                                    greyRook2Rectangle1.posY = -1000;
                                                    greyRook2Base.x1 = -1000;
                                                    greyRook2Base.x2 = -1000;
                                                    greyRook2Ellipse.x1 = -1000;
                                                    greyRook2Ellipse.x2 = -1000;
                                                    greyRook2Rectangle1.x1 = -1000;
                                                    greyRook2Rectangle1.x2 = -1000;
                                                    greyRook2Rectangle2.x1 = -1000;
                                                    greyRook2Rectangle2.x2 = -1000;
                                                }

                                                for(int u=0; u<8; u++) {
                                                    if(greyPawnsBase[u].posX == redKingSquare.posX &&
                                                       greyPawnsBase[u].posY == redKingSquare.posY - 100) {
                                                        greyPawnsBase[u].posX = 1100;
                                                        greyPawnsBase[u].posY = -1000;
                                                        greyPawnsBase[u].x1 = -1000;
                                                        greyPawnsBase[u].x2 = -1000;
                                                        greyPawnsEllipse[u].x1 = -1000;
                                                        greyPawnsEllipse[u].x2 = -1000;
                                                        break;
                                                    }
                                                }

                                                if(1==2) SetWindowText(hwnd, "Grey move");
                                                turn = 'h';
                                                turnChanged = TRUE;
                                                redKingMoved = TRUE;
                                                done = TRUE;
                                            }
                                        } else {
                                            turn = 'r';
                                        }
                                    }
                                }
                            }
                            
                            boolean changeii = FALSE;
                            
                            for(int z=0; z<8; z++) {
                                if(redPawnsBase[z].posY == 700) {
                                    strncpy(chosenPiece, "qr", 2);
                                    changeii = TRUE;
                                    int x = redPawnsBase[z].posX;
                                    int y = redPawnsBase[z].posY;
                                    redQueenSquareK[z].posX = x;
                                    redQueenSquareK[z].posY = y;
                                    
                                    redQueenSquareK[z].x1 = x+0+20+10-5+3;
                                    redQueenSquareK[z].y1 = 730;
                                    redQueenSquareK[z].x2 = x+0+40+20+10-5+3;
                                    redQueenSquareK[z].y2 = 750;
                                    redQueenRectangle1K[z].x1 = x+0+35-5-5+3;
                                    redQueenRectangle1K[z].y1 = 715;
                                    redQueenRectangle1K[z].x2 = x+0+40+5-5-5+3;
                                    redQueenRectangle1K[z].y2 = 750;
                                    redQueenRectangle2K[z].x1 = x+0+35+13-5+3;
                                    redQueenRectangle2K[z].y1 = 715;
                                    redQueenRectangle2K[z].x2 = x+0+40+5+13-5+3;
                                    redQueenRectangle2K[z].y2 = 750;
                                    redQueenRectangle3K[z].x1 = x+0+35+30-5+3;
                                    redQueenRectangle3K[z].y1 = 715;
                                    redQueenRectangle3K[z].x2 = x+0+40+5+30-5+3;
                                    redQueenRectangle3K[z].y2 = 750;
                                    redQueenEllipseK[z].x1 = x+0+30+10;
                                    redQueenEllipseK[z].y1 = 750;
                                    redQueenEllipseK[z].x2 = x+0+30+20+10;
                                    redQueenEllipseK[z].y2 = 770;
                                    redQueenBaseK[z].x1 = x+0+30+10;
                                    redQueenBaseK[z].y1 = 770;
                                    redQueenBaseK[z].x2 = x+0+30+20+10;
                                    redQueenBaseK[z].y2 = 800;

                                    redPawnsBase[z].posX = 1100;
                                    redPawnsBase[z].posY = -1000;
                                    redPawnsBase[z].x1 = -1000;
                                    redPawnsBase[z].x2 = -1000;
                                    redPawnsEllipse[z].x1 = -1000;
                                    redPawnsEllipse[z].x2 = -1000;
                                    
                                    turn = 'h';
                                    SetWindowText(hwnd, "Grey move");
                                }
                            }

                            itdid = FALSE;
                            
                            if(redQueenSquare.posX == i*100 &&
                               redQueenSquare.posY == j*100) {
                                
                                clickedOne = 'r';
                                redQueenSquare.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "qr", 2);
                            } else if(clickedOne == 'r' &&
                                      redQueenSquare.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'r';
                                    redQueenSquare.clicked = FALSE;

                                    int a1 = redQueenSquare.posY;
                                    int a0 = redQueenSquare.posX;

                                    int a2 = redQueenSquare.x1;
                                    int a3 = redQueenSquare.x2;

                                    int a4 = redQueenRectangle1.x1;
                                    int a5 = redQueenRectangle1.x2;

                                    int a6 = redQueenRectangle2.x1;
                                    int a7 = redQueenRectangle2.x2;

                                    int a8 = redQueenRectangle3.x1;
                                    int a9 = redQueenRectangle3.x2;

                                    int a10 = redQueenEllipse.x1;
                                    int a11 = redQueenEllipse.x2;

                                    int a12 = redQueenBase.x1;
                                    int a13 = redQueenBase.x2;

                                    int a14 = redQueenSquare.y1;
                                    int a15 = redQueenSquare.y2;

                                    int a16 = redQueenRectangle1.y1;
                                    int a17 = redQueenRectangle1.y2;

                                    int a18 = redQueenRectangle2.y1;
                                    int a19 = redQueenRectangle2.y2;

                                    int a20 = redQueenRectangle3.y1;
                                    int a21 = redQueenRectangle3.y2;

                                    int a22 = redQueenEllipse.y1;
                                    int a23 = redQueenEllipse.y2;

                                    int a24 = redQueenBase.y1;
                                    int a25 = redQueenBase.y2;

                                    boxes[redQueenSquare.posY/100][redQueenSquare.posX/100].clear = TRUE;

                                    boolean f = FALSE;

                                    redQueenSquare.failedpath = FALSE;

                                    if(i*100 == redQueenSquare.posX) {
                                        f = moveRedQueen(msg, j, i, j*100 - redQueenSquare.posY, j*100 - redQueenSquare.posY);
                                        f = redQueenSquare.failedpath;
                                    } else if(j*100 == redQueenSquare.posY) {
                                        f = moveRedQueenSide(msg, j, i, i*100 - redQueenSquare.posX, i*100 - redQueenSquare.posX);
                                        f = redQueenSquare.failedpath;
                                    } else if(i*100 != redQueenSquare.posX &&
                                       j*100 != redQueenSquare.posY) {
                                        f = moveRedQueenDiagonally(msg, j, i, j*100 - redQueenSquare.posY, i*100 - redQueenSquare.posX, j*100 - redQueenSquare.posY, i*100 - redQueenSquare.posX);
                                        f = redQueenSquare.failedpath;
                                    }

                                    boolean fff = checkCheckRed(j, i);
                                    
                                    if(f || fff) {

                                        redQueenSquare.posY = a1;
                                        redQueenSquare.posX = a0;

                                        redQueenSquare.x1 = a2;
                                        redQueenSquare.x2 = a3;

                                        redQueenRectangle1.x1 = a4;
                                        redQueenRectangle1.x2 = a5;

                                        redQueenRectangle2.x1 = a6;
                                        redQueenRectangle2.x2 = a7;

                                        redQueenRectangle3.x1 = a8;
                                        redQueenRectangle3.x2 = a9;

                                        redQueenEllipse.x1 = a10;
                                        redQueenEllipse.x2 = a11;

                                        redQueenBase.x1 = a12;
                                        redQueenBase.x2 = a13;

                                        redQueenSquare.y1 = a14;
                                        redQueenSquare.y2 = a15;

                                        redQueenRectangle1.y1 = a16;
                                        redQueenRectangle1.y2 = a17;

                                        redQueenRectangle2.y1 = a18;
                                        redQueenRectangle2.y2 = a19;

                                        redQueenRectangle3.y1 = a20;
                                        redQueenRectangle3.y2 = a21;

                                        redQueenEllipse.y1 = a22;
                                        redQueenEllipse.y2 = a23;

                                        redQueenBase.y1 = a24;
                                        redQueenBase.y2 = a25;

                                        turn = 'r';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            redPawnsBase[a].clicked = FALSE;
                                        }
                                        boxes[j][i].clear = FALSE;
                                        turn = 'h';
                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        redPawnsBase[a].clicked = FALSE;
                                    }

                                    itdid = FALSE;
                                }
                            }

                            for(int z=0; z<8; z++) {

                                itdid = FALSE;

                                if(changeii == FALSE &&
                                   redQueenSquareK[z].posX == i*100 &&
                                   redQueenSquareK[z].posY == j*100) {

                                    clickedOne = 'r';
                                    redQueenSquareK[z].clicked = TRUE;
                                    turn = 'r';
                                    strncpy(chosenPiece, "qr", 2);
                                } else if(clickedOne == 'r' &&
                                          redQueenSquareK[z].clicked == TRUE) {
                                    itdid = TRUE;
                                }

                                if(boxes[j][i].clicked == TRUE) {

                                    if(itdid && changeii == FALSE) {

                                        clickedOne = 'r';
                                        redQueenSquareK[z].clicked = FALSE;

                                        int a1 = redQueenSquareK[z].posY;
                                        int a0 = redQueenSquareK[z].posX;

                                        int a2 = redQueenSquareK[z].x1;
                                        int a3 = redQueenSquareK[z].x2;

                                        int a4 = redQueenRectangle1K[z].x1;
                                        int a5 = redQueenRectangle1K[z].x2;

                                        int a6 = redQueenRectangle2K[z].x1;
                                        int a7 = redQueenRectangle2K[z].x2;

                                        int a8 = redQueenRectangle3K[z].x1;
                                        int a9 = redQueenRectangle3K[z].x2;

                                        int a10 = redQueenEllipseK[z].x1;
                                        int a11 = redQueenEllipseK[z].x2;

                                        int a12 = redQueenBaseK[z].x1;
                                        int a13 = redQueenBaseK[z].x2;

                                        int a14 = redQueenSquareK[z].y1;
                                        int a15 = redQueenSquareK[z].y2;

                                        int a16 = redQueenRectangle1K[z].y1;
                                        int a17 = redQueenRectangle1K[z].y2;

                                        int a18 = redQueenRectangle2K[z].y1;
                                        int a19 = redQueenRectangle2K[z].y2;

                                        int a20 = redQueenRectangle3K[z].y1;
                                        int a21 = redQueenRectangle3K[z].y2;

                                        int a22 = redQueenEllipseK[z].y1;
                                        int a23 = redQueenEllipseK[z].y2;

                                        int a24 = redQueenBaseK[z].y1;
                                        int a25 = redQueenBaseK[z].y2;

                                        boolean f = FALSE;

                                        redQueenSquareK[z].failedpath = FALSE;

                                        if(i*100 == redQueenSquareK[z].posX) {
                                            f = moveRedQueenK(msg, j, i, j*100 - redQueenSquareK[z].posY, j*100 - redQueenSquareK[z].posY, z);
                                            f = redQueenSquareK[z].failedpath;
                                        } else if(j*100 == redQueenSquareK[z].posY) {
                                            f = moveRedQueenSideK(msg, j, i, i*100 - redQueenSquareK[z].posX, i*100 - redQueenSquareK[z].posX, z);
                                            f = redQueenSquareK[z].failedpath;
                                        } else if(i*100 != redQueenSquareK[z].posX &&
                                           j*100 != redQueenSquareK[z].posY) {
                                            f = moveRedQueenDiagonallyK(msg, j, i, j*100 - redQueenSquareK[z].posY, i*100 - redQueenSquareK[z].posX, j*100 - redQueenSquareK[z].posY, i*100 - redQueenSquareK[z].posX, z);
                                            f = redQueenSquareK[z].failedpath;
                                        }

                                        boolean fff = checkCheckRed(j, i);

                                        if(f || fff) {

                                            redQueenSquareK[z].posY = a1;
                                            redQueenSquareK[z].posX = a0;

                                            redQueenSquareK[z].x1 = a2;
                                            redQueenSquareK[z].x2 = a3;

                                            redQueenRectangle1K[z].x1 = a4;
                                            redQueenRectangle1K[z].x2 = a5;

                                            redQueenRectangle2K[z].x1 = a6;
                                            redQueenRectangle2K[z].x2 = a7;

                                            redQueenRectangle3K[z].x1 = a8;
                                            redQueenRectangle3K[z].x2 = a9;

                                            redQueenEllipseK[z].x1 = a10;
                                            redQueenEllipseK[z].x2 = a11;

                                            redQueenBaseK[z].x1 = a12;
                                            redQueenBaseK[z].x2 = a13;

                                            redQueenSquareK[z].y1 = a14;
                                            redQueenSquareK[z].y2 = a15;

                                            redQueenRectangle1K[z].y1 = a16;
                                            redQueenRectangle1K[z].y2 = a17;

                                            redQueenRectangle2K[z].y1 = a18;
                                            redQueenRectangle2K[z].y2 = a19;

                                            redQueenRectangle3K[z].y1 = a20;
                                            redQueenRectangle3K[z].y2 = a21;

                                            redQueenEllipseK[z].y1 = a22;
                                            redQueenEllipseK[z].y2 = a23;

                                            redQueenBaseK[z].y1 = a24;
                                            redQueenBaseK[z].y2 = a25;

                                            turn = 'r';
                                        }

                                        else {
                                            for(int a=0; a<8; a++) {
                                                greyPawnsBase[a].clicked = FALSE;
                                            }
                                            for(int a=0; a<8; a++) {
                                                redPawnsBase[a].clicked = FALSE;
                                            }
                                            boxes[j][i].clear = FALSE;
                                            turn = 'h';
                                            if(1==2) SetWindowText(hwnd, "Grey move");
                                            turnChanged = TRUE;
                                            done = TRUE;
                                        }

                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            redPawnsBase[a].clicked = FALSE;
                                        }

                                        itdid = FALSE;
                                    }
                                }
                            }

                            itdid = FALSE;
                            
                            if(redBishop1Square.posX == i*100 &&
                               redBishop1Square.posY == j*100) {
                                
                                clickedOne = 'r';
                                redBishop1Square.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "br", 2);
                            } else if(clickedOne == 'r' &&
                                      redBishop1Square.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'r';
                                    redBishop1Square.clicked = FALSE;

                                    int a1 = redBishop1Square.posY;
                                    int a0 = redBishop1Square.posX;

                                    int a2 = redBishop1Square.x1;
                                    int a3 = redBishop1Square.x2;

                                    int a4 = redBishop1Rectangle.x1;
                                    int a5 = redBishop1Rectangle.x2;

                                    int a6 = redBishop1Ellipse.x1;
                                    int a7 = redBishop1Ellipse.x2;

                                    int a8 = redBishop1Base.x1;
                                    int a9 = redBishop1Base.x2;

                                    int a10 = redBishop1Square.y1;
                                    int a11 = redBishop1Square.y2;

                                    int a12 = redBishop1Rectangle.y1;
                                    int a13 = redBishop1Rectangle.y2;

                                    int a14 = redBishop1Ellipse.y1;
                                    int a15 = redBishop1Ellipse.y2;

                                    int a16 = redBishop1Base.y1;
                                    int a17 = redBishop1Base.y2;

                                    boolean f = FALSE;
                                    
                                    redBishop1Square.failedpath = FALSE;

                                    if(i*100 != redBishop1Square.posX &&
                                       j*100 != redBishop1Square.posY) {
                                        f = moveRedBishop1(msg, j, i, j*100 - redBishop1Square.posY, i*100 - redBishop1Square.posX, j*100 - redBishop1Square.posY, i*100 - redBishop1Square.posX);
                                        f = redBishop1Square.failedpath;
                                    } else {
                                        f = redBishop1Square.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckRed(j, i);
                                    
                                    if(f || fff) {

                                        redBishop1Square.posY = a1;
                                        redBishop1Square.posX = a0;

                                        redBishop1Square.x1 = a2;
                                        redBishop1Square.x2 = a3;

                                        redBishop1Rectangle.x1 = a4;
                                        redBishop1Rectangle.x2 = a5;

                                        redBishop1Ellipse.x1 = a6;
                                        redBishop1Ellipse.x2 = a7;

                                        redBishop1Base.x1 = a8;
                                        redBishop1Base.x2 = a9;

                                        redBishop1Square.y1 = a10;
                                        redBishop1Square.y2 = a11;

                                        redBishop1Rectangle.y1 = a12;
                                        redBishop1Rectangle.y2 = a13;

                                        redBishop1Ellipse.y1 = a14;
                                        redBishop1Ellipse.y2 = a15;

                                        redBishop1Base.y1 = a16;
                                        redBishop1Base.y2 = a17;

                                        turn = 'r';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            redPawnsBase[a].clicked = FALSE;
                                        }
                                        boxes[j][i].clear = FALSE;
                                        turn = 'h';
                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        redPawnsBase[a].clicked = FALSE;
                                    }
                                    
                                    itdid = FALSE;
                                }
                            }

                            itdid = FALSE;
                            
                            if(redBishop2Square.posX == i*100 &&
                               redBishop2Square.posY == j*100) {
                                
                                clickedOne = 'r';
                                redBishop2Square.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "br", 2);
                            } else if(clickedOne == 'r' &&
                                      redBishop2Square.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'r';
                                    redBishop2Square.clicked = FALSE;

                                    int a1 = redBishop2Square.posY;
                                    int a0 = redBishop2Square.posX;

                                    int a2 = redBishop2Square.x1;
                                    int a3 = redBishop2Square.x2;

                                    int a4 = redBishop2Rectangle.x1;
                                    int a5 = redBishop2Rectangle.x2;

                                    int a6 = redBishop2Ellipse.x1;
                                    int a7 = redBishop2Ellipse.x2;

                                    int a8 = redBishop2Base.x1;
                                    int a9 = redBishop2Base.x2;

                                    int a10 = redBishop2Square.y1;
                                    int a11 = redBishop2Square.y2;

                                    int a12 = redBishop2Rectangle.y1;
                                    int a13 = redBishop2Rectangle.y2;

                                    int a14 = redBishop2Ellipse.y1;
                                    int a15 = redBishop2Ellipse.y2;

                                    int a16 = redBishop2Base.y1;
                                    int a17 = redBishop2Base.y2;

                                    boolean f = FALSE;

                                    redBishop2Square.failedpath = FALSE;

                                    if(i*100 != redBishop2Square.posX &&
                                       j*100 != redBishop2Square.posY) {
                                        f = moveRedBishop2(msg, j, i, j*100 - redBishop2Square.posY, i*100 - redBishop2Square.posX, j*100 - redBishop2Square.posY, i*100 - redBishop2Square.posX);
                                        f = redBishop2Square.failedpath;
                                    } else {
                                        f = redBishop2Square.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckRed(j, i);
                                    
                                    if(f || fff) {
                                        
                                        redBishop2Square.posY = a1;
                                        redBishop2Square.posX = a0;

                                        redBishop2Square.x1 = a2;
                                        redBishop2Square.x2 = a3;

                                        redBishop2Rectangle.x1 = a4;
                                        redBishop2Rectangle.x2 = a5;

                                        redBishop2Ellipse.x1 = a6;
                                        redBishop2Ellipse.x2 = a7;

                                        redBishop2Base.x1 = a8;
                                        redBishop2Base.x2 = a9;

                                        redBishop2Square.y1 = a10;
                                        redBishop2Square.y2 = a11;

                                        redBishop2Rectangle.y1 = a12;
                                        redBishop2Rectangle.y2 = a13;

                                        redBishop2Ellipse.y1 = a14;
                                        redBishop2Ellipse.y2 = a15;

                                        redBishop2Base.y1 = a16;
                                        redBishop2Base.y2 = a17;

                                        turn = 'r';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            redPawnsBase[a].clicked = FALSE;
                                        }
                                        boxes[j][i].clear = FALSE;
                                        turn = 'h';
                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                        turnChanged = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        redPawnsBase[a].clicked = FALSE;
                                    }
                                    
                                    itdid = FALSE;
                                }
                            }

                            itdid = FALSE;
                            
                            if(redRook1Rectangle1.posX == i*100 &&
                               redRook1Rectangle1.posY == j*100) {
                                
                                clickedOne = 'r';
                                redRook1Rectangle1.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "rr", 2);
                            } else if(clickedOne == 'r' &&
                                      redRook1Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'r';
                                    redRook1Rectangle1.clicked = FALSE;

                                    int a1 = redRook1Rectangle1.posY;
                                    int a0 = redRook1Rectangle1.posX;

                                    int a2 = redRook1Rectangle1.x1;
                                    int a3 = redRook1Rectangle1.x2;

                                    int a4 = redRook1Rectangle2.x1;
                                    int a5 = redRook1Rectangle2.x2;

                                    int a6 = redRook1Ellipse.x1;
                                    int a7 = redRook1Ellipse.x2;

                                    int a8 = redRook1Base.x1;
                                    int a9 = redRook1Base.x2;

                                    int a10 = redRook1Rectangle1.y1;
                                    int a11 = redRook1Rectangle1.y2;

                                    int a12 = redRook1Rectangle2.y1;
                                    int a13 = redRook1Rectangle2.y2;

                                    int a14 = redRook1Ellipse.y1;
                                    int a15 = redRook1Ellipse.y2;

                                    int a16 = redRook1Base.y1;
                                    int a17 = redRook1Base.y2;

                                    boxes[redRook1Rectangle1.posY/100][redRook1Rectangle1.posX/100].clear = TRUE;

                                    boolean f = FALSE;
                                    
                                    redRook1Rectangle1.failedpath = FALSE;

                                    if(i*100 == redRook1Rectangle1.posX) {
                                        f = moveRedRook1(msg, j, i, j*100 - redRook1Rectangle1.posY, j*100 - redRook1Rectangle1.posY);
                                        f = redRook1Rectangle1.failedpath;
                                    } else if(j*100 == redRook1Rectangle1.posY) {
                                        f = moveRedRook1Side(msg, j, i, i*100 - redRook1Rectangle1.posX, i*100 - redRook1Rectangle1.posX);
                                        f = redRook1Rectangle1.failedpath;
                                    } else {
                                        f = redRook1Rectangle1.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckRed(j, i);
                                    
                                    if(f || fff) {

                                        redRook1Rectangle1.posY = a1;
                                        redRook1Rectangle1.posX = a0;

                                        redRook1Rectangle1.x1 = a2;
                                        redRook1Rectangle1.x2 = a3;

                                        redRook1Rectangle2.x1 = a4;
                                        redRook1Rectangle2.x2 = a5;

                                        redRook1Ellipse.x1 = a6;
                                        redRook1Ellipse.x2 = a7;

                                        redRook1Base.x1 = a8;
                                        redRook1Base.x2 = a9;

                                        redRook1Rectangle1.y1 = a10;
                                        redRook1Rectangle1.y2 = a11;

                                        redRook1Rectangle2.y1 = a12;
                                        redRook1Rectangle2.y2 = a13;

                                        redRook1Ellipse.y1 = a14;
                                        redRook1Ellipse.y2 = a15;

                                        redRook1Base.y1 = a16;
                                        redRook1Base.y2 = a17;

                                        turn = 'r';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            redPawnsBase[a].clicked = FALSE;
                                        }
                                        greyQueenSquare.clicked = FALSE;
                                        greyRook2Rectangle1.clicked = FALSE;
                                        greyQueenSquare.clicked = FALSE;
                                        boxes[j][i].clear = FALSE;
                                        turn = 'h';
                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                        turnChanged = TRUE;
                                        redRook1Moved = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        redPawnsBase[a].clicked = FALSE;
                                    }
                                    greyQueenSquare.clicked = FALSE;
                                    greyRook2Rectangle1.clicked = FALSE;
                                    greyQueenSquare.clicked = FALSE;
                                    
                                    itdid = FALSE;
                                }
                            }

                            itdid = FALSE;
                            
                            if(redRook2Rectangle1.posX == i*100 &&
                               redRook2Rectangle1.posY == j*100) {
                                
                                clickedOne = 'r';
                                redRook2Rectangle1.clicked = TRUE;
                                turn = 'r';
                                strncpy(chosenPiece, "rr", 2);
                            } else if(clickedOne == 'r' &&
                                      redRook2Rectangle1.clicked == TRUE) {
                                itdid = TRUE;
                            }

                            if(boxes[j][i].clicked == TRUE) {

                                if(itdid) {

                                    clickedOne = 'r';
                                    redRook2Rectangle1.clicked = FALSE;

                                    int a1 = redRook2Rectangle1.posY;
                                    int a0 = redRook2Rectangle1.posX;

                                    int a2 = redRook2Rectangle1.x1;
                                    int a3 = redRook2Rectangle1.x2;

                                    int a4 = redRook2Rectangle2.x1;
                                    int a5 = redRook2Rectangle2.x2;

                                    int a6 = redRook2Ellipse.x1;
                                    int a7 = redRook2Ellipse.x2;

                                    int a8 = redRook2Base.x1;
                                    int a9 = redRook2Base.x2;

                                    int a10 = redRook2Rectangle1.y1;
                                    int a11 = redRook2Rectangle1.y2;

                                    int a12 = redRook2Rectangle2.y1;
                                    int a13 = redRook2Rectangle2.y2;

                                    int a14 = redRook2Ellipse.y1;
                                    int a15 = redRook2Ellipse.y2;

                                    int a16 = redRook2Base.y1;
                                    int a17 = redRook2Base.y2;

                                    boxes[redRook2Rectangle1.posY/100][redRook2Rectangle1.posX/100].clear = TRUE;

                                    boolean f = FALSE;

                                    redRook2Rectangle1.failedpath = FALSE;

                                    if(i*100 == redRook2Rectangle1.posX) {
                                        f = moveRedRook2(msg, j, i, j*100 - redRook2Rectangle1.posY, j*100 - redRook2Rectangle1.posY);
                                        f = redRook2Rectangle1.failedpath;
                                    } else if(j*100 == redRook2Rectangle1.posY) {
                                        f = moveRedRook2Side(msg, j, i, i*100 - redRook2Rectangle1.posX, i*100 - redRook2Rectangle1.posX);
                                        f = redRook2Rectangle1.failedpath;
                                    } else {
                                        f = redRook2Rectangle1.failedpath = TRUE;
                                    }

                                    boolean fff = checkCheckRed(j, i);
                                    
                                    if(f || fff) {

                                        redRook2Rectangle1.posY = a1;
                                        redRook2Rectangle1.posX = a0;

                                        redRook2Rectangle1.x1 = a2;
                                        redRook2Rectangle1.x2 = a3;

                                        redRook2Rectangle2.x1 = a4;
                                        redRook2Rectangle2.x2 = a5;

                                        redRook2Ellipse.x1 = a6;
                                        redRook2Ellipse.x2 = a7;

                                        redRook2Base.x1 = a8;
                                        redRook2Base.x2 = a9;

                                        redRook2Rectangle1.y1 = a10;
                                        redRook2Rectangle1.y2 = a11;

                                        redRook2Rectangle2.y1 = a12;
                                        redRook2Rectangle2.y2 = a13;

                                        redRook2Ellipse.y1 = a14;
                                        redRook2Ellipse.y2 = a15;

                                        redRook2Base.y1 = a16;
                                        redRook2Base.y2 = a17;

                                        turn = 'r';
                                    }

                                    else {
                                        for(int a=0; a<8; a++) {
                                            greyPawnsBase[a].clicked = FALSE;
                                        }
                                        for(int a=0; a<8; a++) {
                                            redPawnsBase[a].clicked = FALSE;
                                        }
                                        greyQueenSquare.clicked = FALSE;
                                        greyRook1Rectangle1.clicked = FALSE;
                                        greyQueenSquare.clicked = FALSE;
                                        boxes[j][i].clear = FALSE;
                                        turn = 'h';
                                        if(1==2) SetWindowText(hwnd, "Grey move");
                                        turnChanged = TRUE;
                                        redRook2Moved = TRUE;
                                        done = TRUE;
                                    }

                                    for(int a=0; a<8; a++) {
                                        greyPawnsBase[a].clicked = FALSE;
                                    }
                                    for(int a=0; a<8; a++) {
                                        redPawnsBase[a].clicked = FALSE;
                                    }
                                    greyQueenSquare.clicked = FALSE;
                                    greyRook1Rectangle1.clicked = FALSE;
                                    greyQueenSquare.clicked = FALSE;
                                    
                                    itdid = FALSE;
                                }
                            }
                        }

                        checkCheckGrey(j, i);

                        HBRUSH rBrush;
                        rBrush = CreateSolidBrush(RGB(155, 100, 100));
                        RECT r = {i*100, j*100, i*100 + 16, j*100 + 16};
                        for(int t=0; t<8; t++) {
                            if(turn == 'h' && redPawnsBase[t].posX == i*100 &&
                               redPawnsBase[t].posY == j*100) {
                                if(TRUE==done) {
                                    int l1_x1 = i*100;
                                    int l1_y1 = j*100 + 8;
                                    int l1_x2 = i*100 + 8;
                                    int l1_y2 = j*100 + 16;
                                    int l2_x1 = i*100 + 8;
                                    int l2_y1 = j*100 + 16;
                                    int l2_x2 = i*100 + 16;
                                    int l2_y2 = j*100;
                                    PAINTSTRUCT pntS;
                                    HPEN pen, oldPen;
                                    
                                    						
                                    pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));
                                    oldPen = (HPEN)SelectObject(hdc, pen);				
                                    MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                    LineTo(hdc, l1_x2, l1_y2);
                                    MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                    LineTo(hdc, l2_x2, l2_y2);
                                    SelectObject(hdc, oldPen); 
                                    DeleteObject(pen);
                                    
                                }
                            }
                        }
                        for(int t=0; t<8; t++) {
                            if(turn == 'r' && redPawnsBase[t].posX == i*100 &&
                               redPawnsBase[t].posY == j*100) {
                                FillRect(hdc, &r, rBrush);
                            }
                        }
                        if(turn == 'h' && redKingSquare.posX == i*100 &&
                           redKingSquare.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redKingSquare.posX == i*100 &&
                           redKingSquare.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'h' && redQueenSquare.posX == i*100 &&
                           redQueenSquare.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redQueenSquare.posX == i*100 &&
                           redQueenSquare.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'h' && redKnight1Rectangle1.posX == i*100 &&
                           redKnight1Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redKnight1Rectangle1.posX == i*100 &&
                           redKnight1Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'h' && redKnight2Rectangle1.posX == i*100 &&
                           redKnight2Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redKnight2Rectangle1.posX == i*100 &&
                           redKnight2Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'h' && redBishop1Square.posX == i*100 &&
                           redBishop1Square.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redBishop1Square.posX == i*100 &&
                           redBishop1Square.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && redBishop2Square.posX == i*100 &&
                           redBishop2Square.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && redBishop2Square.posX == i*100 &&
                           redBishop2Square.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redBishop2Square.posX == i*100 &&
                           redBishop2Square.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'h' && redRook1Rectangle1.posX == i*100 &&
                           redRook1Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'r' && redRook1Rectangle1.posX == i*100 &&
                           redRook1Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        if(turn == 'r' && redRook2Rectangle1.posX == i*100 &&
                           redRook2Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                                
                            }
                        }
                        if(turn == 'h' && redRook2Rectangle1.posX == i*100 &&
                           redRook2Rectangle1.posY == j*100) {
                            if(TRUE==done) {
                                int l1_x1 = i*100;
                                int l1_y1 = j*100 + 8;
                                int l1_x2 = i*100 + 8;
                                int l1_y2 = j*100 + 16;
                                int l2_x1 = i*100 + 8;
                                int l2_y1 = j*100 + 16;
                                int l2_x2 = i*100 + 16;
                                int l2_y2 = j*100;
                                PAINTSTRUCT pntS;
                                HPEN pen, oldPen;
                                
                                						
                                pen = CreatePen(PS_SOLID, 2, RGB(255, 200, 200));	
                                oldPen = (HPEN)SelectObject(hdc, pen);				
                                MoveToEx(hdc, l1_x1, l1_y1, NULL);
                                LineTo(hdc, l1_x2, l1_y2);
                                MoveToEx(hdc, l2_x1, l2_y1, NULL);
                                LineTo(hdc, l2_x2, l2_y2);
                                SelectObject(hdc, oldPen); 
                                DeleteObject(pen);
                            }
                        }
                        if(turn == 'r' && redRook2Rectangle1.posX == i*100 &&
                           redRook2Rectangle1.posY == j*100) {
                            FillRect(hdc, &r, rBrush);
                        }
                        DeleteObject(rBrush);
                        
                        if(done) {
                            PostMessage(hwnd, WM_NOTIFY, 0, 0);
                        }
                    }
                }
            }
            
            break;
        }
        case WM_CREATE:
        {
            HMENU hMenu, hSubMenu;
            HICON hIcon, hIconSm;
            
            hMenu = CreateMenu();

            hSubMenu = CreatePopupMenu();
            AppendMenu(hSubMenu, MF_STRING, ID_CLICK_ME_NEW_GAME, "new game");
            AppendMenu(hSubMenu, MF_STRING, ID_FILE_PRINT, "capture screen");
            AppendMenu(hSubMenu, MF_STRING, ID_CLICK_ME_QUIT, "quit");

            AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "click me");

            hSubMenu = CreatePopupMenu();
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_0MIN, "no time limit");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_5MIN, "5 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_10MIN, "10 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_15MIN, "15 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_20MIN, "20 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_25MIN, "25 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_30MIN, "30 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_35MIN, "35 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_40MIN, "40 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_45MIN, "45 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_50MIN, "50 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_55MIN, "55 mins");
            AppendMenu(hSubMenu, MF_STRING, ID_TIMER_60MIN, "60 mins");
            AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "timer");

            SetMenu(hwnd, hMenu);

            hIcon = LoadImage(NULL, "Icon.ico", IMAGE_ICON, 32, 32, LR_LOADFROMFILE);
            if(hIcon)
                SendMessage(hwnd, WM_SETICON, ICON_BIG, (LPARAM)hIcon);
            else
                MessageBox(hwnd, "Could not load large icon!", "Error", MB_OK | MB_ICONERROR);

            hIconSm = LoadImage(NULL, "Icon.ico", IMAGE_ICON, 16, 16, LR_LOADFROMFILE);
            if(hIconSm)
                SendMessage(hwnd, WM_SETICON, ICON_SMALL, (LPARAM)hIconSm);
            else
                MessageBox(hwnd, "Could not load small icon!", "Error", MB_OK | MB_ICONERROR);

            char b[100] = "white";
            y = 0; h = 15;
            x = 825; w = 120;
            hwnd_white = CreateWindow("static", NULL,
                                       WS_CHILD | WS_VISIBLE | WS_TABSTOP,
                                       x, y, w, h,
                                       hwnd, (HMENU)(501),
                                       (HINSTANCE) GetWindowLong (hwnd, GWL_HINSTANCE), NULL);
            SetWindowText(hwnd_white, b);

            char c[100] = "black";
            y = 0; h = 15;
            x = 900; w = 120;
            hwnd_black = CreateWindow("static", NULL,
                                       WS_CHILD | WS_VISIBLE | WS_TABSTOP,
                                       x, y, w, h,
                                       hwnd, (HMENU)(501),
                                       (HINSTANCE) GetWindowLong (hwnd, GWL_HINSTANCE), NULL);
            SetWindowText(hwnd_black, c);

            y = 850; h = 20;
            x = 10; w = 420;
            hwnd_timer = CreateWindow("static", NULL,
                                       WS_CHILD | WS_VISIBLE | WS_TABSTOP,
                                       x, y, w, h,
                                       hwnd, (HMENU)(501),
                                       (HINSTANCE) GetWindowLong (hwnd, GWL_HINSTANCE), NULL);

            y = 830; h = 48;
            x = 450; w = 124;
  	    hwnd_newgamebtn = CreateWindowEx(0, "BUTTON", "new game", WS_VISIBLE | WS_CHILD | BS_PUSHLIKE,
								x, y, w, h, hwnd, (HMENU) IDC_NEW_GAME_BUTTON, NULL, NULL);
                
            y = 830; h = 48;
            x = 900; w = 144;
  	    hwnd_capturescreenbtn = CreateWindowEx(0, "BUTTON", "CAPTURE SCREEN", WS_VISIBLE | WS_CHILD | BS_PUSHLIKE,
								x, y, w, h, hwnd, (HMENU) IDC_CAPTURE_SCREEN_BUTTON, NULL, NULL);
            
            y = 830; h = 48;
            x = 580; w = 164;
  	    hwnd_quitbtn = CreateWindowEx(0, "BUTTON", "quit", WS_VISIBLE | WS_CHILD | BS_PUSHLIKE,
								x, y, w, h, hwnd, (HMENU) IDC_QUIT_BUTTON, NULL, NULL);

            hBitmap = (HBITMAP)LoadImage(hInst, "logo.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

            break;
        }
        break;
        case WM_MOUSEMOVE:
        {
            if(klicked) {
                i__PosX = LOWORD(lParam);
                i__PosY = HIWORD(lParam);
                PostMessage(hwnd, WM_NOTIFY, 0, 0);
            }
        }
        break;
        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_FILE_PRINT:
                    Print_Window(hwnd);
                break;
                case IDC_CAPTURE_SCREEN_BUTTON:
                    if (HIWORD(wParam) == BN_CLICKED) {
                        Print_Window(hwnd);
                    }
                break;
                case IDC_NEW_GAME_BUTTON:
                    if (HIWORD(wParam) == BN_CLICKED) {

                        MessageBox(hwnd,"To move white piece drag/drop it while using a left click.  Same for the black piece but while using a right click.  alternatively, you may point and click: left clicks (white), right clicks(black)","how to move white & black piece good luck",MB_OK);

                        if(thread != NULL) {
                            TerminateThread(thread, 0);
                        }
                        thread = CreateThread(NULL, 0, ThreadFunc, NULL, 0, NULL);

                        Play();
                        
                        PostMessage(hwnd, WM_NOTIFY, 0, 0);
                    }
                break;
                case IDC_QUIT_BUTTON:
                    if (HIWORD(wParam) == BN_CLICKED) {
                        MessageBox(hwnd,"Good bye~","Quit",MB_OK);
                        PostMessage(hwnd, WM_CLOSE, 0, 0);
                    }
                break;
                case ID_TIMER_0MIN:
                    ttw = 0;
                    timeToWait = 0;
                break;
                case ID_TIMER_5MIN:
                    ttw = 5;
                    timeToWait = 60*5;
                break;
                case ID_TIMER_10MIN:
                    ttw = 10;
                    timeToWait = 60*10;
                break;
                case ID_TIMER_15MIN:
                    ttw = 15;
                    timeToWait = 60*15;
                break;
                case ID_TIMER_20MIN:
                    ttw = 20;
                    timeToWait = 60*20;
                break;
                case ID_TIMER_25MIN:
                    ttw = 25;
                    timeToWait = 60*25;
                break;
                case ID_TIMER_30MIN:
                    ttw = 30;
                    timeToWait = 60*30;
                break;
                case ID_TIMER_35MIN:
                    ttw = 35;
                    timeToWait = 60*35;
                break;
                case ID_TIMER_40MIN:
                    ttw = 40;
                    timeToWait = 60*40;
                break;
                case ID_TIMER_45MIN:
                    ttw = 45;
                    timeToWait = 60*45;
                break;
                case ID_TIMER_50MIN:
                    ttw = 50;
                    timeToWait = 60*50;
                break;
                case ID_TIMER_55MIN:
                    ttw = 55;
                    timeToWait = 60*55;
                break;
                case ID_TIMER_60MIN:
                    ttw = 60;
                    timeToWait = 60*60;
                break;
                case ID_CLICK_ME_NEW_GAME:

                  MessageBox(hwnd,"To move white piece drag/drop it while using a left click.  Same for the black piece but while using a right click.  alternatively, you may point and click: left clicks (white), right clicks(black)","how to move white & black piece good luck",MB_OK);

                  if(thread != NULL) {
                        TerminateThread(thread, 0);
                    }
                    thread = CreateThread(NULL, 0, ThreadFunc, NULL, 0, NULL);

                    Play();

                    PostMessage(hwnd, WM_NOTIFY, 0, 0);
                break;
                case ID_CLICK_ME_QUIT:
                    MessageBox(hwnd,"Good bye~","Quit",MB_OK);
                    PostMessage(hwnd, WM_CLOSE, 0, 0);
                break;
            }
        break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }

    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = g_szClassName;
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);
    
    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, "Window Registration Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        g_szClassName,
        "                                                                                                        my chess",
        WS_OVERLAPPEDWINDOW,
        rect.left, rect.top, 1100, 950,
        NULL, NULL, hInstance, NULL);
    
    if(hwnd == NULL)
    {
        MessageBox(0, "Window Creation Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }
    
    DisableMaximizeButton(hwnd);

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    HWND hWnd = GetConsoleWindow();
    ShowWindow( hWnd, SW_HIDE );

    RECT rc;

    GetWindowRect ( hwnd, &rc ) ;

    int xPos = (GetSystemMetrics(SM_CXSCREEN) - rc.right)/2;
    int yPos = (GetSystemMetrics(SM_CYSCREEN) - rc.bottom)/2;

    SetWindowPos( hwnd, NULL, xPos, yPos, 0, 0, SWP_NOZORDER | SWP_NOSIZE );

    //InitCommonControls();

    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
}